<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for app/shared/services/quotes.service.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">all files</a> / <a href="index.html">app/shared/services/</a> quotes.service.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">70.37% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>57/81</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">55.32% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>26/47</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">52% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>13/25</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">73.97% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>54/73</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">"use strict";
var __decorate = (this &amp;&amp; this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c &lt; 3 ? target : <span class="branch-1 cbranch-no" title="branch not covered" >desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,</span> d;
    <span class="missing-if-branch" title="if path not taken" >I</span>if (typeof Reflect === "object" &amp;&amp; typeof Reflect.decorate === "function") <span class="cstat-no" title="statement not covered" >r = Reflect.decorate(decorators, target, key, desc);</span>
    else for (var i = decorators.length - 1; i &gt;= 0; i--) <span class="missing-if-branch" title="else path not taken" >E</span>if (d = decorators[i]) r = (c &lt; 3 ? d(r) : <span class="branch-1 cbranch-no" title="branch not covered" >c &gt; 3 ? d(target, key, r) : d(target, key))</span> || r;
    return c &gt; 3 &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >r </span>&amp;&amp; <span class="branch-2 cbranch-no" title="branch not covered" >Object.defineProperty(target, key, r),</span> r;
};
var __metadata = (this &amp;&amp; this.__metadata) || function (k, v) {
    <span class="missing-if-branch" title="else path not taken" >E</span>if (typeof Reflect === "object" &amp;&amp; typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var api_service_1 = require("../../shared/services/api.service");
var cart_service_1 = require("../../shared/services/cart.service");
var api_interface_1 = require("../../shared/interfaces/api.interface");
var quotes_store_1 = require("../../shared/stores/quotes.store");
var QuotesService = (function () {
    function QuotesService(api, cart, quotesStore) {
        var _this = this;
        this.api = api;
        this.cart = cart;
        this.quotesStore = quotesStore;
        this.updateQuotesInStore = <span class="fstat-no" title="function not covered" >function (quotes) {</span>
<span class="cstat-no" title="statement not covered" >            _this.quotesStore.updateQuotes({ items: quotes.items });</span>
        };
        this.setQuotesInStore = function (quotes) {
            _this.quotesStore.setQuotes(quotes);
        };
    }
    Object.defineProperty(QuotesService.prototype, "data", {
        get: function () {
            return this.quotesStore.data;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QuotesService.prototype, "state", {
        get: function () {
            return this.quotesStore.state;
        },
        enumerable: true,
        configurable: true
    });
    QuotesService.prototype.getQuotes = function (userCanAdministerQuotes, params) {
        <span class="missing-if-branch" title="if path not taken" >I</span>if (userCanAdministerQuotes === void 0) { <span class="cstat-no" title="statement not covered" >userCanAdministerQuotes = false; </span>}
        <span class="missing-if-branch" title="if path not taken" >I</span>if (params === void 0) { <span class="cstat-no" title="statement not covered" >params = {}; </span>}
        <span class="missing-if-branch" title="if path not taken" >I</span>if (userCanAdministerQuotes) {
<span class="cstat-no" title="statement not covered" >            return this.getQuotesForSalesUser(params);</span>
        }
        else {
            return this.getQuotesForCustomer(params);
        }
    };
    QuotesService.prototype.getFocused = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >        return this.api.get(api_interface_1.Api.Orders, 'quote/focused');</span>
    };
    QuotesService.prototype.setFocused = <span class="fstat-no" title="function not covered" >function (quoteId) {</span>
<span class="cstat-no" title="statement not covered" >        var _this = this;</span>
<span class="cstat-no" title="statement not covered" >        return this.api.put(api_interface_1.Api.Orders, "quote/focused/" + quoteId, { loadingIndicator: true }).do(<span class="fstat-no" title="function not covered" >function (quote) {</span></span>
<span class="cstat-no" title="statement not covered" >            _this.updateNewFocusedQuote(quote.id);</span>
        });
    };
    QuotesService.prototype.rejectQuote = <span class="fstat-no" title="function not covered" >function (quoteId) {</span>
<span class="cstat-no" title="statement not covered" >        return this.api.put(api_interface_1.Api.Orders, "quote/reject/" + quoteId);</span>
    };
    QuotesService.prototype.createEmpty = function () {
        return this.api.post(api_interface_1.Api.Orders, 'quote', { loadingIndicator: true });
    };
    QuotesService.prototype.getQuotesForCustomer = function (params) {
        return this.quotesList(params);
    };
    QuotesService.prototype.getQuotesForSalesUser = <span class="fstat-no" title="function not covered" >function (params) {</span>
<span class="cstat-no" title="statement not covered" >        var _this = this;</span>
<span class="cstat-no" title="statement not covered" >        return this.getFocused().switchMap(<span class="fstat-no" title="function not covered" >function (quote) {</span> <span class="cstat-no" title="statement not covered" >return _this.quotesList(params, quote.id); </span>});</span>
    };
    QuotesService.prototype.quotesList = function (params, focusedQuoteId) {
        var _this = this;
        <span class="missing-if-branch" title="if path not taken" >I</span>if (params === void 0) { <span class="cstat-no" title="statement not covered" >params = {}; </span>}
        return this.api.get(api_interface_1.Api.Orders, 'quote/myQuotes', { parameters: this.buildSearchParams(params), loadingIndicator: true }).map(function (res) {
            res.items = res.items ? <span class="branch-0 cbranch-no" title="branch not covered" >res.items </span>: [];
            <span class="missing-if-branch" title="if path not taken" >I</span>if (focusedQuoteId)
<span class="cstat-no" title="statement not covered" >                _this.findNewFocused(res.items, focusedQuoteId);</span>
            return res;
        }).do(this.setQuotesInStore);
    };
    QuotesService.prototype.findNewFocused = <span class="fstat-no" title="function not covered" >function (quotes, activeQuoteId) {</span>
<span class="cstat-no" title="statement not covered" >        return quotes.map(<span class="fstat-no" title="function not covered" >function (quote) {</span></span>
<span class="cstat-no" title="statement not covered" >            quote.focused = quote.id === activeQuoteId;</span>
<span class="cstat-no" title="statement not covered" >            return quote;</span>
        });
    };
    QuotesService.prototype.updateNewFocusedQuote = <span class="fstat-no" title="function not covered" >function (quoteId) {</span>
<span class="cstat-no" title="statement not covered" >        this.data.do(<span class="fstat-no" title="function not covered" >function (data) {</span></span>
<span class="cstat-no" title="statement not covered" >            data.items.map(<span class="fstat-no" title="function not covered" >function (quote) {</span></span>
<span class="cstat-no" title="statement not covered" >                quote.focused = false;</span>
<span class="cstat-no" title="statement not covered" >                if (quote.id === quoteId)</span>
<span class="cstat-no" title="statement not covered" >                    quote.focused = true;</span>
<span class="cstat-no" title="statement not covered" >                return quote;</span>
            });
        }).do(this.updateQuotesInStore).take(1).subscribe();
    };
    QuotesService.prototype.buildSearchParams = function (params) {
        params['i'] = (params['i'] &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >params['i'] &gt; 0)</span> ? <span class="branch-0 cbranch-no" title="branch not covered" >params['i'] - 1 </span>: 0;
        return Object.assign({}, { q: '', i: 0, n: 20, s: '', d: '' }, params);
    };
    QuotesService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [api_service_1.ApiService,
            cart_service_1.CartService,
            quotes_store_1.QuotesStore])
    ], QuotesService);
    return QuotesService;
}());
exports.QuotesService = QuotesService;
&nbsp;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zaGFyZWQvc2VydmljZXMvcXVvdGVzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxzQ0FBMkM7QUFDM0MsaUVBQStEO0FBQy9ELG1FQUFpRTtBQUNqRSx1RUFBNEQ7QUFHNUQsaUVBQStEO0FBRy9EO0lBQ0UsdUJBQW9CLEdBQWUsRUFDekIsSUFBaUIsRUFDakIsV0FBd0I7UUFGbEMsaUJBR0s7UUFIZSxRQUFHLEdBQUgsR0FBRyxDQUFZO1FBQ3pCLFNBQUksR0FBSixJQUFJLENBQWE7UUFDakIsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFnRjFCLHdCQUFtQixHQUFHLFVBQUMsTUFBYztZQUMzQyxLQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUN6RCxDQUFDLENBQUE7UUFFTyxxQkFBZ0IsR0FBRyxVQUFDLE1BQXlCO1lBQ25ELEtBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JDLENBQUMsQ0FBQTtJQXJGRyxDQUFDO0lBR0wsc0JBQVcsK0JBQUk7YUFBZjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztRQUMvQixDQUFDOzs7T0FBQTtJQUVELHNCQUFXLGdDQUFLO2FBQWhCO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO1FBQ2hDLENBQUM7OztPQUFBO0lBRU0saUNBQVMsR0FBaEIsVUFBaUIsdUJBQXdDLEVBQUUsTUFBZ0I7UUFBMUQsd0NBQUEsRUFBQSwrQkFBd0M7UUFBRSx1QkFBQSxFQUFBLFdBQWdCO1FBQ3pFLEVBQUUsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQztZQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVDLENBQUM7UUFB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LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9hcGkuc2VydmljZSc7XG5pbXBvcnQgeyBDYXJ0U2VydmljZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9jYXJ0LnNlcnZpY2UnO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvYXBpLmludGVyZmFjZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFF1b3RlLCBRdW90ZXMsIFF1b3Rlc0FwaVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvY29tbWVyY2UuaW50ZXJmYWNlJztcbmltcG9ydCB7IFF1b3Rlc1N0b3JlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3N0b3Jlcy9xdW90ZXMuc3RvcmUnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUXVvdGVzU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBpOiBBcGlTZXJ2aWNlLFxuICAgIHByaXZhdGUgY2FydDogQ2FydFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBxdW90ZXNTdG9yZTogUXVvdGVzU3RvcmVcbiAgKSB7IH1cblxuXG4gIHB1YmxpYyBnZXQgZGF0YSgpOiBPYnNlcnZhYmxlPFF1b3Rlcz4ge1xuICAgIHJldHVybiB0aGlzLnF1b3Rlc1N0b3JlLmRhdGE7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHN0YXRlKCk6IFF1b3RlcyB7XG4gICAgcmV0dXJuIHRoaXMucXVvdGVzU3RvcmUuc3RhdGU7XG4gIH1cblxuICBwdWJsaWMgZ2V0UXVvdGVzKHVzZXJDYW5BZG1pbmlzdGVyUXVvdGVzOiBib29sZWFuID0gZmFsc2UsIHBhcmFtczogYW55ID0ge30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmICh1c2VyQ2FuQWRtaW5pc3RlclF1b3Rlcykge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0UXVvdGVzRm9yU2FsZXNVc2VyKHBhcmFtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFF1b3Rlc0ZvckN1c3RvbWVyKHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEZvY3VzZWQoKTogT2JzZXJ2YWJsZTxRdW90ZT4ge1xuICAgIHJldHVybiB0aGlzLmFwaS5nZXQoQXBpLk9yZGVycywgJ3F1b3RlL2ZvY3VzZWQnKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRGb2N1c2VkKHF1b3RlSWQ6IG51bWJlcik6IE9ic2VydmFibGU8UXVvdGU+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkucHV0KEFwaS5PcmRlcnMsIGBxdW90ZS9mb2N1c2VkLyR7cXVvdGVJZH1gLCB7IGxvYWRpbmdJbmRpY2F0b3I6IHRydWUgfSkuZG8oKHF1b3RlOiBRdW90ZSkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVOZXdGb2N1c2VkUXVvdGUocXVvdGUuaWQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlamVjdFF1b3RlKHF1b3RlSWQ6IG51bWJlcik6IE9ic2VydmFibGU8UXVvdGU+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkucHV0KEFwaS5PcmRlcnMsIGBxdW90ZS9yZWplY3QvJHtxdW90ZUlkfWApO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUVtcHR5KCk6IE9ic2VydmFibGU8UXVvdGU+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkucG9zdChBcGkuT3JkZXJzLCAncXVvdGUnLCB7IGxvYWRpbmdJbmRpY2F0b3I6IHRydWUgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldFF1b3Rlc0ZvckN1c3RvbWVyKHBhcmFtczogYW55KTogT2JzZXJ2YWJsZTxRdW90ZXNBcGlSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnF1b3Rlc0xpc3QocGFyYW1zKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UXVvdGVzRm9yU2FsZXNVc2VyKHBhcmFtczogYW55KTogT2JzZXJ2YWJsZTxRdW90ZXNBcGlSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmdldEZvY3VzZWQoKS5zd2l0Y2hNYXAocXVvdGUgPT4gdGhpcy5xdW90ZXNMaXN0KHBhcmFtcywgcXVvdGUuaWQpKTtcbiAgfVxuXG4gIHByaXZhdGUgcXVvdGVzTGlzdChwYXJhbXM6IGFueSA9IHt9LCBmb2N1c2VkUXVvdGVJZD86IG51bWJlcik6IE9ic2VydmFibGU8UXVvdGVzQXBpUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5hcGkuZ2V0KFxuICAgICAgQXBpLk9yZGVycyxcbiAgICAgICdxdW90ZS9teVF1b3RlcycsXG4gICAgICB7IHBhcmFtZXRlcnM6IHRoaXMuYnVpbGRTZWFyY2hQYXJhbXMocGFyYW1zKSwgbG9hZGluZ0luZGljYXRvcjogdHJ1ZSB9XG4gICAgKS5tYXAoKHJlczogUXVvdGVzQXBpUmVzcG9uc2UpID0+IHtcbiAgICAgIHJlcy5pdGVtcyA9IHJlcy5pdGVtcyA/IHJlcy5pdGVtcyA6IFtdO1xuICAgICAgaWYgKGZvY3VzZWRRdW90ZUlkKSB0aGlzLmZpbmROZXdGb2N1c2VkKHJlcy5pdGVtcywgZm9jdXNlZFF1b3RlSWQpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9KS5kbyh0aGlzLnNldFF1b3Rlc0luU3RvcmUpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kTmV3Rm9jdXNlZChxdW90ZXM6IFF1b3RlW10sIGFjdGl2ZVF1b3RlSWQ6IG51bWJlcik6IFF1b3RlW10ge1xuICAgIHJldHVybiBxdW90ZXMubWFwKChxdW90ZTogUXVvdGUpID0+IHtcbiAgICAgIHF1b3RlLmZvY3VzZWQgPSBxdW90ZS5pZCA9PT0gYWN0aXZlUXVvdGVJZDtcbiAgICAgIHJldHVybiBxdW90ZTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlTmV3Rm9jdXNlZFF1b3RlKHF1b3RlSWQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuZGF0YS5kbygoZGF0YTogUXVvdGVzKSA9PiB7XG4gICAgICBkYXRhLml0ZW1zLm1hcCgocXVvdGU6IFF1b3RlKSA9PiB7XG4gICAgICAgIHF1b3RlLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHF1b3RlLmlkID09PSBxdW90ZUlkKSBxdW90ZS5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHF1b3RlO1xuICAgICAgfSk7XG4gICAgfSkuZG8odGhpcy51cGRhdGVRdW90ZXNJblN0b3JlKS50YWtlKDEpLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFNlYXJjaFBhcmFtcyhwYXJhbXM6IGFueSkge1xuICAgIHBhcmFtc1snaSddID0gKHBhcmFtc1snaSddICYmIHBhcmFtc1snaSddID4gMCkgPyBwYXJhbXNbJ2knXSAtIDEgOiAwO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB7IHE6ICcnLCBpOiAwLCBuOiAyMCwgczogJycsIGQ6ICcnIH0sIHBhcmFtcyk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVF1b3Rlc0luU3RvcmUgPSAocXVvdGVzOiBRdW90ZXMpOiB2b2lkID0+IHtcbiAgICB0aGlzLnF1b3Rlc1N0b3JlLnVwZGF0ZVF1b3Rlcyh7IGl0ZW1zOiBxdW90ZXMuaXRlbXMgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldFF1b3Rlc0luU3RvcmUgPSAocXVvdGVzOiBRdW90ZXNBcGlSZXNwb25zZSk6IHZvaWQgPT4ge1xuICAgIHRoaXMucXVvdGVzU3RvcmUuc2V0UXVvdGVzKHF1b3Rlcyk7XG4gIH1cbn1cbiJdfQ==
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Feb 09 2018 23:34:44 GMT-0700 (MST)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
