!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PrismicToolbar",[],t):"object"==typeof exports?exports.PrismicToolbar=t():e.PrismicToolbar=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,r){"use strict";function n(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+'\\s*\\=\\s*"?([^;]*)"?.*$)|^.*$'),"$1"))||null}function o(e,t,r,n,o,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(r)switch(r.constructor){case Number:s=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:s="; expires="+r;break;case Date:s="; expires="+r.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(o?"; domain="+o:"")+(n?"; path="+n:"")+(i?"; secure":""),!0}function i(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}function s(e,t,r){if(!i(e))return!1;var n=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(t?"; path="+t:"");return document.cookie=n,!0}function a(){if(!navigator.cookieEnabled)return!1;document.cookie="__verify=1";var e=document.cookie.length>=1&&-1!==document.cookie.indexOf("__verify=1"),t=new Date(2010,1,1);return document.cookie="__verify=1;expires="+t.toUTCString(),!!e}Object.defineProperty(t,"__esModule",{value:!0});t.default={PREVIEW_COOKIE_KEY:"io.prismic.preview",EXPERIMENT_COOKIE_KEY:"io.prismic.experiment",getPreviewToken:function(){return n("io.prismic.preview")},getExperimentToken:function(){return n("io.prismic.experiment")},removeExperimentToken:function(){s("io.prismic.experiment")},setExperimentToken:function(e,t){o("io.prismic.experiment",[e,t].join(" "),2592e3,"/")},getItem:n,setItem:o,removeItem:s,supportCookies:a,hasItem:i}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function s(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function a(e){var t=new FileReader,r=s(t);return t.readAsArrayBuffer(e),r}function u(e){var t=new FileReader,r=s(t);return t.readAsText(e),r}function c(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&w(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!E(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return A.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var r=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(e){return e&&DataView.prototype.isPrototypeOf(e)},E=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];this.map[e]=o?o+","+n:n},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=r(n)},o.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},b.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=p,e.Response=m,e.fetch=function(e,t){return new Promise(function(r,n){var o=new p(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;r(new m(t,e))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&b.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){e&&(s.default.setup(),u.default.setup(e))}Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),s=n(i),a=r(3),u=n(a),c=r(4),d=n(c),f=r(6),l=n(f);t.default={setup:l.default.debounce(o,500),startExperiment:function(e){d.default.start(e)}}},function(e,t,r){"use strict";function n(e){var t=i.default.getPreviewToken(),r=i.default.getExperimentToken(),n=e.match(new RegExp("(https?://([^/]*))"));if(n){var o=n[1].replace(/\.cdn\.prismic\.io/,".prismic.io"),a=n[2].replace(/\.cdn\.prismic\.io/,".prismic.io");fetch(o+"/app/authenticated/v2",{credentials:"include"}).then(function(e){var n=e.headers.get("content-type");n&&-1!==n.indexOf("application/json")&&e.json().then(function(e){e.userId&&(document.querySelectorAll(".wio-link").forEach(function(e){e.parentNode.removeChild(e)}),document.querySelectorAll("[data-wio-id]").forEach(function(e){var n=e.dataset.wioId,i=function(){if(t)return o+"/app/documents/"+n+"/preview/"+encodeURIComponent(t);if(r){var e=r.split(" "),i=e[0],s=e[1];return o+"/app/documents/"+n+"/experiments/"+encodeURIComponent(i)+"/variations/"+encodeURIComponent(s)}return o+"/app/documents/"+n+"/ref"}(),u=function(){var e=document.createElement("a");e.className="wio-link",e.setAttribute("target",a),e.setAttribute("href",i);var t=document.createElement("img");return t.setAttribute("style","width: 16px; background: none;"),t.setAttribute("src",s),e.appendChild(t),e}();e.insertBefore(u,e.firstChild)}))})}).catch(function(){})}}Object.defineProperty(t,"__esModule",{value:!0}),r(1);var o=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpERjQ5QUU2RjNEMjA2ODExODhDNkNCNjMxRDc2RjgxMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDNEVBRjk1MDJGRjIxMUUyOEMwOTk5MjNGNzE3MTFBNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDNEVBRjk0RjJGRjIxMUUyOEMwOTk5MjNGNzE3MTFBNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTQ5NzEzQkEyNzIwNjgxMThGNjJCODhCQkREMUY0RkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REY0OUFFNkYzRDIwNjgxMTg4QzZDQjYzMUQ3NkY4MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5adgfzAAABo0lEQVR42uybz2YDURSHb/8oXfUBSrddlW7zBqWrvkEppWQbSrahDF2FMISsssq2tFSqpEofoJRW32C6LCG053Avd3VNJneRc87vx0fInTHfmTh3bsx1Tl+OiQHxTfwRFTElCv+d2uwQpZdOUfqxqrJHvNaQD8w0FWFZ+cDQsjyzII62hMvfE62Gx29avfMxH5blmV+JBehlkmfmUuf7SaYCfErtAdy8xxkKcCO5EXIRRivI8zR4KKXhnSfGlA0LcCtB/i264MvE2P6S8lP/CxIjH2gnjilqyj8TuxLlA50Vpkjx8nWK0NUuH+gmztXRLh/oJc7ZjhqeSvlAkTj3mXb5QF/qqi6HfPxfn1n5wGjdH3Byr+dFTnWQhzzkIQ95yEMe8pCHPOQhD3nIQx7ykIc85CEPechDfn1yZ1meL3BuVZ5zalmeM7Asz3m3LH9gWZ5zZVmeM7Ysz29VVFblOS3L8pxry/KcmWu232aiQZ4XPwtXf5cVv5h44hTtvEw9/lb+Ll8Q+05htn0B4rwQT8Sj/6w6G76JfREPXvzHGcq/AAMAq1GE9ggQGt8AAAAASUVORK5CYII=";t.default={setup:n}},function(e,t,r){"use strict";function n(e,t){var r="//www.google-analytics.com/cx/api.js?experiment="+e;if(document.querySelector('[src="'+r+'"]'))t();else{var n=document.querySelector("head"),o=document.createElement("script"),i=!1,s=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,t(),o.onload=void 0,o.onreadystatechange=void 0)};o.onload=s,o.onreadystatechange=s,o.src=r,n.appendChild(o)}}function o(e){n(e,function(){try{if(!s.default.supportCookies())return;if(!s.default.getPreviewToken()){var t=(s.default.getExperimentToken()||"").split(" "),r=window.cxApi.chooseVariation();if(r===window.cxApi.NOT_PARTICIPATING)return void s.default.removeExperimentToken();t[0]===e&&t[1]===r.toString()||(s.default.setExperimentToken(e,r),window.location.reload())}}catch(e){}})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={start:o}},function(e,t,r){"use strict";function n(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.opacity=1,d=e.getAttribute("style"),f=document.body.style,l=document.documentElement.style}function o(){var e=document.location.hostname.split("."),t=document.location.pathname.split("/"),r=void 0,n=void 0,o=void 0;e.forEach(function(i,s){r=e.slice(s).join("."),t.forEach(function(e,i){o=t.length-1,n=t.slice(i,o).join("/"),c.default.removeItem(c.default.PREVIEW_COOKIE_KEY,n+"/",r),c.default.removeItem(c.default.PREVIEW_COOKIE_KEY,n+"/","."+r)})})}function i(e,t){"detail"===t?(e.style.top=0,e.style.left=0,e.style.right=0,e.style.bottom=0,e.style.width="100%",e.style.height="100%",document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(e.setAttribute("style",d),document.body.style=f,document.documentElement.style=l)}function s(e){e?document.location=e:document.location.reload()}function a(){try{var e=c.default.getPreviewToken();if(!e)return;var t=document.querySelector("#io-prismic-toolbar");t&&t.remove();var r=function(){var t=document.createElement("iframe");return t.setAttribute("id","io-prismic-toolbar"),t.setAttribute("src",e),t.style.position="fixed",t.style.bottom="10px",t.style.right="20px",t.style.height="50px",t.style.width="100%",t.style.border="none",t.style["z-index"]=2147483e3,t.style.opacity=0,document.body.appendChild(t),t}();window.addEventListener("message",function(e){var t=e.data;switch(t.type){case"io.prismic.init":console.log("init",t.data);case"io.prismic.display":n(r,t.data);break;case"io.prismic.closeSession":o();break;case"io.prismic.reload":s(t.data);break;case"io.prismic.toggle":i(r,t.data)}})}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=void 0,f=void 0,l=void 0;t.default={setup:a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debounce:function(e,t,r){var n=this,o=void 0;return function(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];var u=n,c=function(){o=null,r||e.apply(u,s)},d=r&&!o;clearTimeout(o),o=setTimeout(c,t),d&&e.apply(u,s)}}}},function(e,t,r){"use strict";var n=r(2),o=function(e){return e&&e.__esModule?e:{default:e}}(n);document.addEventListener("DOMContentLoaded",function(){window.prismic&&window.prismic.endpoint&&o.default.setup(window.prismic.endpoint)}),t.setup=o.default.setup,t.startExperiment=o.default.startExperiment},function(e,t,r){r(1),e.exports=r(7)}])});
//# sourceMappingURL=./dist/prismic-toolbar.min.js.map