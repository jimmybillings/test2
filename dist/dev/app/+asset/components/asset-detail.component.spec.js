"use strict";
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var Observable_1 = require("rxjs/Observable");
var asset_detail_component_1 = require("./asset-detail.component");
var mock_app_store_1 = require("../../store/spec-helpers/mock-app.store");
var enhanced_asset_1 = require("../../shared/interfaces/enhanced-asset");
var mock_asset_1 = require("../../shared/mocks/mock-asset");
var index_1 = require("../../shared/modules/wazee-frame-formatter/index");
function main() {
    describe('Asset Detail Component', function () {
        var componentUnderTest;
        var mockStore;
        var asset;
        var collection;
        var transcodeTargets;
        var detailTypeMap;
        var finalAsset;
        beforeEach(function () {
            collection = {
                assets: {
                    items: [
                        { assetId: 1, uuid: 'ABCD', timeStart: 123, timeEnd: 1000 },
                        { assetId: 1, uuid: 'EFGH', timeStart: 456, timeEnd: 1000 },
                        { assetId: 1, uuid: 'IJKL', timeStart: 789, timeEnd: 1000 },
                        { assetId: 1, uuid: 'MNOP', timeStart: 102, timeEnd: 1000 },
                        { assetId: 1, uuid: 'QRST', timeStart: 103, timeEnd: 1000 }
                    ]
                }
            };
            transcodeTargets = ['master_copy', '1080i', '1080p'];
            detailTypeMap = {
                common: ['field'], filter: true, id: 13, name: 'Core Packages', primary: [], secondary: [], siteName: 'core'
            };
            finalAsset = {
                assetId: 1, clipData: [], clipThumbnailUrl: 'clipUrl.jpg', clipUrl: 'clipUrl',
                transcodeTargets: ['master_copy', '1080i', '1080p']
            };
            asset = { assetId: 1, timeStart: 102, timeEnd: 1000, clipData: [], clipThumbnailUrl: 'clipUrl.jpg', clipUrl: 'clipUrl' };
            asset.detailTypeMap = detailTypeMap;
            asset.transcodeTargets = transcodeTargets;
            mockStore = new mock_app_store_1.MockAppStore();
            mockStore.createStateSection('uiConfig', {
                components: {
                    global: { config: { pageSize: { value: '50' } } },
                    assetSharing: { config: { form: { items: [] } } }
                }
            });
            mockStore.createStateSection('asset', { activeAsset: { assetId: 1234, price: 99 } });
            componentUnderTest = new asset_detail_component_1.AssetDetailComponent(mockStore);
            componentUnderTest.asset = {
                assetId: 1, clipData: [], clipThumbnailUrl: 'clipUrl.jpg', clipUrl: 'clipUrl', transcodeTargets: transcodeTargets
            };
            componentUnderTest.window = window;
            componentUnderTest.subclipMarkers = undefined;
            componentUnderTest.userCan = { administerQuotes: function () { return false; }, editCollections: function () { return true; } };
        });
        describe('asset setter', function () {
            it('sets the component\'s asset property', function () {
                componentUnderTest.asset = asset;
                expect(componentUnderTest.asset).toEqual(asset);
            });
            it('initializes the selectedTarget property to the first target in the array', function () {
                componentUnderTest.asset = asset;
                expect(componentUnderTest.selectedTarget).toEqual('master_copy');
            });
        });
        describe('addAssetToActiveCollection()', function () {
            it('dispatches the expected action', function () {
                var spy = mockStore.createActionFactoryMethod('activeCollection', 'addAsset');
                componentUnderTest.addAssetToActiveCollection();
                mockStore.expectDispatchFor(spy, componentUnderTest.asset, null);
            });
            it('with subclipping defined dispatches the expected action', function () {
                componentUnderTest.subclipMarkers = { in: {}, out: {} };
                var spy = mockStore.createActionFactoryMethod('activeCollection', 'addAsset');
                componentUnderTest.addAssetToActiveCollection();
                mockStore.expectDispatchFor(spy, componentUnderTest.asset, { in: {}, out: {} });
            });
        });
        describe('removeAssetFromActiveCollection()', function () {
            it('dispatches the confirmation prompt', function () {
                var spy = mockStore.createActionFactoryMethod('dialog', 'showConfirmation');
                componentUnderTest.removeAssetFromActiveCollection();
                mockStore.expectDispatchFor(spy, {
                    title: 'COLLECTION.REMOVE_ASSET.TITLE',
                    message: 'COLLECTION.REMOVE_ASSET.MESSAGE',
                    accept: 'COLLECTION.REMOVE_ASSET.ACCEPT',
                    decline: 'COLLECTION.REMOVE_ASSET.DECLINE'
                }, jasmine.any(Function));
            });
            it('dispatches the correct action via the onAccept callback', function () {
                var dialogSpy = mockStore.createActionFactoryMethod('dialog', 'showConfirmation');
                var removeSpy = mockStore.createActionFactoryMethod('activeCollection', 'removeAsset');
                dialogSpy.and.callFake(function (_, onAcceptCallback) {
                    dialogSpy.onAcceptCallback = onAcceptCallback;
                });
                componentUnderTest.removeAssetFromActiveCollection();
                dialogSpy.onAcceptCallback();
                mockStore.expectDispatchFor(removeSpy, componentUnderTest.asset);
            });
        });
        describe('updateAssetInActiveCollection()', function () {
            it('dispatches the expected action', function () {
                var startFrame = new index_1.Frame(25).setFromFrameNumber(1);
                var endFrame = new index_1.Frame(25).setFromFrameNumber(2);
                componentUnderTest.subclipMarkers = { in: startFrame, out: endFrame };
                var spy = mockStore.createActionFactoryMethod('activeCollection', 'updateAssetMarkers');
                componentUnderTest.updateAssetInActiveCollection();
                mockStore.expectDispatchFor(spy, componentUnderTest.asset, componentUnderTest.subclipMarkers);
            });
        });
        describe('addAssetToCart()', function () {
            it('Should emit an event to add an asset to the cart/quote without subclipping', function () {
                componentUnderTest.asset = { assetId: 1234, transcodeTargets: transcodeTargets };
                spyOn(componentUnderTest.addToCart, 'emit');
                componentUnderTest.addAssetToCart();
                expect(componentUnderTest.addToCart.emit)
                    .toHaveBeenCalledWith({ assetId: 1234, markers: null, selectedTranscodeTarget: 'master_copy' });
            });
            it('Should emit an event to add an asset to the cart/quote with subclipping', function () {
                componentUnderTest.asset = { assetId: 1234, transcodeTargets: transcodeTargets };
                componentUnderTest.subclipMarkers = { in: {}, out: {} };
                spyOn(componentUnderTest.addToCart, 'emit');
                componentUnderTest.addAssetToCart();
                expect(componentUnderTest.addToCart.emit)
                    .toHaveBeenCalledWith({
                    assetId: 1234, markers: { in: {}, out: {} }, selectedTranscodeTarget: 'master_copy'
                });
            });
        });
        describe('previousPage()', function () {
            it('Should emit an event to go back to the previous page', function () {
                spyOn(componentUnderTest.onPreviousPage, 'emit');
                componentUnderTest.previousPage();
                expect(componentUnderTest.onPreviousPage.emit)
                    .toHaveBeenCalled();
            });
        });
        describe('hasPageHistory', function () {
            it('Should return false if the browser has not yet loaded previous page history', function () {
                expect(componentUnderTest.hasPageHistory).toBe(false);
            });
            it('Should return true if the browser has loaded previous page history', function () {
                componentUnderTest.window.history.pushState({ data: 'somedata1' }, 'test1');
                componentUnderTest.window.history.pushState({ data: 'somedata2' }, 'test2');
                componentUnderTest.window.history.pushState({ data: 'somedata3' }, 'test3');
                expect(componentUnderTest.hasPageHistory).toBe(true);
            });
        });
        describe('canComment getter', function () {
            it('returns false when the asset is a search', function () {
                componentUnderTest.asset = { type: 'search' };
                expect(componentUnderTest.canComment).toBe(false);
            });
            it('returns true when comment form config does exist', function () {
                ['cart', 'quoteEdit', 'quoteShow', 'collection', 'order'].forEach(function (type) {
                    componentUnderTest.asset = { type: type };
                    expect(componentUnderTest.canComment).toBe(true);
                });
            });
        });
        describe('canShare getter', function () {
            var tests = [
                { assetType: 'cart', userCanShare: true, expectedResult: false },
                { assetType: 'collection', userCanShare: true, expectedResult: false },
                { assetType: 'order', userCanShare: true, expectedResult: false },
                { assetType: 'quoteEdit', userCanShare: true, expectedResult: false },
                { assetType: 'quoteShow', userCanShare: true, expectedResult: false },
                { assetType: 'search', userCanShare: true, expectedResult: true }
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "'", function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset({}, test.assetType);
                    componentUnderTest.userCan = { createAccessInfo: function () { return test.userCanShare; } };
                    expect(componentUnderTest.canShare).toBe(test.expectedResult);
                });
            });
        });
        describe('showAdvancedPlayer getter', function () {
            it('returns true if the user can view the advanced player', function () {
                componentUnderTest.userCan = { viewAdvancedPlayer: function () { return true; } };
                expect(componentUnderTest.showAdvancedPlayer).toBe(true);
            });
            it('returns false if the user cannot view the advanced player', function () {
                componentUnderTest.userCan = { viewAdvancedPlayer: function () { return false; } };
                expect(componentUnderTest.showAdvancedPlayer).toBe(false);
            });
        });
        describe('shareButtonLabelKey getter', function () {
            var tests = [
                { markers: undefined, expectedKey: 'ASSET.DETAIL.SHARING_BTN_TITLE' },
                { markers: null, expectedKey: 'ASSET.DETAIL.SHARING_BTN_TITLE' },
                { markers: { in: 'x' }, expectedKey: 'ASSET.DETAIL.SHARING_BTN_TITLE' },
                { markers: { in: 'x', out: null }, expectedKey: 'ASSET.DETAIL.SHARING_BTN_TITLE' },
                { markers: { out: 'y' }, expectedKey: 'ASSET.DETAIL.SHARING_BTN_TITLE' },
                { markers: { in: null, out: 'y' }, expectedKey: 'ASSET.DETAIL.SHARING_BTN_TITLE' },
                { markers: { in: 'x', out: 'y' }, expectedKey: 'ASSET.DETAIL.SHARING_SUBCLIP_BTN_TITLE' }
            ];
            tests.forEach(function (test) {
                it("returns '" + test.expectedKey + "' for markers = " + test.markers, function () {
                    componentUnderTest.subclipMarkers = test.markers;
                    expect(componentUnderTest.shareButtonLabelKey).toEqual(test.expectedKey);
                });
            });
        });
        describe('rights getter', function () {
            it('returns the value of Rights.Reproduction metadata in the asset', function () {
                componentUnderTest.asset =
                    enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'some value' }] }, 'search');
                expect(componentUnderTest.rights).toEqual('some value');
            });
        });
        describe('canShowPrice()', function () {
            it('Returns true if its a rights managed asset with a valid price', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ price: 100, primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                componentUnderTest.usagePrice = 100;
                expect(componentUnderTest.canShowPrice).toBe(true);
            });
            it('Returns true if its a royalty free asset with a valid price', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ price: 100, primary: [{ name: 'Rights.Reproduction', value: 'Royalty Free' }] }, 'search');
                expect(componentUnderTest.canShowPrice).toBe(true);
            });
            it('Returns false if its a rights managed asset with no price', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                componentUnderTest.usagePrice = undefined;
                expect(componentUnderTest.canShowPrice).toBe(false);
            });
            it('Returns false if its a royalty free asset with no price', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Royalty Free' }] }, 'search');
                expect(componentUnderTest.canShowPrice).toBe(false);
            });
        });
        describe('canShowNoPricingAvailableNotice()', function () {
            it('Returns true if its a rights managed asset with no price property', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                expect(componentUnderTest.canShowNoPricingAvailableNotice).toBe(true);
            });
            it('Returns false if its a rights managed asset with a price property', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ price: 100, primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                expect(componentUnderTest.canShowNoPricingAvailableNotice).toBe(false);
            });
            it('Returns true if its a Royalty Free asset with no price property', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Royalty Free' }] }, 'search');
                expect(componentUnderTest.canShowNoPricingAvailableNotice).toBe(true);
            });
            it('Returns false if its a Royalty Free asset with no price property', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ price: 100, primary: [{ name: 'Rights.Reproduction', value: 'Royalty Free' }] }, 'search');
                expect(componentUnderTest.canShowNoPricingAvailableNotice).toBe(false);
            });
        });
        describe('price getters', function () {
            var tests = [
                { rights: 'Royalty Free', price: 12.34, usagePrice: null, expectedResult: 12.34 },
                { rights: 'Royalty Free', price: null, usagePrice: null, expectedResult: null },
                { rights: 'Royalty Free', price: 0, usagePrice: null, expectedResult: null },
                { rights: 'Royalty Free', price: 12.34, usagePrice: 56.78, expectedResult: 12.34 },
                { rights: 'Royalty Free', price: null, usagePrice: 56.78, expectedResult: null },
                { rights: 'Royalty Free', price: 0, usagePrice: 56.78, expectedResult: null },
                { rights: 'Rights Managed', price: 12.34, usagePrice: null, expectedResult: null, hasAttributes: true },
                { rights: 'Rights Managed', price: null, usagePrice: null, expectedResult: null },
                { rights: 'Rights Managed', price: 0, usagePrice: null, expectedResult: null },
                { rights: 'Rights Managed', price: 12.34, usagePrice: 56.78, expectedResult: 56.78 },
                { rights: 'Rights Managed', price: null, usagePrice: 56.78, expectedResult: 56.78 },
                { rights: 'Rights Managed', price: 0, usagePrice: 56.78, expectedResult: 56.78 },
                { rights: null, price: 12.34, usagePrice: null, expectedResult: null },
                { rights: null, price: null, usagePrice: null, expectedResult: null },
                { rights: null, price: 0, usagePrice: null, expectedResult: null },
                { rights: null, price: 12.34, usagePrice: 56.78, expectedResult: null },
                { rights: null, price: null, usagePrice: 56.78, expectedResult: null },
                { rights: null, price: 0, usagePrice: 56.78, expectedResult: null }
            ];
            tests.forEach(function (test) {
                var rights = "" + (test.rights ? test.rights : 'no rights');
                describe("for a " + rights + " asset", function () {
                    var price = (test.hasOwnProperty('price') && test.price > 0) ? "price = " + test.price : 'no price';
                    var usagePrice = test.usagePrice ? "usage price = " + test.usagePrice : 'no usage price';
                    it("returns " + test.expectedResult + " for " + price + " and " + usagePrice, function () {
                        componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ price: test.price, primary: [{ name: 'Rights.Reproduction', value: test.rights }] }, 'search');
                        componentUnderTest.usagePrice = test.usagePrice;
                        expect(componentUnderTest.price).toBe(test.expectedResult);
                    });
                });
            });
        });
        describe('canPerformCartActions getter', function () {
            var tests = [
                { haveCart: true, rights: 'Royalty Free', price: 12.34, expectedResult: true },
                { haveCart: true, rights: 'Royalty Free', price: 0, expectedResult: true },
                { haveCart: true, rights: 'Royalty Free', price: 'NotAProperty', expectedResult: false },
                { haveCart: true, rights: 'Rights Managed', price: 12.34, expectedResult: true },
                { haveCart: true, rights: 'Rights Managed', price: 0, expectedResult: true },
                { haveCart: true, rights: 'Rights Managed', price: 'NotAProperty', expectedResult: false },
                { haveCart: true, rights: null, price: 12.34, expectedResult: false },
                { haveCart: true, rights: null, price: 0, expectedResult: false },
                { haveCart: true, rights: null, price: null, expectedResult: false },
                { haveCart: false, rights: 'Royalty Free', price: 12.34, expectedResult: false },
                { haveCart: false, rights: 'Royalty Free', price: 0, expectedResult: false },
                { haveCart: false, rights: 'Royalty Free', price: null, expectedResult: false },
                { haveCart: false, rights: 'Rights Managed', price: 12.34, expectedResult: false },
                { haveCart: false, rights: 'Rights Managed', price: 0, expectedResult: false },
                { haveCart: false, rights: 'Rights Managed', price: null, expectedResult: false },
                { haveCart: false, rights: null, price: 12.34, expectedResult: false },
                { haveCart: false, rights: null, price: 0, expectedResult: false },
                { haveCart: false, rights: null, price: null, expectedResult: false },
            ];
            tests.forEach(function (test) {
                var withWithout = test.haveCart ? 'with' : 'without';
                var rights = test.rights ? test.rights : 'no rights';
                var price = (test.price === 0 || !!test.price) ? "price = " + test.price : 'no price';
                price = (test.price !== 'NotAProperty') ? price : 'No price property';
                it("returns " + test.expectedResult + " " + withWithout + " haveCart capability and a " + rights + " asset with " + price, function () {
                    componentUnderTest.userCan = { haveCart: function () { return test.haveCart; } };
                    if (test.price === 'NotAProperty') {
                        componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: test.rights }] }, 'search');
                    }
                    else {
                        componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ price: test.price, primary: [{ name: 'Rights.Reproduction', value: test.rights }] }, 'search');
                    }
                    expect(componentUnderTest.canPerformCartActions).toBe(test.expectedResult);
                });
            });
        });
        describe('canSelectTranscodeTarget getter', function () {
            beforeEach(function () {
                componentUnderTest.userCan = { addToCart: function () { return true; } };
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ transcodeTargets: { some: 'targets' }, primary: [{ name: 'Rights.Reproduction', value: 'Royalty Free' }] }, 'search');
            });
            it('returns true for a royalty free asset with transcode targets and addToCart capability', function () {
                expect(componentUnderTest.canSelectTranscodeTarget).toBe(true);
            });
            it('returns false for a non-royalty free asset', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ transcodeTargets: { some: 'targets' }, primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                expect(componentUnderTest.canSelectTranscodeTarget).toBe(false);
            });
            it('returns false for an asset without transcode targets', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                expect(componentUnderTest.canSelectTranscodeTarget).toBe(false);
            });
            it('returns false without addToCart capability', function () {
                componentUnderTest.userCan = { addToCart: function () { return false; } };
                expect(componentUnderTest.canSelectTranscodeTarget).toBe(false);
            });
        });
        describe('canCalculatePrice getter', function () {
            beforeEach(function () {
                componentUnderTest.userCan = { calculatePrice: function () { return true; } };
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
            });
            it('returns true for a rights managed asset and calculatePrice capability', function () {
                expect(componentUnderTest.canEditOrApplyRights).toBe(true);
            });
            it('returns false for a non-rights managed asset', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Royalty Free' }] }, 'search');
                expect(componentUnderTest.canEditOrApplyRights).toBe(false);
            });
            it('returns false without calculatePrice capability', function () {
                componentUnderTest.userCan = { calculatePrice: function () { return false; } };
                expect(componentUnderTest.canSelectTranscodeTarget).toBe(false);
            });
        });
        describe('canUpdateCart getter', function () {
            var tests = [
                { assetType: 'cart', expectedResult: true },
                { assetType: 'collection', expectedResult: false },
                { assetType: 'order', expectedResult: false },
                { assetType: 'quoteEdit', expectedResult: true },
                { assetType: 'quoteShow', expectedResult: false },
                { assetType: 'search', expectedResult: false },
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "'", function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset({}, test.assetType);
                    expect(componentUnderTest.canUpdateCartAsset).toBe(test.expectedResult);
                });
            });
        });
        describe('canUpdateCollectionAsset getter', function () {
            var tests = [
                { assetType: 'cart', expectedResult: false },
                { assetType: 'collection', expectedResult: true },
                { assetType: 'order', expectedResult: false },
                { assetType: 'quoteEdit', expectedResult: false },
                { assetType: 'quoteShow', expectedResult: false },
                { assetType: 'search', expectedResult: false },
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "'", function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset({}, test.assetType);
                    expect(componentUnderTest.canUpdateCollectionAsset).toBe(test.expectedResult);
                });
            });
        });
        describe('canEditCollectionSubclipMarkers getter', function () {
            var tests = [
                { markers: true, assetType: 'cart', expectedResult: false },
                { markers: true, assetType: 'collection', expectedResult: true },
                { markers: false, assetType: 'collection', expectedResult: false },
                { markers: true, assetType: 'order', expectedResult: false },
                { markers: true, assetType: 'quoteEdit', expectedResult: false },
                { markers: true, assetType: 'quoteShow', expectedResult: false },
                { markers: true, assetType: 'search', expectedResult: false },
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "'" +
                    (" and subclip markers are " + (test.markers ? '' : 'not ') + "defined "), function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset({}, test.assetType);
                    if (test.markers)
                        componentUnderTest.subclipMarkers = { in: { some: 'frame' }, out: { some: 'frame' } };
                    expect(componentUnderTest.canEditCollectionSubclipMarkers).toBe(test.expectedResult);
                });
            });
        });
        describe('collectionSubclipButtonHoverTxt getter', function () {
            var tests = [
                { active: true, isSubclipped: true, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.SUBCLIP.ACTIVE' },
                { active: true, isSubclipped: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD_NEW.SUBCLIP.ACTIVE' },
                { active: false, isSubclipped: true, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.SUBCLIP.DISABLED' },
                { active: false, isSubclipped: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD_NEW.SUBCLIP.DISABLED' }
            ];
            tests.forEach(function (test) {
                var description = "returns " + test.expectedKey +
                    (" for a collection asset with existing subclipping " + (test.isSubclipped ? '' : 'not ') + "defined") +
                    (" and update button is " + (test.active ? 'active' : 'disabled'));
                it(description, function () {
                    componentUnderTest.activeCollection = collection;
                    componentUnderTest.subclipMarkers = test.active ? {
                        in: new index_1.Frame(25).setFromFrameNumber(1),
                        out: test.active ? new index_1.Frame(25).setFromFrameNumber(2) : new index_1.Frame(25).setFromFrameNumber(3)
                    } : null;
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(__assign({}, asset, { uuid: test.active ? 'MNOP' : 'NOPE', timeStart: test.isSubclipped ? 103 : null, timeEnd: test.isSubclipped ? 1000 : null }), 'collection');
                    componentUnderTest.showAssetSaveSubclip = test.active;
                    expect(componentUnderTest.collectionSubclipButtonHoverTxt).toBe(test.expectedKey);
                });
            });
        });
        describe('collectionSubclipButtonLabel getter', function () {
            var tests = [
                { isSubclipped: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD_NEW.SUBCLIP.COLLECTION' },
                { isSubclipped: true, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.SUBCLIP.COLLECTION' }
            ];
            tests.forEach(function (test) {
                var description = "returns " + test.expectedKey +
                    (" for a collection asset with subclipping " + (test.isSubclipped ? '' : 'not ') + "defined");
                it(description, function () {
                    if (test.isSubclipped)
                        componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ timeStart: 103, timeEnd: 1000 }, 'collection');
                    expect(componentUnderTest.collectionSubclipButtonLabel).toBe(test.expectedKey);
                });
            });
        });
        describe('updateCartButtonLabelKey getter', function () {
            var tests = [
                { quoteUser: false, markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.ASSET.CART' },
                { quoteUser: false, markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.SUBCLIP.CART' },
                { quoteUser: false, markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.ASSET.CART' },
                { quoteUser: false, markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.SUBCLIP.CART' },
                { quoteUser: true, markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.ASSET.QUOTE' },
                { quoteUser: true, markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.SUBCLIP.QUOTE' },
                { quoteUser: true, markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.ASSET.QUOTE' },
                { quoteUser: true, markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.UPDATE.SUBCLIP.QUOTE' }
            ];
            tests.forEach(function (test) {
                var description = "returns " + test.expectedKey +
                    (" for a user " + (test.quoteUser ? 'with' : 'without') + " quote administrator capabililty and") +
                    (" an asset with markers " + (test.markers ? '' : 'not ') + "defined");
                it(description, function () {
                    componentUnderTest.userCan = { administerQuotes: function () { return test.quoteUser; } };
                    if (test.markers)
                        componentUnderTest.subclipMarkers = { in: { some: 'frame' }, out: { some: 'frame' } };
                    expect(componentUnderTest.updateCartAssetButtonLabelKey).toBe(test.expectedKey);
                });
            });
        });
        describe('updateCart()', function () {
            it('is not yet implemented', function () {
                expect(true).toBe(true);
            });
        });
        describe('canAddToCart getter', function () {
            it('returns false without addToCart capability', function () {
                componentUnderTest.userCan = { addToCart: function () { return false; } };
                expect(componentUnderTest.canAddToCart).toBe(false);
            });
            it('returns false for an asset without Rights.Reproduction', function () {
                componentUnderTest.userCan = { addToCart: function () { return true; } };
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'some-name', value: 'some value' }] }, 'search');
                expect(componentUnderTest.canAddToCart).toBe(false);
            });
            it('returns false for an asset with a non-acceptable Rights.Reproduction value', function () {
                componentUnderTest.userCan = { addToCart: function () { return true; } };
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'some value' }] }, 'search');
                expect(componentUnderTest.canAddToCart).toBe(false);
            });
            it('returns true for an asset with a Rights.Reproduction field of "Royalty Free" that has a price', function () {
                componentUnderTest.userCan = { addToCart: function () { return true; } };
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ assetId: 1234, primary: [{ name: 'Rights.Reproduction', value: 'Royalty Free' }] }, 'search');
                expect(componentUnderTest.canAddToCart).toBe(true);
            });
            it('returns true for an asset with a Rights.Reproduction field of "Rights Managed" that has a price', function () {
                componentUnderTest.userCan = { addToCart: function () { return true; } };
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ assetId: 1234, primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                expect(componentUnderTest.canAddToCart).toBe(true);
            });
            it('returns false for an asset with a Rights.Reproduction field of "Rights Managed" that does not have a price', function () {
                mockStore.createStateSection('asset', { activeAsset: { assetId: 1235 } });
                componentUnderTest.userCan = { addToCart: function () { return true; } };
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ assetId: 1235, primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                expect(componentUnderTest.canAddToCart).toBe(false);
            });
        });
        describe('addToCartOrQuoteButtonLabelKey getter', function () {
            var tests = [
                { quoteUser: false, type: 'search', markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.ASSET.CART' },
                { quoteUser: false, type: 'search', markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.SUBCLIP.CART' },
                { quoteUser: false, type: 'cart', markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD_NEW.ASSET.CART' },
                { quoteUser: false, type: 'cart', markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.ADD_NEW.SUBCLIP.CART' },
                { quoteUser: false, type: 'quoteEdit', markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.ASSET.CART' },
                { quoteUser: false, type: 'quoteEdit', markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.SUBCLIP.CART' },
                { quoteUser: true, type: 'search', markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.ASSET.QUOTE' },
                { quoteUser: true, type: 'search', markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.SUBCLIP.QUOTE' },
                { quoteUser: true, type: 'cart', markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.ASSET.QUOTE' },
                { quoteUser: true, type: 'cart', markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.ADD.SUBCLIP.QUOTE' },
                { quoteUser: true, type: 'quoteEdit', markers: false, expectedKey: 'ASSET.DETAIL.BUTTON.ADD_NEW.ASSET.QUOTE' },
                { quoteUser: true, type: 'quoteEdit', markers: true, expectedKey: 'ASSET.DETAIL.BUTTON.ADD_NEW.SUBCLIP.QUOTE' }
            ];
            tests.forEach(function (test) {
                var description = "returns " + test.expectedKey +
                    (" for a user " + (test.quoteUser ? 'with' : 'without') + " quote administrator capabililty and") +
                    (" an asset with type '" + test.type + "' and markers " + (test.markers ? '' : 'not ') + "defined");
                it(description, function () {
                    componentUnderTest.userCan = { administerQuotes: function () { return test.quoteUser; } };
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset({}, test.type);
                    if (test.markers)
                        componentUnderTest.subclipMarkers = { in: { some: 'frame' }, out: { some: 'frame' } };
                    expect(componentUnderTest.addToCartOrQuoteButtonLabelKey).toBe(test.expectedKey);
                });
            });
        });
        describe('canGoToSearchDetails getter', function () {
            var tests = [
                { assetType: 'cart', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'cart', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'collection', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'collection', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'order', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'order', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'quoteEdit', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'quoteEdit', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'quoteShow', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'quoteShow', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'search', expectedResult: false },
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "' and access path '" + test.accessPath + "'", function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ accessPath: test.accessPath }, test.assetType);
                    expect(componentUnderTest.canGoToSearchAssetDetails).toBe(test.expectedResult);
                });
            });
        });
        describe('goToSearchDetails', function () {
            it('dispatches the expected action when subclipMarkers are not set', function () {
                var spy = mockStore.createActionFactoryMethod('router', 'goToSearchAssetDetails');
                componentUnderTest.goToSearchAssetDetails();
                mockStore.expectDispatchFor(spy, componentUnderTest.asset.assetId, undefined);
            });
            it('dispatches the expected action when subclipMarkers are set', function () {
                var spy = mockStore.createActionFactoryMethod('router', 'goToSearchAssetDetails');
                componentUnderTest.onPlayerMarkerChange({ in: { some: 'inFrame' }, out: { some: 'outFrame' } });
                componentUnderTest.goToSearchAssetDetails();
                mockStore.expectDispatchFor(spy, componentUnderTest.asset.assetId, { in: { some: 'inFrame' }, out: { some: 'outFrame' } });
            });
        });
        describe('canAddToActiveCollection getter', function () {
            var tests = [
                { assetType: 'cart', assetIdInCollection: true, expectedResult: false },
                { assetType: 'collection', assetIdInCollection: true, expectedResult: false },
                { assetType: 'order', assetIdInCollection: true, expectedResult: false },
                { assetType: 'quoteEdit', assetIdInCollection: true, expectedResult: false },
                { assetType: 'quoteShow', assetIdInCollection: true, expectedResult: false },
                { assetType: 'search', assetIdInCollection: true, expectedResult: false },
                { assetType: 'cart', assetIdInCollection: false, expectedResult: false },
                { assetType: 'collection', assetIdInCollection: false, expectedResult: true },
                { assetType: 'order', assetIdInCollection: false, expectedResult: false },
                { assetType: 'quoteEdit', assetIdInCollection: false, expectedResult: false },
                { assetType: 'quoteShow', assetIdInCollection: false, expectedResult: false },
                { assetType: 'search', assetIdInCollection: false, expectedResult: true }
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "' if the assetId \n        is " + (test.assetIdInCollection ? 'included' : 'not') + " in the collection", function () {
                    componentUnderTest.activeCollection = collection;
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(__assign({}, asset, { assetId: test.assetIdInCollection ? 1 : 9999 }), test.assetType);
                    expect(componentUnderTest.canAddToActiveCollection).toBe(test.expectedResult);
                });
            });
        });
        describe('canAddAgainToActiveCollection getter', function () {
            var tests = [
                { assetType: 'cart', matchingSubclipMarkers: false, expectedResult: false },
                { assetType: 'collection', matchingSubclipMarkers: false, expectedResult: true },
                { assetType: 'order', matchingSubclipMarkers: false, expectedResult: false },
                { assetType: 'quoteEdit', matchingSubclipMarkers: false, expectedResult: false },
                { assetType: 'quoteShow', matchingSubclipMarkers: false, expectedResult: false },
                { assetType: 'search', matchingSubclipMarkers: false, expectedResult: true },
                { assetType: 'cart', matchingSubclipMarkers: true, expectedResult: false },
                { assetType: 'collection', matchingSubclipMarkers: true, expectedResult: true },
                { assetType: 'order', matchingSubclipMarkers: true, expectedResult: false },
                { assetType: 'quoteEdit', matchingSubclipMarkers: true, expectedResult: false },
                { assetType: 'quoteShow', matchingSubclipMarkers: true, expectedResult: false },
                { assetType: 'search', matchingSubclipMarkers: true, expectedResult: true }
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "' when the collection has a version of that \n        asset " + (test.matchingSubclipMarkers ? 'with' : 'without') + " matching subclip markers", function () {
                    componentUnderTest.activeCollection = collection;
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(__assign({}, asset, { timeStart: 123, timeEnd: test.matchingSubclipMarkers ? 1000 : 9999 }), test.assetType);
                    expect(componentUnderTest.canAddAgainToActiveCollection).toBe(test.expectedResult);
                });
            });
            it('returns false when the collection does not have a version of that asset', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset(__assign({}, asset, { assetId: 9999 }), 'collection');
                expect(componentUnderTest.canAddAgainToActiveCollection).toBe(false);
            });
            it('returns true if the collection does not have that asset but the type is collection & subclip markers were set', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset(__assign({}, asset, { assetId: 9999 }), 'collection');
                var startFrame = new index_1.Frame(25).setFromFrameNumber(1);
                var endFrame = new index_1.Frame(25).setFromFrameNumber(2);
                componentUnderTest.onPlayerMarkerChange({ in: startFrame, out: endFrame });
                expect(componentUnderTest.canAddAgainToActiveCollection).toBe(true);
            });
        });
        describe('canRemoveFromActiveCollection getter', function () {
            var tests = [
                { assetType: 'cart', matchingUuid: true, expectedResult: false },
                { assetType: 'collection', matchingUuid: true, expectedResult: true },
                { assetType: 'order', matchingUuid: true, expectedResult: false },
                { assetType: 'quoteEdit', matchingUuid: true, expectedResult: false },
                { assetType: 'quoteShow', matchingUuid: true, expectedResult: false },
                { assetType: 'search', matchingUuid: true, expectedResult: false },
                { assetType: 'cart', matchingUuid: false, expectedResult: false },
                { assetType: 'collection', matchingUuid: false, expectedResult: false },
                { assetType: 'order', matchingUuid: false, expectedResult: false },
                { assetType: 'quoteEdit', matchingUuid: false, expectedResult: false },
                { assetType: 'quoteShow', matchingUuid: false, expectedResult: false },
                { assetType: 'search', matchingUuid: false, expectedResult: false }
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "' when the collection has a version of that \n        asset " + (test.matchingUuid ? 'with' : 'without') + " matching UUID", function () {
                    componentUnderTest.activeCollection = collection;
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(__assign({}, asset, { uuid: test.matchingUuid ? 'ABCD' : 'NOPE' }), test.assetType);
                    expect(componentUnderTest.canRemoveFromActiveCollection).toBe(test.expectedResult);
                });
            });
        });
        describe('userCanEditCollection getter', function () {
            beforeEach(function () {
                componentUnderTest = new asset_detail_component_1.AssetDetailComponent(mockStore);
            });
            it('returns an observable of false when the capability returns false', function () {
                componentUnderTest.userCan = { editCollection: function () { return Observable_1.Observable.of(false); } };
                var canEdit;
                componentUnderTest.userCanEditCollection.subscribe(function (can) { return canEdit = can; });
                expect(canEdit).toBe(false);
            });
            it('returns an observable of true when the capability returns true', function () {
                componentUnderTest.userCan = { editCollection: function () { return Observable_1.Observable.of(true); } };
                var canEdit;
                componentUnderTest.userCanEditCollection.subscribe(function (can) { return canEdit = can; });
                expect(canEdit).toBe(true);
            });
        });
        describe('canUpdateInActiveCollection getter', function () {
            var tests = [
                { assetType: 'cart', matchingUuid: true, subclipsSet: true, subclipsExact: false, expectedResult: false },
                { assetType: 'order', matchingUuid: true, subclipsSet: false, subclipsExact: false, expectedResult: false },
                { assetType: 'quoteEdit', matchingUuid: false, subclipsSet: true, subclipsExact: false, expectedResult: false },
                { assetType: 'search', matchingUuid: false, subclipsSet: false, subclipsExact: false, expectedResult: false },
                { assetType: 'collection', matchingUuid: false, subclipsSet: true, subclipsExact: false, expectedResult: false },
                { assetType: 'collection', matchingUuid: true, subclipsSet: false, subclipsExact: false, expectedResult: false },
                { assetType: 'collection', matchingUuid: true, subclipsSet: true, subclipsExact: false, expectedResult: true },
                { assetType: 'collection', matchingUuid: true, subclipsSet: true, subclipsExact: true, expectedResult: false }
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "' \n        when the collection has a version of that asset " + (test.matchingUuid ? 'with' : 'without') + " matching UUID \n        and the subclip markers " + (test.subclipsSet ? 'were' : 'were not') + " changed\n        " + (test.subclipsExact && ' to match existing asset subclips'), function () {
                    collection.assets.items.push({ assetId: 1, timeStart: 40, timeEnd: 80 });
                    componentUnderTest.activeCollection = collection;
                    componentUnderTest.subclipMarkers = test.subclipsSet ? {
                        in: new index_1.Frame(25).setFromFrameNumber(1),
                        out: test.subclipsExact ? new index_1.Frame(25).setFromFrameNumber(2) : new index_1.Frame(25).setFromFrameNumber(3)
                    } : null;
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(__assign({}, asset, { uuid: test.matchingUuid ? 'MNOP' : 'NOPE' }), test.assetType);
                    componentUnderTest.showAssetSaveSubclip = test.subclipsSet;
                    expect(componentUnderTest.canUpdateInActiveCollection).toBe(test.expectedResult);
                });
            });
        });
        describe('routerLinkForAssetParent()', function () {
            describe('returns the correct routerLink', function () {
                beforeEach(function () {
                    componentUnderTest.ngOnInit();
                });
                it('for a collection asset', function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'collection', 100);
                    expect(componentUnderTest.routerLinkForAssetParent).toEqual(['/collections', 100, { i: 1, n: 50 }]);
                });
                it('for a quote edit asset', function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'quoteEdit');
                    expect(componentUnderTest.routerLinkForAssetParent).toEqual(['/active-quote']);
                });
                it('for a quote show asset', function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'quoteShow', 999);
                    expect(componentUnderTest.routerLinkForAssetParent).toEqual(['/quotes', 999]);
                });
                it('for an order asset', function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'order', 111);
                    expect(componentUnderTest.routerLinkForAssetParent).toEqual(['/orders', 111]);
                });
                it('for a cart asset', function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'cart');
                    expect(componentUnderTest.routerLinkForAssetParent).toEqual(['/cart']);
                });
                it('for a search asset', function () {
                    componentUnderTest.searchContext = { q: 'cat', i: 1, n: 100, sortId: 10 };
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'search');
                    expect(componentUnderTest.routerLinkForAssetParent).toEqual(['/search', { q: 'cat', i: 1, n: 100, sortId: 10 }]);
                });
            });
        });
        describe('breadcrumbLabel getter', function () {
            describe('returns the correct translatable string', function () {
                it('for a collection', function () {
                    componentUnderTest.activeCollection = __assign({}, collection, { name: 'some collection' });
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'collection', 100);
                    expect(componentUnderTest.breadcrumbLabel).toEqual(['some collection', '']);
                });
                it('for a quoteShow', function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'quoteShow', 111);
                    expect(componentUnderTest.breadcrumbLabel).toEqual(['asset.detail.breadcrumb_quoteShow', '111']);
                });
                it('for a order', function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, 'order', 333);
                    expect(componentUnderTest.breadcrumbLabel).toEqual(['asset.detail.breadcrumb_order', '333']);
                });
                describe('for any other type of asset - ', function () {
                    var tests = [
                        { assetType: 'search', expected: ['asset.detail.breadcrumb_search', ''] },
                        { assetType: 'quoteEdit', expected: ['asset.detail.breadcrumb_quoteEdit', ''] },
                        { assetType: 'cart', expected: ['asset.detail.breadcrumb_cart', ''] }
                    ];
                    tests.forEach(function (test) {
                        it("(" + test.assetType + ")", function () {
                            componentUnderTest.asset = enhanced_asset_1.enhanceAsset(mock_asset_1.mockAsset, test.assetType);
                            expect(componentUnderTest.breadcrumbLabel).toEqual(test.expected);
                        });
                    });
                });
            });
        });
        describe('toggleCommentsVisibility()', function () {
            it('toggles the \'showComments\' boolean', function () {
                expect(componentUnderTest.showComments).toBe(undefined);
                componentUnderTest.toggleCommentsVisibility();
                expect(componentUnderTest.showComments).toBe(true);
                componentUnderTest.toggleCommentsVisibility();
                expect(componentUnderTest.showComments).toBe(false);
            });
        });
        describe('userCanAddComments getter', function () {
            describe('when the commentParentObject\'s objectType is \'collection\'', function () {
                beforeEach(function () {
                    componentUnderTest.commentParentObject = {
                        objectId: 1,
                        objectType: 'collection'
                    };
                });
                it('returns an observable of true if the user can edit the collection', function () {
                    componentUnderTest.userCan = {
                        editCollection: jasmine.createSpy('editCollection').and.returnValue(Observable_1.Observable.of(true))
                    };
                    var result;
                    componentUnderTest.userCanAddComments.take(1).subscribe(function (res) { return result = res; });
                    expect(result).toBe(true);
                });
                it('returns an observable of false if the user can\'t edit the collection', function () {
                    componentUnderTest.userCan = {
                        editCollection: jasmine.createSpy('editCollection').and.returnValue(Observable_1.Observable.of(false))
                    };
                    var result;
                    componentUnderTest.userCanAddComments.take(1).subscribe(function (res) { return result = res; });
                    expect(result).toBe(false);
                });
            });
            describe('when the commentParentObject\'s objectType isn\'t \'collection\'', function () {
                beforeEach(function () {
                    componentUnderTest.commentParentObject = {
                        objectId: 1,
                        objectType: 'cart'
                    };
                });
                it('returns an observable of true', function () {
                    var result;
                    componentUnderTest.userCanAddComments.take(1).subscribe(function (res) { return result = res; });
                    expect(result).toBe(true);
                });
            });
        });
        describe('commentCount getter', function () {
            it('selects the right part of the store', function () {
                mockStore.createStateSection('comment', { activeObjectType: 'lineItem', lineItem: { pagination: { totalCount: 10 } } });
                var count;
                componentUnderTest.commentCount.take(1).subscribe(function (c) { return count = c; });
                expect(count).toBe(10);
            });
        });
        describe('updateCart()', function () {
            it('emits the right event', function () {
                spyOn(componentUnderTest.updateAssetLineItem, 'emit');
                componentUnderTest.updateCartAsset();
                expect(componentUnderTest.updateAssetLineItem.emit).toHaveBeenCalled();
            });
        });
        describe('showDownloadButton()', function () {
            var tests = [
                { assetType: 'cart', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'cart', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'collection', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'collection', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'quoteEdit', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'quoteEdit', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'quoteShow', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'search', expectedResult: true, accessPath: 'ContentFilter' },
                { assetType: 'search', expectedResult: false, accessPath: 'SomethingElse' },
                { assetType: 'order', expectedResult: false, accessPath: 'ContentFilter' }
            ];
            tests.forEach(function (test) {
                it("returns " + test.expectedResult + " for asset type '" + test.assetType + "' and access path '" + test.accessPath + "'", function () {
                    componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ accessPath: test.accessPath }, test.assetType);
                    expect(componentUnderTest.showDownloadButton).toBe(test.expectedResult);
                });
            });
        });
        describe('assetName getter', function () {
            it('returns the name for an asset', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({
                    common: [
                        { name: 'id', value: '33323666' },
                        { name: 'family', value: 'website' },
                        { name: 'ingested', value: '2014-01-30 00:00:00.0' },
                        { name: 'liveDate', value: '2014-02-03 00:00:00.0' },
                        { name: 'modified', value: '2016-08-30 07:14:07.0' },
                        { name: 'name', value: '1FL001_033' }
                    ]
                }, 'search');
                expect(componentUnderTest.assetName).toBe('1FL001_033');
            });
        });
        describe('canAddToDifferentCollection getter', function () {
            it('return true if user can have collections and asset type is collection', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'collection');
                componentUnderTest.userCan = { haveCollections: function () { return true; } };
                expect(componentUnderTest.canAddToDifferentCollection).toBe(true);
            });
            it('return false if user can not have collections and asset type is collection', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'collection');
                componentUnderTest.userCan = { haveCollections: function () { return false; } };
                expect(componentUnderTest.canAddToDifferentCollection).toBe(false);
            });
            it('return false if user can have collections and asset type is not collection', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                componentUnderTest.userCan = { haveCollections: function () { return true; } };
                expect(componentUnderTest.canAddToDifferentCollection).toBe(false);
            });
            it('return false if user can not have collections and asset type is not collection', function () {
                componentUnderTest.asset = enhanced_asset_1.enhanceAsset({ primary: [{ name: 'Rights.Reproduction', value: 'Rights Managed' }] }, 'search');
                componentUnderTest.userCan = { haveCollections: function () { return false; } };
                expect(componentUnderTest.canAddToDifferentCollection).toBe(false);
            });
        });
        describe('addToDifferentCollection()', function () {
            it('should emit the onAddtoDifferentCollection event', function () {
                spyOn(componentUnderTest.onAddtoDifferentCollection, 'emit');
                componentUnderTest.addToDifferentCollection();
                expect(componentUnderTest.onAddtoDifferentCollection.emit).toHaveBeenCalled();
            });
        });
        describe('onCreateShareDialog()', function () {
            it('emits the right event', function () {
                spyOn(componentUnderTest.createShareDialog, 'emit');
                componentUnderTest.subclipMarkers = 'some markers';
                componentUnderTest.shareFormFields = 'some form fields';
                componentUnderTest.onCreateShareDialog();
                expect(componentUnderTest.createShareDialog.emit).toHaveBeenCalledWith({
                    enhancedAsset: {
                        assetId: 1, clipData: [], clipThumbnailUrl: 'clipUrl.jpg', clipUrl: 'clipUrl', transcodeTargets: transcodeTargets
                    },
                    subclipMarkers: 'some markers',
                    formFields: 'some form fields'
                });
            });
        });
    });
}
exports.main = main;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC8rYXNzZXQvY29tcG9uZW50cy9hc3NldC1kZXRhaWwuY29tcG9uZW50LnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNBLDhDQUE2QztBQUM3QyxtRUFBZ0U7QUFDaEUsMEVBQXVFO0FBQ3ZFLHlFQUFpRjtBQUNqRiw0REFBMEQ7QUFFMUQsMEVBQXlFO0FBR3pFO0lBQ0UsUUFBUSxDQUFDLHdCQUF3QixFQUFFO1FBQ2pDLElBQUksa0JBQXdDLENBQUM7UUFDN0MsSUFBSSxTQUF1QixDQUFDO1FBQzVCLElBQUksS0FBVSxDQUFDO1FBQ2YsSUFBSSxVQUFlLENBQUM7UUFDcEIsSUFBSSxnQkFBcUIsQ0FBQztRQUMxQixJQUFJLGFBQWtCLENBQUM7UUFDdkIsSUFBSSxVQUFlLENBQUM7UUFFcEIsVUFBVSxDQUFDO1lBQ1QsVUFBVSxHQUFHO2dCQUNYLE1BQU0sRUFBRTtvQkFDTixLQUFLLEVBQUU7d0JBQ0wsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFO3dCQUMzRCxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUU7d0JBQzNELEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTt3QkFDM0QsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFO3dCQUMzRCxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUU7cUJB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Z0JBQWdCLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUU7Z0JBRTlFLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUNwRixFQUFFLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRTtnQkFDbkYsRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUU7Z0JBRWhGLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRTtnQkFDdEUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSSxFQUFFO2dCQUNyRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUU7Z0JBRWxFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRTtnQkFDdkUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsSUFBSSxFQUFFO2dCQUN0RSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRSxJQUFJ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QUUsWUFBWSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUNoRSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSSxFQUFFO2dCQUNyRSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUNqRSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUNyRSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUNyRSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUVsRSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUNqRSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUN2RSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUNsRSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUN0RSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2dCQUN0RSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFO2FBQ3BFLENBQUM7WUFFRixLQUFLLENBQUMsT0FBTyxDQUFDLFVBQUEsSUFBSTtnQkFDaEIsRUFBRSxDQUFDLGFB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QkFBZ0IsRUFBRSxhQUFhLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0I7cUJBQ2xIO29CQUNELGNBQWMsRUFBRSxjQUFjO29CQUM5QixVQUFVLEVBQUUsa0JBQWtCO2lCQUMvQixDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUwsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBanBDRCxvQkFpcENDIiwiZmlsZSI6ImFwcC8rYXNzZXQvY29tcG9uZW50cy9hc3NldC1kZXRhaWwuY29tcG9uZW50LnNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWJjbGlwTWFya2VycyB9IGZyb20gJy4uLy4uL3NoYXJlZC9pbnRlcmZhY2VzL3N1YmNsaXAtbWFya2Vycyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlJztcbmltcG9ydCB7IEFzc2V0RGV0YWlsQ29tcG9uZW50IH0gZnJvbSAnLi9hc3NldC1kZXRhaWwuY29tcG9uZW50JztcbmltcG9ydCB7IE1vY2tBcHBTdG9yZSB9IGZyb20gJy4uLy4uL3N0b3JlL3NwZWMtaGVscGVycy9tb2NrLWFwcC5zdG9yZSc7XG5pbXBvcnQgeyBlbmhhbmNlQXNzZXQsIEFzc2V0VHlwZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9pbnRlcmZhY2VzL2VuaGFuY2VkLWFzc2V0JztcbmltcG9ydCB7IG1vY2tBc3NldCB9IGZyb20gJy4uLy4uL3NoYXJlZC9tb2Nrcy9tb2NrLWFzc2V0JztcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvY29tbW9uLmludGVyZmFjZSc7XG5pbXBvcnQgeyBGcmFtZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9tb2R1bGVzL3dhemVlLWZyYW1lLWZvcm1hdHRlci9pbmRleCc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIG1haW4oKSB7XG4gIGRlc2NyaWJlKCdBc3NldCBEZXRhaWwgQ29tcG9uZW50JywgKCkgPT4ge1xuICAgIGxldCBjb21wb25lbnRVbmRlclRlc3Q6IEFzc2V0RGV0YWlsQ29tcG9uZW50O1xuICAgIGxldCBtb2NrU3RvcmU6IE1vY2tBcHBTdG9yZTtcbiAgICBsZXQgYXNzZXQ6IGFueTtcbiAgICBsZXQgY29sbGVjdGlvbjogYW55O1xuICAgIGxldCB0cmFuc2NvZGVUYXJnZXRzOiBhbnk7XG4gICAgbGV0IGRldGFpbFR5cGVNYXA6IGFueTtcbiAgICBsZXQgZmluYWxBc3NldDogYW55O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjb2xsZWN0aW9uID0ge1xuICAgICAgICBhc3NldHM6IHtcbiAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgeyBhc3NldElkOiAxLCB1dWlkOiAnQUJDRCcsIHRpbWVTdGFydDogMTIzLCB0aW1lRW5kOiAxMDAwIH0sXG4gICAgICAgICAgICB7IGFzc2V0SWQ6IDEsIHV1aWQ6ICdFRkdIJywgdGltZVN0YXJ0OiA0NTYsIHRpbWVFbmQ6IDEwMDAgfSxcbiAgICAgICAgICAgIHsgYXNzZXRJZDogMSwgdXVpZDogJ0lKS0wnLCB0aW1lU3RhcnQ6IDc4OSwgdGltZUVuZDogMTAwMCB9LFxuICAgICAgICAgICAgeyBhc3NldElkOiAxLCB1dWlkOiAnTU5PUCcsIHRpbWVTdGFydDogMTAyLCB0aW1lRW5kOiAxMDAwIH0sXG4gICAgICAgICAgICB7IGFzc2V0SWQ6IDEsIHV1aWQ6ICdRUlNUJywgdGltZVN0YXJ0OiAxMDMsIHRpbWVFbmQ6IDEwMDAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdHJhbnNjb2RlVGFyZ2V0cyA9IFsnbWFzdGVyX2NvcHknLCAnMTA4MGknLCAnMTA4MHAnXTtcblxuICAgICAgZGV0YWlsVHlwZU1hcCA9IHtcbiAgICAgICAgY29tbW9uOiBbJ2ZpZWxkJ10sIGZpbHRlcjogdHJ1ZSwgaWQ6IDEzLCBuYW1lOiAnQ29yZSBQYWNrYWdlcycsIHByaW1hcnk6IFtdLCBzZWNvbmRhcnk6IFtdLCBzaXRlTmFtZTogJ2NvcmUnXG4gICAgICB9O1xuXG4gICAgICBmaW5hbEFzc2V0ID0ge1xuICAgICAgICBhc3NldElkOiAxLCBjbGlwRGF0YTogW10sIGNsaXBUaHVtYm5haWxVcmw6ICdjbGlwVXJsLmpwZycsIGNsaXBVcmw6ICdjbGlwVXJsJyxcbiAgICAgICAgdHJhbnNjb2RlVGFyZ2V0czogWydtYXN0ZXJfY29weScsICcxMDgwaScsICcxMDgwcCddXG5cbiAgICAgIH07XG4gICAgICBhc3NldCA9IHsgYXNzZXRJZDogMSwgdGltZVN0YXJ0OiAxMDIsIHRpbWVFbmQ6IDEwMDAsIGNsaXBEYXRhOiBbXSwgY2xpcFRodW1ibmFpbFVybDogJ2NsaXBVcmwuanBnJywgY2xpcFVybDogJ2NsaXBVcmwnIH07XG4gICAgICBhc3NldC5kZXRhaWxUeXBlTWFwID0gZGV0YWlsVHlwZU1hcDtcbiAgICAgIGFzc2V0LnRyYW5zY29kZVRhcmdldHMgPSB0cmFuc2NvZGVUYXJnZXRzO1xuXG4gICAgICBtb2NrU3RvcmUgPSBuZXcgTW9ja0FwcFN0b3JlKCk7XG4gICAgICBtb2NrU3RvcmUuY3JlYXRlU3RhdGVTZWN0aW9uKCd1aUNvbmZpZycsIHtcbiAgICAgICAgY29tcG9uZW50czoge1xuICAgICAgICAgIGdsb2JhbDogeyBjb25maWc6IHsgcGFnZVNpemU6IHsgdmFsdWU6ICc1MCcgfSB9IH0sXG4gICAgICAgICAgYXNzZXRTaGFyaW5nOiB7IGNvbmZpZzogeyBmb3JtOiB7IGl0ZW1zOiBbXSB9IH0gfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG1vY2tTdG9yZS5jcmVhdGVTdGF0ZVNlY3Rpb24oJ2Fzc2V0JywgeyBhY3RpdmVBc3NldDogeyBhc3NldElkOiAxMjM0LCBwcmljZTogOTkgfSB9KTtcblxuICAgICAgY29tcG9uZW50VW5kZXJUZXN0ID0gbmV3IEFzc2V0RGV0YWlsQ29tcG9uZW50KG1vY2tTdG9yZSk7XG5cbiAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IHtcbiAgICAgICAgYXNzZXRJZDogMSwgY2xpcERhdGE6IFtdLCBjbGlwVGh1bWJuYWlsVXJsOiAnY2xpcFVybC5qcGcnLCBjbGlwVXJsOiAnY2xpcFVybCcsIHRyYW5zY29kZVRhcmdldHM6IHRyYW5zY29kZVRhcmdldHNcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb21wb25lbnRVbmRlclRlc3Qud2luZG93ID0gd2luZG93O1xuICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnN1YmNsaXBNYXJrZXJzID0gdW5kZWZpbmVkO1xuICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW4gPSB7IGFkbWluaXN0ZXJRdW90ZXM6ICgpID0+IGZhbHNlLCBlZGl0Q29sbGVjdGlvbnM6ICgpID0+IHRydWUgfSBhcyBhbnk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnYXNzZXQgc2V0dGVyJywgKCkgPT4ge1xuICAgICAgaXQoJ3NldHMgdGhlIGNvbXBvbmVudFxcJ3MgYXNzZXQgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGFzc2V0O1xuXG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuYXNzZXQpLnRvRXF1YWwoYXNzZXQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdpbml0aWFsaXplcyB0aGUgc2VsZWN0ZWRUYXJnZXQgcHJvcGVydHkgdG8gdGhlIGZpcnN0IHRhcmdldCBpbiB0aGUgYXJyYXknLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGFzc2V0O1xuXG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3Quc2VsZWN0ZWRUYXJnZXQpLnRvRXF1YWwoJ21hc3Rlcl9jb3B5Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdhZGRBc3NldFRvQWN0aXZlQ29sbGVjdGlvbigpJywgKCkgPT4ge1xuICAgICAgaXQoJ2Rpc3BhdGNoZXMgdGhlIGV4cGVjdGVkIGFjdGlvbicsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3B5ID0gbW9ja1N0b3JlLmNyZWF0ZUFjdGlvbkZhY3RvcnlNZXRob2QoJ2FjdGl2ZUNvbGxlY3Rpb24nLCAnYWRkQXNzZXQnKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFkZEFzc2V0VG9BY3RpdmVDb2xsZWN0aW9uKCk7XG4gICAgICAgIG1vY2tTdG9yZS5leHBlY3REaXNwYXRjaEZvcihzcHksIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCwgbnVsbCk7XG4gICAgICB9KTtcbiAgICAgIGl0KCd3aXRoIHN1YmNsaXBwaW5nIGRlZmluZWQgZGlzcGF0Y2hlcyB0aGUgZXhwZWN0ZWQgYWN0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3Quc3ViY2xpcE1hcmtlcnMgPSB7IGluOiB7fSwgb3V0OiB7fSB9IGFzIGFueTtcbiAgICAgICAgY29uc3Qgc3B5ID0gbW9ja1N0b3JlLmNyZWF0ZUFjdGlvbkZhY3RvcnlNZXRob2QoJ2FjdGl2ZUNvbGxlY3Rpb24nLCAnYWRkQXNzZXQnKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFkZEFzc2V0VG9BY3RpdmVDb2xsZWN0aW9uKCk7XG4gICAgICAgIG1vY2tTdG9yZS5leHBlY3REaXNwYXRjaEZvcihzcHksIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCwgeyBpbjoge30sIG91dDoge30gfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdyZW1vdmVBc3NldEZyb21BY3RpdmVDb2xsZWN0aW9uKCknLCAoKSA9PiB7XG4gICAgICBpdCgnZGlzcGF0Y2hlcyB0aGUgY29uZmlybWF0aW9uIHByb21wdCcsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3B5ID0gbW9ja1N0b3JlLmNyZWF0ZUFjdGlvbkZhY3RvcnlNZXRob2QoJ2RpYWxvZycsICdzaG93Q29uZmlybWF0aW9uJyk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5yZW1vdmVBc3NldEZyb21BY3RpdmVDb2xsZWN0aW9uKCk7XG4gICAgICAgIG1vY2tTdG9yZS5leHBlY3REaXNwYXRjaEZvcihzcHksIHtcbiAgICAgICAgICB0aXRsZTogJ0NPTExFQ1RJT04uUkVNT1ZFX0FTU0VULlRJVExFJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQ09MTEVDVElPTi5SRU1PVkVfQVNTRVQuTUVTU0FHRScsXG4gICAgICAgICAgYWNjZXB0OiAnQ09MTEVDVElPTi5SRU1PVkVfQVNTRVQuQUNDRVBUJyxcbiAgICAgICAgICBkZWNsaW5lOiAnQ09MTEVDVElPTi5SRU1PVkVfQVNTRVQuREVDTElORSdcbiAgICAgICAgfSwgamFzbWluZS5hbnkoRnVuY3Rpb24pKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnZGlzcGF0Y2hlcyB0aGUgY29ycmVjdCBhY3Rpb24gdmlhIHRoZSBvbkFjY2VwdCBjYWxsYmFjaycsICgpID0+IHtcbiAgICAgICAgY29uc3QgZGlhbG9nU3B5OiBhbnkgPSBtb2NrU3RvcmUuY3JlYXRlQWN0aW9uRmFjdG9yeU1ldGhvZCgnZGlhbG9nJywgJ3Nob3dDb25maXJtYXRpb24nKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlU3B5OiBhbnkgPSBtb2NrU3RvcmUuY3JlYXRlQWN0aW9uRmFjdG9yeU1ldGhvZCgnYWN0aXZlQ29sbGVjdGlvbicsICdyZW1vdmVBc3NldCcpO1xuICAgICAgICBkaWFsb2dTcHkuYW5kLmNhbGxGYWtlKChfOiBhbnksIG9uQWNjZXB0Q2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgZGlhbG9nU3B5Lm9uQWNjZXB0Q2FsbGJhY2sgPSBvbkFjY2VwdENhbGxiYWNrO1xuICAgICAgICB9KTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnJlbW92ZUFzc2V0RnJvbUFjdGl2ZUNvbGxlY3Rpb24oKTtcbiAgICAgICAgZGlhbG9nU3B5Lm9uQWNjZXB0Q2FsbGJhY2soKTtcbiAgICAgICAgbW9ja1N0b3JlLmV4cGVjdERpc3BhdGNoRm9yKHJlbW92ZVNweSwgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZUFzc2V0SW5BY3RpdmVDb2xsZWN0aW9uKCknLCAoKSA9PiB7XG4gICAgICBpdCgnZGlzcGF0Y2hlcyB0aGUgZXhwZWN0ZWQgYWN0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBzdGFydEZyYW1lID0gbmV3IEZyYW1lKDI1KS5zZXRGcm9tRnJhbWVOdW1iZXIoMSk7XG4gICAgICAgIGNvbnN0IGVuZEZyYW1lID0gbmV3IEZyYW1lKDI1KS5zZXRGcm9tRnJhbWVOdW1iZXIoMik7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5zdWJjbGlwTWFya2VycyA9IHsgaW46IHN0YXJ0RnJhbWUsIG91dDogZW5kRnJhbWUgfSBhcyBhbnk7XG4gICAgICAgIGNvbnN0IHNweSA9IG1vY2tTdG9yZS5jcmVhdGVBY3Rpb25GYWN0b3J5TWV0aG9kKCdhY3RpdmVDb2xsZWN0aW9uJywgJ3VwZGF0ZUFzc2V0TWFya2VycycpO1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXBkYXRlQXNzZXRJbkFjdGl2ZUNvbGxlY3Rpb24oKTtcbiAgICAgICAgbW9ja1N0b3JlLmV4cGVjdERpc3BhdGNoRm9yKHNweSwgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0LCBjb21wb25lbnRVbmRlclRlc3Quc3ViY2xpcE1hcmtlcnMpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnYWRkQXNzZXRUb0NhcnQoKScsICgpID0+IHtcbiAgICAgIGl0KCdTaG91bGQgZW1pdCBhbiBldmVudCB0byBhZGQgYW4gYXNzZXQgdG8gdGhlIGNhcnQvcXVvdGUgd2l0aG91dCBzdWJjbGlwcGluZycsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0geyBhc3NldElkOiAxMjM0LCB0cmFuc2NvZGVUYXJnZXRzOiB0cmFuc2NvZGVUYXJnZXRzIH0gYXMgYW55O1xuICAgICAgICBzcHlPbihjb21wb25lbnRVbmRlclRlc3QuYWRkVG9DYXJ0LCAnZW1pdCcpO1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYWRkQXNzZXRUb0NhcnQoKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5hZGRUb0NhcnQuZW1pdClcbiAgICAgICAgICAudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBhc3NldElkOiAxMjM0LCBtYXJrZXJzOiBudWxsLCBzZWxlY3RlZFRyYW5zY29kZVRhcmdldDogJ21hc3Rlcl9jb3B5JyB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnU2hvdWxkIGVtaXQgYW4gZXZlbnQgdG8gYWRkIGFuIGFzc2V0IHRvIHRoZSBjYXJ0L3F1b3RlIHdpdGggc3ViY2xpcHBpbmcnLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IHsgYXNzZXRJZDogMTIzNCwgdHJhbnNjb2RlVGFyZ2V0czogdHJhbnNjb2RlVGFyZ2V0cyB9IGFzIGFueTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnN1YmNsaXBNYXJrZXJzID0geyBpbjoge30sIG91dDoge30gfSBhcyBhbnk7XG5cbiAgICAgICAgc3B5T24oY29tcG9uZW50VW5kZXJUZXN0LmFkZFRvQ2FydCwgJ2VtaXQnKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFkZEFzc2V0VG9DYXJ0KCk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuYWRkVG9DYXJ0LmVtaXQpXG4gICAgICAgICAgLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICAgIGFzc2V0SWQ6IDEyMzQsIG1hcmtlcnM6IHsgaW46IHt9LCBvdXQ6IHt9IH0sIHNlbGVjdGVkVHJhbnNjb2RlVGFyZ2V0OiAnbWFzdGVyX2NvcHknXG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdwcmV2aW91c1BhZ2UoKScsICgpID0+IHtcbiAgICAgIGl0KCdTaG91bGQgZW1pdCBhbiBldmVudCB0byBnbyBiYWNrIHRvIHRoZSBwcmV2aW91cyBwYWdlJywgKCkgPT4ge1xuICAgICAgICBzcHlPbihjb21wb25lbnRVbmRlclRlc3Qub25QcmV2aW91c1BhZ2UsICdlbWl0Jyk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5wcmV2aW91c1BhZ2UoKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5vblByZXZpb3VzUGFnZS5lbWl0KVxuICAgICAgICAgIC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdoYXNQYWdlSGlzdG9yeScsICgpID0+IHtcbiAgICAgIGl0KCdTaG91bGQgcmV0dXJuIGZhbHNlIGlmIHRoZSBicm93c2VyIGhhcyBub3QgeWV0IGxvYWRlZCBwcmV2aW91cyBwYWdlIGhpc3RvcnknLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuaGFzUGFnZUhpc3RvcnkpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdTaG91bGQgcmV0dXJuIHRydWUgaWYgdGhlIGJyb3dzZXIgaGFzIGxvYWRlZCBwcmV2aW91cyBwYWdlIGhpc3RvcnknLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC53aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoeyBkYXRhOiAnc29tZWRhdGExJyB9LCAndGVzdDEnKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LndpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7IGRhdGE6ICdzb21lZGF0YTInIH0sICd0ZXN0MicpO1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3Qud2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHsgZGF0YTogJ3NvbWVkYXRhMycgfSwgJ3Rlc3QzJyk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuaGFzUGFnZUhpc3RvcnkpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYW5Db21tZW50IGdldHRlcicsICgpID0+IHtcbiAgICAgIGl0KCdyZXR1cm5zIGZhbHNlIHdoZW4gdGhlIGFzc2V0IGlzIGEgc2VhcmNoJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSB7IHR5cGU6ICdzZWFyY2gnIH0gYXMgYW55O1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkNvbW1lbnQpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIHRydWUgd2hlbiBjb21tZW50IGZvcm0gY29uZmlnIGRvZXMgZXhpc3QnLCAoKSA9PiB7XG4gICAgICAgIFsnY2FydCcsICdxdW90ZUVkaXQnLCAncXVvdGVTaG93JywgJ2NvbGxlY3Rpb24nLCAnb3JkZXInXS5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IHsgdHlwZSB9IGFzIGFueTtcbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkNvbW1lbnQpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY2FuU2hhcmUgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IHsgYXNzZXRUeXBlOiBBc3NldFR5cGUsIHVzZXJDYW5TaGFyZTogYm9vbGVhbiwgZXhwZWN0ZWRSZXN1bHQ6IGJvb2xlYW4gfVtdID0gW1xuICAgICAgICB7IGFzc2V0VHlwZTogJ2NhcnQnLCB1c2VyQ2FuU2hhcmU6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ2NvbGxlY3Rpb24nLCB1c2VyQ2FuU2hhcmU6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ29yZGVyJywgdXNlckNhblNoYXJlOiB0cnVlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdxdW90ZUVkaXQnLCB1c2VyQ2FuU2hhcmU6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlU2hvdycsIHVzZXJDYW5TaGFyZTogdHJ1ZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnc2VhcmNoJywgdXNlckNhblNoYXJlOiB0cnVlLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9XG4gICAgICBdO1xuXG4gICAgICB0ZXN0cy5mb3JFYWNoKHRlc3QgPT4ge1xuICAgICAgICBpdChgcmV0dXJucyAke3Rlc3QuZXhwZWN0ZWRSZXN1bHR9IGZvciBhc3NldCB0eXBlICcke3Rlc3QuYXNzZXRUeXBlfSdgLCAoKSA9PiB7XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KHt9IGFzIGFueSwgdGVzdC5hc3NldFR5cGUpO1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBjcmVhdGVBY2Nlc3NJbmZvOiAoKSA9PiB0ZXN0LnVzZXJDYW5TaGFyZSB9IGFzIGFueTtcblxuICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuU2hhcmUpLnRvQmUodGVzdC5leHBlY3RlZFJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc2hvd0FkdmFuY2VkUGxheWVyIGdldHRlcicsICgpID0+IHtcbiAgICAgIGl0KCdyZXR1cm5zIHRydWUgaWYgdGhlIHVzZXIgY2FuIHZpZXcgdGhlIGFkdmFuY2VkIHBsYXllcicsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW4gPSB7IHZpZXdBZHZhbmNlZFBsYXllcjogKCkgPT4gdHJ1ZSB9IGFzIGFueTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5zaG93QWR2YW5jZWRQbGF5ZXIpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgZmFsc2UgaWYgdGhlIHVzZXIgY2Fubm90IHZpZXcgdGhlIGFkdmFuY2VkIHBsYXllcicsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW4gPSB7IHZpZXdBZHZhbmNlZFBsYXllcjogKCkgPT4gZmFsc2UgfSBhcyBhbnk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3Quc2hvd0FkdmFuY2VkUGxheWVyKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3NoYXJlQnV0dG9uTGFiZWxLZXkgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IHsgbWFya2VyczogYW55LCBleHBlY3RlZEtleTogc3RyaW5nIH1bXSA9IFtcbiAgICAgICAgeyBtYXJrZXJzOiB1bmRlZmluZWQsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLlNIQVJJTkdfQlROX1RJVExFJyB9LFxuICAgICAgICB7IG1hcmtlcnM6IG51bGwsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLlNIQVJJTkdfQlROX1RJVExFJyB9LFxuICAgICAgICB7IG1hcmtlcnM6IHsgaW46ICd4JyB9LCBleHBlY3RlZEtleTogJ0FTU0VULkRFVEFJTC5TSEFSSU5HX0JUTl9USVRMRScgfSxcbiAgICAgICAgeyBtYXJrZXJzOiB7IGluOiAneCcsIG91dDogbnVsbCB9LCBleHBlY3RlZEtleTogJ0FTU0VULkRFVEFJTC5TSEFSSU5HX0JUTl9USVRMRScgfSxcbiAgICAgICAgeyBtYXJrZXJzOiB7IG91dDogJ3knIH0sIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLlNIQVJJTkdfQlROX1RJVExFJyB9LFxuICAgICAgICB7IG1hcmtlcnM6IHsgaW46IG51bGwsIG91dDogJ3knIH0sIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLlNIQVJJTkdfQlROX1RJVExFJyB9LFxuICAgICAgICB7IG1hcmtlcnM6IHsgaW46ICd4Jywgb3V0OiAneScgfSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuU0hBUklOR19TVUJDTElQX0JUTl9USVRMRScgfVxuICAgICAgXTtcblxuICAgICAgdGVzdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgICAgaXQoYHJldHVybnMgJyR7dGVzdC5leHBlY3RlZEtleX0nIGZvciBtYXJrZXJzID0gJHt0ZXN0Lm1hcmtlcnN9YCwgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5zdWJjbGlwTWFya2VycyA9IHRlc3QubWFya2VycztcblxuICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3Quc2hhcmVCdXR0b25MYWJlbEtleSkudG9FcXVhbCh0ZXN0LmV4cGVjdGVkS2V5KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdyaWdodHMgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgaXQoJ3JldHVybnMgdGhlIHZhbHVlIG9mIFJpZ2h0cy5SZXByb2R1Y3Rpb24gbWV0YWRhdGEgaW4gdGhlIGFzc2V0JywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPVxuICAgICAgICAgIGVuaGFuY2VBc3NldCh7IHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdzb21lIHZhbHVlJyB9XSB9IGFzIGFueSwgJ3NlYXJjaCcpO1xuXG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QucmlnaHRzKS50b0VxdWFsKCdzb21lIHZhbHVlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYW5TaG93UHJpY2UoKScsICgpID0+IHtcbiAgICAgIGl0KCdSZXR1cm5zIHRydWUgaWYgaXRzIGEgcmlnaHRzIG1hbmFnZWQgYXNzZXQgd2l0aCBhIHZhbGlkIHByaWNlJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmljZTogMTAwLCBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnUmlnaHRzIE1hbmFnZWQnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2FnZVByaWNlID0gMTAwO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblNob3dQcmljZSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnUmV0dXJucyB0cnVlIGlmIGl0cyBhIHJveWFsdHkgZnJlZSBhc3NldCB3aXRoIGEgdmFsaWQgcHJpY2UnLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHByaWNlOiAxMDAsIHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSb3lhbHR5IEZyZWUnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuU2hvd1ByaWNlKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdSZXR1cm5zIGZhbHNlIGlmIGl0cyBhIHJpZ2h0cyBtYW5hZ2VkIGFzc2V0IHdpdGggbm8gcHJpY2UnLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSaWdodHMgTWFuYWdlZCcgfV0gfSBhcyBhbnksXG4gICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzYWdlUHJpY2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuU2hvd1ByaWNlKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnUmV0dXJucyBmYWxzZSBpZiBpdHMgYSByb3lhbHR5IGZyZWUgYXNzZXQgd2l0aCBubyBwcmljZScsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KFxuICAgICAgICAgIHsgcHJpbWFyeTogW3sgbmFtZTogJ1JpZ2h0cy5SZXByb2R1Y3Rpb24nLCB2YWx1ZTogJ1JveWFsdHkgRnJlZScgfV0gfSBhcyBhbnksXG4gICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5jYW5TaG93UHJpY2UpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY2FuU2hvd05vUHJpY2luZ0F2YWlsYWJsZU5vdGljZSgpJywgKCkgPT4ge1xuICAgICAgaXQoJ1JldHVybnMgdHJ1ZSBpZiBpdHMgYSByaWdodHMgbWFuYWdlZCBhc3NldCB3aXRoIG5vIHByaWNlIHByb3BlcnR5JywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnUmlnaHRzIE1hbmFnZWQnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuU2hvd05vUHJpY2luZ0F2YWlsYWJsZU5vdGljZSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnUmV0dXJucyBmYWxzZSBpZiBpdHMgYSByaWdodHMgbWFuYWdlZCBhc3NldCB3aXRoIGEgcHJpY2UgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHByaWNlOiAxMDAsIHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSaWdodHMgTWFuYWdlZCcgfV0gfSBhcyBhbnksXG4gICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5jYW5TaG93Tm9QcmljaW5nQXZhaWxhYmxlTm90aWNlKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnUmV0dXJucyB0cnVlIGlmIGl0cyBhIFJveWFsdHkgRnJlZSBhc3NldCB3aXRoIG5vIHByaWNlIHByb3BlcnR5JywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnUm95YWx0eSBGcmVlJyB9XSB9IGFzIGFueSxcbiAgICAgICAgICAnc2VhcmNoJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblNob3dOb1ByaWNpbmdBdmFpbGFibGVOb3RpY2UpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ1JldHVybnMgZmFsc2UgaWYgaXRzIGEgUm95YWx0eSBGcmVlIGFzc2V0IHdpdGggbm8gcHJpY2UgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHByaWNlOiAxMDAsIHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSb3lhbHR5IEZyZWUnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuU2hvd05vUHJpY2luZ0F2YWlsYWJsZU5vdGljZSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdwcmljZSBnZXR0ZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHMgPSBbXG4gICAgICAgIHsgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6IDEyLjM0LCB1c2FnZVByaWNlOiBudWxsIGFzIGFueSwgZXhwZWN0ZWRSZXN1bHQ6IDEyLjM0IH0sXG4gICAgICAgIHsgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6IG51bGwsIHVzYWdlUHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH0sXG4gICAgICAgIHsgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6IDAsIHVzYWdlUHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH0sXG5cbiAgICAgICAgeyByaWdodHM6ICdSb3lhbHR5IEZyZWUnLCBwcmljZTogMTIuMzQsIHVzYWdlUHJpY2U6IDU2Ljc4LCBleHBlY3RlZFJlc3VsdDogMTIuMzQgfSxcbiAgICAgICAgeyByaWdodHM6ICdSb3lhbHR5IEZyZWUnLCBwcmljZTogbnVsbCwgdXNhZ2VQcmljZTogNTYuNzgsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH0sXG4gICAgICAgIHsgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6IDAsIHVzYWdlUHJpY2U6IDU2Ljc4LCBleHBlY3RlZFJlc3VsdDogbnVsbCB9LFxuXG4gICAgICAgIHsgcmlnaHRzOiAnUmlnaHRzIE1hbmFnZWQnLCBwcmljZTogMTIuMzQsIHVzYWdlUHJpY2U6IG51bGwgYXMgYW55LCBleHBlY3RlZFJlc3VsdDogbnVsbCBhcyBhbnksIGhhc0F0dHJpYnV0ZXM6IHRydWUgfSxcbiAgICAgICAgeyByaWdodHM6ICdSaWdodHMgTWFuYWdlZCcsIHByaWNlOiBudWxsLCB1c2FnZVByaWNlOiBudWxsLCBleHBlY3RlZFJlc3VsdDogbnVsbCB9LFxuICAgICAgICB7IHJpZ2h0czogJ1JpZ2h0cyBNYW5hZ2VkJywgcHJpY2U6IDAsIHVzYWdlUHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH0sXG5cbiAgICAgICAgeyByaWdodHM6ICdSaWdodHMgTWFuYWdlZCcsIHByaWNlOiAxMi4zNCwgdXNhZ2VQcmljZTogNTYuNzgsIGV4cGVjdGVkUmVzdWx0OiA1Ni43OCB9LFxuICAgICAgICB7IHJpZ2h0czogJ1JpZ2h0cyBNYW5hZ2VkJywgcHJpY2U6IG51bGwsIHVzYWdlUHJpY2U6IDU2Ljc4LCBleHBlY3RlZFJlc3VsdDogNTYuNzggfSxcbiAgICAgICAgeyByaWdodHM6ICdSaWdodHMgTWFuYWdlZCcsIHByaWNlOiAwLCB1c2FnZVByaWNlOiA1Ni43OCwgZXhwZWN0ZWRSZXN1bHQ6IDU2Ljc4IH0sXG5cbiAgICAgICAgeyByaWdodHM6IG51bGwsIHByaWNlOiAxMi4zNCwgdXNhZ2VQcmljZTogbnVsbCwgZXhwZWN0ZWRSZXN1bHQ6IG51bGwgfSxcbiAgICAgICAgeyByaWdodHM6IG51bGwsIHByaWNlOiBudWxsLCB1c2FnZVByaWNlOiBudWxsLCBleHBlY3RlZFJlc3VsdDogbnVsbCB9LFxuICAgICAgICB7IHJpZ2h0czogbnVsbCwgcHJpY2U6IDAsIHVzYWdlUHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH0sXG5cbiAgICAgICAgeyByaWdodHM6IG51bGwsIHByaWNlOiAxMi4zNCwgdXNhZ2VQcmljZTogNTYuNzgsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH0sXG4gICAgICAgIHsgcmlnaHRzOiBudWxsLCBwcmljZTogbnVsbCwgdXNhZ2VQcmljZTogNTYuNzgsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH0sXG4gICAgICAgIHsgcmlnaHRzOiBudWxsLCBwcmljZTogMCwgdXNhZ2VQcmljZTogNTYuNzgsIGV4cGVjdGVkUmVzdWx0OiBudWxsIH1cbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGNvbnN0IHJpZ2h0czogc3RyaW5nID0gYCR7dGVzdC5yaWdodHMgPyB0ZXN0LnJpZ2h0cyA6ICdubyByaWdodHMnfWA7XG5cbiAgICAgICAgZGVzY3JpYmUoYGZvciBhICR7cmlnaHRzfSBhc3NldGAsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBwcmljZTogc3RyaW5nID0gKHRlc3QuaGFzT3duUHJvcGVydHkoJ3ByaWNlJykgJiYgdGVzdC5wcmljZSA+IDApID8gYHByaWNlID0gJHt0ZXN0LnByaWNlfWAgOiAnbm8gcHJpY2UnO1xuICAgICAgICAgIGNvbnN0IHVzYWdlUHJpY2U6IHN0cmluZyA9IHRlc3QudXNhZ2VQcmljZSA/IGB1c2FnZSBwcmljZSA9ICR7dGVzdC51c2FnZVByaWNlfWAgOiAnbm8gdXNhZ2UgcHJpY2UnO1xuXG4gICAgICAgICAgaXQoYHJldHVybnMgJHt0ZXN0LmV4cGVjdGVkUmVzdWx0fSBmb3IgJHtwcmljZX0gYW5kICR7dXNhZ2VQcmljZX1gLCAoKSA9PiB7XG4gICAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgICAgIHsgcHJpY2U6IHRlc3QucHJpY2UsIHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6IHRlc3QucmlnaHRzIH1dIH0gYXMgYW55LFxuICAgICAgICAgICAgICAnc2VhcmNoJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2FnZVByaWNlID0gdGVzdC51c2FnZVByaWNlO1xuXG4gICAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnByaWNlKS50b0JlKHRlc3QuZXhwZWN0ZWRSZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NhblBlcmZvcm1DYXJ0QWN0aW9ucyBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0cyA9IFtcbiAgICAgICAgeyBoYXZlQ2FydDogdHJ1ZSwgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6IDEyLjM0LCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9LFxuICAgICAgICB7IGhhdmVDYXJ0OiB0cnVlLCByaWdodHM6ICdSb3lhbHR5IEZyZWUnLCBwcmljZTogMCwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBoYXZlQ2FydDogdHJ1ZSwgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6ICdOb3RBUHJvcGVydHknLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcblxuICAgICAgICB7IGhhdmVDYXJ0OiB0cnVlLCByaWdodHM6ICdSaWdodHMgTWFuYWdlZCcsIHByaWNlOiAxMi4zNCwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBoYXZlQ2FydDogdHJ1ZSwgcmlnaHRzOiAnUmlnaHRzIE1hbmFnZWQnLCBwcmljZTogMCwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBoYXZlQ2FydDogdHJ1ZSwgcmlnaHRzOiAnUmlnaHRzIE1hbmFnZWQnLCBwcmljZTogJ05vdEFQcm9wZXJ0eScsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuXG4gICAgICAgIHsgaGF2ZUNhcnQ6IHRydWUsIHJpZ2h0czogbnVsbCwgcHJpY2U6IDEyLjM0LCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXZlQ2FydDogdHJ1ZSwgcmlnaHRzOiBudWxsLCBwcmljZTogMCwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGF2ZUNhcnQ6IHRydWUsIHJpZ2h0czogbnVsbCwgcHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuXG4gICAgICAgIHsgaGF2ZUNhcnQ6IGZhbHNlLCByaWdodHM6ICdSb3lhbHR5IEZyZWUnLCBwcmljZTogMTIuMzQsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhdmVDYXJ0OiBmYWxzZSwgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6IDAsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhdmVDYXJ0OiBmYWxzZSwgcmlnaHRzOiAnUm95YWx0eSBGcmVlJywgcHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuXG4gICAgICAgIHsgaGF2ZUNhcnQ6IGZhbHNlLCByaWdodHM6ICdSaWdodHMgTWFuYWdlZCcsIHByaWNlOiAxMi4zNCwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGF2ZUNhcnQ6IGZhbHNlLCByaWdodHM6ICdSaWdodHMgTWFuYWdlZCcsIHByaWNlOiAwLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXZlQ2FydDogZmFsc2UsIHJpZ2h0czogJ1JpZ2h0cyBNYW5hZ2VkJywgcHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuXG4gICAgICAgIHsgaGF2ZUNhcnQ6IGZhbHNlLCByaWdodHM6IG51bGwsIHByaWNlOiAxMi4zNCwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGF2ZUNhcnQ6IGZhbHNlLCByaWdodHM6IG51bGwsIHByaWNlOiAwLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXZlQ2FydDogZmFsc2UsIHJpZ2h0czogbnVsbCwgcHJpY2U6IG51bGwsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgXTtcblxuICAgICAgdGVzdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgICAgY29uc3Qgd2l0aFdpdGhvdXQ6IHN0cmluZyA9IHRlc3QuaGF2ZUNhcnQgPyAnd2l0aCcgOiAnd2l0aG91dCc7XG4gICAgICAgIGNvbnN0IHJpZ2h0czogc3RyaW5nID0gdGVzdC5yaWdodHMgPyB0ZXN0LnJpZ2h0cyA6ICdubyByaWdodHMnO1xuICAgICAgICBsZXQgcHJpY2U6IHN0cmluZyA9ICh0ZXN0LnByaWNlID09PSAwIHx8ICEhdGVzdC5wcmljZSkgPyBgcHJpY2UgPSAke3Rlc3QucHJpY2V9YCA6ICdubyBwcmljZSc7XG4gICAgICAgIHByaWNlID0gKHRlc3QucHJpY2UgIT09ICdOb3RBUHJvcGVydHknKSA/IHByaWNlIDogJ05vIHByaWNlIHByb3BlcnR5JztcbiAgICAgICAgaXQoYHJldHVybnMgJHt0ZXN0LmV4cGVjdGVkUmVzdWx0fSAke3dpdGhXaXRob3V0fSBoYXZlQ2FydCBjYXBhYmlsaXR5IGFuZCBhICR7cmlnaHRzfSBhc3NldCB3aXRoICR7cHJpY2V9YCwgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBoYXZlQ2FydDogKCkgPT4gdGVzdC5oYXZlQ2FydCB9IGFzIGFueTtcbiAgICAgICAgICBpZiAodGVzdC5wcmljZSA9PT0gJ05vdEFQcm9wZXJ0eScpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiB0ZXN0LnJpZ2h0cyB9XSB9IGFzIGFueSxcbiAgICAgICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICAgICAgeyBwcmljZTogdGVzdC5wcmljZSwgcHJpbWFyeTogW3sgbmFtZTogJ1JpZ2h0cy5SZXByb2R1Y3Rpb24nLCB2YWx1ZTogdGVzdC5yaWdodHMgfV0gfSBhcyBhbnksXG4gICAgICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblBlcmZvcm1DYXJ0QWN0aW9ucykudG9CZSh0ZXN0LmV4cGVjdGVkUmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYW5TZWxlY3RUcmFuc2NvZGVUYXJnZXQgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBhZGRUb0NhcnQ6ICgpID0+IHRydWUgfSBhcyBhbnk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHRyYW5zY29kZVRhcmdldHM6IHsgc29tZTogJ3RhcmdldHMnIH0sIHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSb3lhbHR5IEZyZWUnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgdHJ1ZSBmb3IgYSByb3lhbHR5IGZyZWUgYXNzZXQgd2l0aCB0cmFuc2NvZGUgdGFyZ2V0cyBhbmQgYWRkVG9DYXJ0IGNhcGFiaWxpdHknLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuU2VsZWN0VHJhbnNjb2RlVGFyZ2V0KS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIGZhbHNlIGZvciBhIG5vbi1yb3lhbHR5IGZyZWUgYXNzZXQnLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHRyYW5zY29kZVRhcmdldHM6IHsgc29tZTogJ3RhcmdldHMnIH0sIHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSaWdodHMgTWFuYWdlZCcgfV0gfSBhcyBhbnksXG4gICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblNlbGVjdFRyYW5zY29kZVRhcmdldCkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgZmFsc2UgZm9yIGFuIGFzc2V0IHdpdGhvdXQgdHJhbnNjb2RlIHRhcmdldHMnLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSaWdodHMgTWFuYWdlZCcgfV0gfSBhcyBhbnksXG4gICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblNlbGVjdFRyYW5zY29kZVRhcmdldCkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgZmFsc2Ugd2l0aG91dCBhZGRUb0NhcnQgY2FwYWJpbGl0eScsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW4gPSB7IGFkZFRvQ2FydDogKCkgPT4gZmFsc2UgfSBhcyBhbnk7XG5cbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5jYW5TZWxlY3RUcmFuc2NvZGVUYXJnZXQpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY2FuQ2FsY3VsYXRlUHJpY2UgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBjYWxjdWxhdGVQcmljZTogKCkgPT4gdHJ1ZSB9IGFzIGFueTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KFxuICAgICAgICAgIHsgcHJpbWFyeTogW3sgbmFtZTogJ1JpZ2h0cy5SZXByb2R1Y3Rpb24nLCB2YWx1ZTogJ1JpZ2h0cyBNYW5hZ2VkJyB9XSB9IGFzIGFueSxcbiAgICAgICAgICAnc2VhcmNoJ1xuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIHRydWUgZm9yIGEgcmlnaHRzIG1hbmFnZWQgYXNzZXQgYW5kIGNhbGN1bGF0ZVByaWNlIGNhcGFiaWxpdHknLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuRWRpdE9yQXBwbHlSaWdodHMpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgZmFsc2UgZm9yIGEgbm9uLXJpZ2h0cyBtYW5hZ2VkIGFzc2V0JywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnUm95YWx0eSBGcmVlJyB9XSB9IGFzIGFueSxcbiAgICAgICAgICAnc2VhcmNoJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuRWRpdE9yQXBwbHlSaWdodHMpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIGZhbHNlIHdpdGhvdXQgY2FsY3VsYXRlUHJpY2UgY2FwYWJpbGl0eScsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW4gPSB7IGNhbGN1bGF0ZVByaWNlOiAoKSA9PiBmYWxzZSB9IGFzIGFueTtcblxuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblNlbGVjdFRyYW5zY29kZVRhcmdldCkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYW5VcGRhdGVDYXJ0IGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IGFzc2V0VHlwZTogQXNzZXRUeXBlLCBleHBlY3RlZFJlc3VsdDogYm9vbGVhbiB9W10gPSBbXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY2FydCcsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY29sbGVjdGlvbicsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ29yZGVyJywgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVFZGl0JywgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdxdW90ZVNob3cnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdzZWFyY2gnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGl0KGByZXR1cm5zICR7dGVzdC5leHBlY3RlZFJlc3VsdH0gZm9yIGFzc2V0IHR5cGUgJyR7dGVzdC5hc3NldFR5cGV9J2AsICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoe30gYXMgYW55LCB0ZXN0LmFzc2V0VHlwZSk7XG5cbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblVwZGF0ZUNhcnRBc3NldCkudG9CZSh0ZXN0LmV4cGVjdGVkUmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYW5VcGRhdGVDb2xsZWN0aW9uQXNzZXQgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IHsgYXNzZXRUeXBlOiBBc3NldFR5cGUsIGV4cGVjdGVkUmVzdWx0OiBib29sZWFuIH1bXSA9IFtcbiAgICAgICAgeyBhc3NldFR5cGU6ICdjYXJ0JywgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY29sbGVjdGlvbicsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnb3JkZXInLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdxdW90ZUVkaXQnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdxdW90ZVNob3cnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdzZWFyY2gnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGl0KGByZXR1cm5zICR7dGVzdC5leHBlY3RlZFJlc3VsdH0gZm9yIGFzc2V0IHR5cGUgJyR7dGVzdC5hc3NldFR5cGV9J2AsICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoe30gYXMgYW55LCB0ZXN0LmFzc2V0VHlwZSk7XG5cbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhblVwZGF0ZUNvbGxlY3Rpb25Bc3NldCkudG9CZSh0ZXN0LmV4cGVjdGVkUmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYW5FZGl0Q29sbGVjdGlvblN1YmNsaXBNYXJrZXJzIGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IG1hcmtlcnM6IGJvb2xlYW4sIGFzc2V0VHlwZTogQXNzZXRUeXBlLCBleHBlY3RlZFJlc3VsdDogYm9vbGVhbiB9W10gPSBbXG4gICAgICAgIHsgbWFya2VyczogdHJ1ZSwgYXNzZXRUeXBlOiAnY2FydCcsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IG1hcmtlcnM6IHRydWUsIGFzc2V0VHlwZTogJ2NvbGxlY3Rpb24nLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9LFxuICAgICAgICB7IG1hcmtlcnM6IGZhbHNlLCBhc3NldFR5cGU6ICdjb2xsZWN0aW9uJywgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgbWFya2VyczogdHJ1ZSwgYXNzZXRUeXBlOiAnb3JkZXInLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBtYXJrZXJzOiB0cnVlLCBhc3NldFR5cGU6ICdxdW90ZUVkaXQnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBtYXJrZXJzOiB0cnVlLCBhc3NldFR5cGU6ICdxdW90ZVNob3cnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBtYXJrZXJzOiB0cnVlLCBhc3NldFR5cGU6ICdzZWFyY2gnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGl0KGByZXR1cm5zICR7dGVzdC5leHBlY3RlZFJlc3VsdH0gZm9yIGFzc2V0IHR5cGUgJyR7dGVzdC5hc3NldFR5cGV9J2AgK1xuICAgICAgICAgIGAgYW5kIHN1YmNsaXAgbWFya2VycyBhcmUgJHt0ZXN0Lm1hcmtlcnMgPyAnJyA6ICdub3QgJ31kZWZpbmVkIGAsICgpID0+IHtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldCh7fSBhcyBhbnksIHRlc3QuYXNzZXRUeXBlKTtcbiAgICAgICAgICAgIGlmICh0ZXN0Lm1hcmtlcnMpIGNvbXBvbmVudFVuZGVyVGVzdC5zdWJjbGlwTWFya2VycyA9IHsgaW46IHsgc29tZTogJ2ZyYW1lJyB9LCBvdXQ6IHsgc29tZTogJ2ZyYW1lJyB9IH0gYXMgYW55O1xuXG4gICAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkVkaXRDb2xsZWN0aW9uU3ViY2xpcE1hcmtlcnMpLnRvQmUodGVzdC5leHBlY3RlZFJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjb2xsZWN0aW9uU3ViY2xpcEJ1dHRvbkhvdmVyVHh0IGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IGFjdGl2ZTogYm9vbGVhbiwgaXNTdWJjbGlwcGVkOiBib29sZWFuLCBleHBlY3RlZEtleTogc3RyaW5nIH1bXSA9IFtcbiAgICAgICAgeyBhY3RpdmU6IHRydWUsIGlzU3ViY2xpcHBlZDogdHJ1ZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLlVQREFURS5TVUJDTElQLkFDVElWRScgfSxcbiAgICAgICAgeyBhY3RpdmU6IHRydWUsIGlzU3ViY2xpcHBlZDogZmFsc2UsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5BRERfTkVXLlNVQkNMSVAuQUNUSVZFJyB9LFxuICAgICAgICB7IGFjdGl2ZTogZmFsc2UsIGlzU3ViY2xpcHBlZDogdHJ1ZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLlVQREFURS5TVUJDTElQLkRJU0FCTEVEJyB9LFxuICAgICAgICB7IGFjdGl2ZTogZmFsc2UsIGlzU3ViY2xpcHBlZDogZmFsc2UsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5BRERfTkVXLlNVQkNMSVAuRElTQUJMRUQnIH1cbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBgcmV0dXJucyAke3Rlc3QuZXhwZWN0ZWRLZXl9YCArXG4gICAgICAgICAgYCBmb3IgYSBjb2xsZWN0aW9uIGFzc2V0IHdpdGggZXhpc3Rpbmcgc3ViY2xpcHBpbmcgJHt0ZXN0LmlzU3ViY2xpcHBlZCA/ICcnIDogJ25vdCAnfWRlZmluZWRgICtcbiAgICAgICAgICBgIGFuZCB1cGRhdGUgYnV0dG9uIGlzICR7dGVzdC5hY3RpdmUgPyAnYWN0aXZlJyA6ICdkaXNhYmxlZCd9YDtcblxuICAgICAgICBpdChkZXNjcmlwdGlvbiwgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hY3RpdmVDb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3Quc3ViY2xpcE1hcmtlcnMgPSB0ZXN0LmFjdGl2ZSA/IHtcbiAgICAgICAgICAgIGluOiBuZXcgRnJhbWUoMjUpLnNldEZyb21GcmFtZU51bWJlcigxKSxcbiAgICAgICAgICAgIG91dDogdGVzdC5hY3RpdmUgPyBuZXcgRnJhbWUoMjUpLnNldEZyb21GcmFtZU51bWJlcigyKSA6IG5ldyBGcmFtZSgyNSkuc2V0RnJvbUZyYW1lTnVtYmVyKDMpXG4gICAgICAgICAgfSA6IG51bGw7XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KHtcbiAgICAgICAgICAgIC4uLmFzc2V0LFxuICAgICAgICAgICAgdXVpZDogdGVzdC5hY3RpdmUgPyAnTU5PUCcgOiAnTk9QRScsXG4gICAgICAgICAgICB0aW1lU3RhcnQ6IHRlc3QuaXNTdWJjbGlwcGVkID8gMTAzIDogbnVsbCxcbiAgICAgICAgICAgIHRpbWVFbmQ6IHRlc3QuaXNTdWJjbGlwcGVkID8gMTAwMCA6IG51bGwsXG4gICAgICAgICAgfSwgJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3Quc2hvd0Fzc2V0U2F2ZVN1YmNsaXAgPSB0ZXN0LmFjdGl2ZTtcblxuICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY29sbGVjdGlvblN1YmNsaXBCdXR0b25Ib3ZlclR4dCkudG9CZSh0ZXN0LmV4cGVjdGVkS2V5KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjb2xsZWN0aW9uU3ViY2xpcEJ1dHRvbkxhYmVsIGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IGlzU3ViY2xpcHBlZDogYm9vbGVhbiwgZXhwZWN0ZWRLZXk6IHN0cmluZyB9W10gPSBbXG4gICAgICAgIHsgaXNTdWJjbGlwcGVkOiBmYWxzZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLkFERF9ORVcuU1VCQ0xJUC5DT0xMRUNUSU9OJyB9LFxuICAgICAgICB7IGlzU3ViY2xpcHBlZDogdHJ1ZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLlVQREFURS5TVUJDTElQLkNPTExFQ1RJT04nIH1cbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBgcmV0dXJucyAke3Rlc3QuZXhwZWN0ZWRLZXl9YCArXG4gICAgICAgICAgYCBmb3IgYSBjb2xsZWN0aW9uIGFzc2V0IHdpdGggc3ViY2xpcHBpbmcgJHt0ZXN0LmlzU3ViY2xpcHBlZCA/ICcnIDogJ25vdCAnfWRlZmluZWRgO1xuXG4gICAgICAgIGl0KGRlc2NyaXB0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRlc3QuaXNTdWJjbGlwcGVkKSBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoeyB0aW1lU3RhcnQ6IDEwMywgdGltZUVuZDogMTAwMCB9IGFzIGFueSwgJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNvbGxlY3Rpb25TdWJjbGlwQnV0dG9uTGFiZWwpLnRvQmUodGVzdC5leHBlY3RlZEtleSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgndXBkYXRlQ2FydEJ1dHRvbkxhYmVsS2V5IGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IHF1b3RlVXNlcjogYm9vbGVhbiwgbWFya2VyczogYm9vbGVhbiwgZXhwZWN0ZWRLZXk6IHN0cmluZyB9W10gPSBbXG4gICAgICAgIHsgcXVvdGVVc2VyOiBmYWxzZSwgbWFya2VyczogZmFsc2UsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5VUERBVEUuQVNTRVQuQ0FSVCcgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IGZhbHNlLCBtYXJrZXJzOiB0cnVlLCBleHBlY3RlZEtleTogJ0FTU0VULkRFVEFJTC5CVVRUT04uVVBEQVRFLlNVQkNMSVAuQ0FSVCcgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IGZhbHNlLCBtYXJrZXJzOiBmYWxzZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLlVQREFURS5BU1NFVC5DQVJUJyB9LFxuICAgICAgICB7IHF1b3RlVXNlcjogZmFsc2UsIG1hcmtlcnM6IHRydWUsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5VUERBVEUuU1VCQ0xJUC5DQVJUJyB9LFxuXG4gICAgICAgIHsgcXVvdGVVc2VyOiB0cnVlLCBtYXJrZXJzOiBmYWxzZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLlVQREFURS5BU1NFVC5RVU9URScgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IHRydWUsIG1hcmtlcnM6IHRydWUsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5VUERBVEUuU1VCQ0xJUC5RVU9URScgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IHRydWUsIG1hcmtlcnM6IGZhbHNlLCBleHBlY3RlZEtleTogJ0FTU0VULkRFVEFJTC5CVVRUT04uVVBEQVRFLkFTU0VULlFVT1RFJyB9LFxuICAgICAgICB7IHF1b3RlVXNlcjogdHJ1ZSwgbWFya2VyczogdHJ1ZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLlVQREFURS5TVUJDTElQLlFVT1RFJyB9XG4gICAgICBdO1xuXG4gICAgICB0ZXN0cy5mb3JFYWNoKHRlc3QgPT4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbjogc3RyaW5nID0gYHJldHVybnMgJHt0ZXN0LmV4cGVjdGVkS2V5fWAgK1xuICAgICAgICAgIGAgZm9yIGEgdXNlciAke3Rlc3QucXVvdGVVc2VyID8gJ3dpdGgnIDogJ3dpdGhvdXQnfSBxdW90ZSBhZG1pbmlzdHJhdG9yIGNhcGFiaWxpbHR5IGFuZGAgK1xuICAgICAgICAgIGAgYW4gYXNzZXQgd2l0aCBtYXJrZXJzICR7dGVzdC5tYXJrZXJzID8gJycgOiAnbm90ICd9ZGVmaW5lZGA7XG5cbiAgICAgICAgaXQoZGVzY3JpcHRpb24sICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbiA9IHsgYWRtaW5pc3RlclF1b3RlczogKCkgPT4gdGVzdC5xdW90ZVVzZXIgfSBhcyBhbnk7XG4gICAgICAgICAgaWYgKHRlc3QubWFya2VycykgY29tcG9uZW50VW5kZXJUZXN0LnN1YmNsaXBNYXJrZXJzID0geyBpbjogeyBzb21lOiAnZnJhbWUnIH0sIG91dDogeyBzb21lOiAnZnJhbWUnIH0gfSBhcyBhbnk7XG5cbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnVwZGF0ZUNhcnRBc3NldEJ1dHRvbkxhYmVsS2V5KS50b0JlKHRlc3QuZXhwZWN0ZWRLZXkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3VwZGF0ZUNhcnQoKScsICgpID0+IHtcbiAgICAgIGl0KCdpcyBub3QgeWV0IGltcGxlbWVudGVkJywgKCkgPT4ge1xuICAgICAgICBleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NhbkFkZFRvQ2FydCBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBpdCgncmV0dXJucyBmYWxzZSB3aXRob3V0IGFkZFRvQ2FydCBjYXBhYmlsaXR5JywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbiA9IHsgYWRkVG9DYXJ0OiAoKSA9PiBmYWxzZSB9IGFzIGFueTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5jYW5BZGRUb0NhcnQpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIGZhbHNlIGZvciBhbiBhc3NldCB3aXRob3V0IFJpZ2h0cy5SZXByb2R1Y3Rpb24nLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBhZGRUb0NhcnQ6ICgpID0+IHRydWUgfSBhcyBhbnk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHByaW1hcnk6IFt7IG5hbWU6ICdzb21lLW5hbWUnLCB2YWx1ZTogJ3NvbWUgdmFsdWUnIH1dIH0gYXMgYW55LCAnc2VhcmNoJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZFRvQ2FydCkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgZmFsc2UgZm9yIGFuIGFzc2V0IHdpdGggYSBub24tYWNjZXB0YWJsZSBSaWdodHMuUmVwcm9kdWN0aW9uIHZhbHVlJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbiA9IHsgYWRkVG9DYXJ0OiAoKSA9PiB0cnVlIH0gYXMgYW55O1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnc29tZSB2YWx1ZScgfV0gfSBhcyBhbnksICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuQWRkVG9DYXJ0KS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJucyB0cnVlIGZvciBhbiBhc3NldCB3aXRoIGEgUmlnaHRzLlJlcHJvZHVjdGlvbiBmaWVsZCBvZiBcIlJveWFsdHkgRnJlZVwiIHRoYXQgaGFzIGEgcHJpY2UnLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBhZGRUb0NhcnQ6ICgpID0+IHRydWUgfSBhcyBhbnk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IGFzc2V0SWQ6IDEyMzQsIHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSb3lhbHR5IEZyZWUnIH1dIH0gYXMgYW55LCAnc2VhcmNoJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZFRvQ2FydCkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJucyB0cnVlIGZvciBhbiBhc3NldCB3aXRoIGEgUmlnaHRzLlJlcHJvZHVjdGlvbiBmaWVsZCBvZiBcIlJpZ2h0cyBNYW5hZ2VkXCIgdGhhdCBoYXMgYSBwcmljZScsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW4gPSB7IGFkZFRvQ2FydDogKCkgPT4gdHJ1ZSB9IGFzIGFueTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KFxuICAgICAgICAgIHsgYXNzZXRJZDogMTIzNCwgcHJpbWFyeTogW3sgbmFtZTogJ1JpZ2h0cy5SZXByb2R1Y3Rpb24nLCB2YWx1ZTogJ1JpZ2h0cyBNYW5hZ2VkJyB9XSB9IGFzIGFueSwgJ3NlYXJjaCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5jYW5BZGRUb0NhcnQpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgZmFsc2UgZm9yIGFuIGFzc2V0IHdpdGggYSBSaWdodHMuUmVwcm9kdWN0aW9uIGZpZWxkIG9mIFwiUmlnaHRzIE1hbmFnZWRcIiB0aGF0IGRvZXMgbm90IGhhdmUgYSBwcmljZScsICgpID0+IHtcbiAgICAgICAgbW9ja1N0b3JlLmNyZWF0ZVN0YXRlU2VjdGlvbignYXNzZXQnLCB7IGFjdGl2ZUFzc2V0OiB7IGFzc2V0SWQ6IDEyMzUgfSB9KTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW4gPSB7IGFkZFRvQ2FydDogKCkgPT4gdHJ1ZSB9IGFzIGFueTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KFxuICAgICAgICAgIHsgYXNzZXRJZDogMTIzNSwgcHJpbWFyeTogW3sgbmFtZTogJ1JpZ2h0cy5SZXByb2R1Y3Rpb24nLCB2YWx1ZTogJ1JpZ2h0cyBNYW5hZ2VkJyB9XSB9IGFzIGFueSwgJ3NlYXJjaCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5jYW5BZGRUb0NhcnQpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnYWRkVG9DYXJ0T3JRdW90ZUJ1dHRvbkxhYmVsS2V5IGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IHF1b3RlVXNlcjogYm9vbGVhbiwgdHlwZTogQXNzZXRUeXBlLCBtYXJrZXJzOiBib29sZWFuLCBleHBlY3RlZEtleTogc3RyaW5nIH1bXSA9IFtcbiAgICAgICAgeyBxdW90ZVVzZXI6IGZhbHNlLCB0eXBlOiAnc2VhcmNoJywgbWFya2VyczogZmFsc2UsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5BREQuQVNTRVQuQ0FSVCcgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IGZhbHNlLCB0eXBlOiAnc2VhcmNoJywgbWFya2VyczogdHJ1ZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLkFERC5TVUJDTElQLkNBUlQnIH0sXG4gICAgICAgIHsgcXVvdGVVc2VyOiBmYWxzZSwgdHlwZTogJ2NhcnQnLCBtYXJrZXJzOiBmYWxzZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLkFERF9ORVcuQVNTRVQuQ0FSVCcgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IGZhbHNlLCB0eXBlOiAnY2FydCcsIG1hcmtlcnM6IHRydWUsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5BRERfTkVXLlNVQkNMSVAuQ0FSVCcgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IGZhbHNlLCB0eXBlOiAncXVvdGVFZGl0JywgbWFya2VyczogZmFsc2UsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5BREQuQVNTRVQuQ0FSVCcgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IGZhbHNlLCB0eXBlOiAncXVvdGVFZGl0JywgbWFya2VyczogdHJ1ZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLkFERC5TVUJDTElQLkNBUlQnIH0sXG5cbiAgICAgICAgeyBxdW90ZVVzZXI6IHRydWUsIHR5cGU6ICdzZWFyY2gnLCBtYXJrZXJzOiBmYWxzZSwgZXhwZWN0ZWRLZXk6ICdBU1NFVC5ERVRBSUwuQlVUVE9OLkFERC5BU1NFVC5RVU9URScgfSxcbiAgICAgICAgeyBxdW90ZVVzZXI6IHRydWUsIHR5cGU6ICdzZWFyY2gnLCBtYXJrZXJzOiB0cnVlLCBleHBlY3RlZEtleTogJ0FTU0VULkRFVEFJTC5CVVRUT04uQURELlNVQkNMSVAuUVVPVEUnIH0sXG4gICAgICAgIHsgcXVvdGVVc2VyOiB0cnVlLCB0eXBlOiAnY2FydCcsIG1hcmtlcnM6IGZhbHNlLCBleHBlY3RlZEtleTogJ0FTU0VULkRFVEFJTC5CVVRUT04uQURELkFTU0VULlFVT1RFJyB9LFxuICAgICAgICB7IHF1b3RlVXNlcjogdHJ1ZSwgdHlwZTogJ2NhcnQnLCBtYXJrZXJzOiB0cnVlLCBleHBlY3RlZEtleTogJ0FTU0VULkRFVEFJTC5CVVRUT04uQURELlNVQkNMSVAuUVVPVEUnIH0sXG4gICAgICAgIHsgcXVvdGVVc2VyOiB0cnVlLCB0eXBlOiAncXVvdGVFZGl0JywgbWFya2VyczogZmFsc2UsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5BRERfTkVXLkFTU0VULlFVT1RFJyB9LFxuICAgICAgICB7IHF1b3RlVXNlcjogdHJ1ZSwgdHlwZTogJ3F1b3RlRWRpdCcsIG1hcmtlcnM6IHRydWUsIGV4cGVjdGVkS2V5OiAnQVNTRVQuREVUQUlMLkJVVFRPTi5BRERfTkVXLlNVQkNMSVAuUVVPVEUnIH1cbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uOiBzdHJpbmcgPSBgcmV0dXJucyAke3Rlc3QuZXhwZWN0ZWRLZXl9YCArXG4gICAgICAgICAgYCBmb3IgYSB1c2VyICR7dGVzdC5xdW90ZVVzZXIgPyAnd2l0aCcgOiAnd2l0aG91dCd9IHF1b3RlIGFkbWluaXN0cmF0b3IgY2FwYWJpbGlsdHkgYW5kYCArXG4gICAgICAgICAgYCBhbiBhc3NldCB3aXRoIHR5cGUgJyR7dGVzdC50eXBlfScgYW5kIG1hcmtlcnMgJHt0ZXN0Lm1hcmtlcnMgPyAnJyA6ICdub3QgJ31kZWZpbmVkYDtcblxuICAgICAgICBpdChkZXNjcmlwdGlvbiwgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBhZG1pbmlzdGVyUXVvdGVzOiAoKSA9PiB0ZXN0LnF1b3RlVXNlciB9IGFzIGFueTtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoe30gYXMgYW55LCB0ZXN0LnR5cGUpO1xuICAgICAgICAgIGlmICh0ZXN0Lm1hcmtlcnMpIGNvbXBvbmVudFVuZGVyVGVzdC5zdWJjbGlwTWFya2VycyA9IHsgaW46IHsgc29tZTogJ2ZyYW1lJyB9LCBvdXQ6IHsgc29tZTogJ2ZyYW1lJyB9IH0gYXMgYW55O1xuXG4gICAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5hZGRUb0NhcnRPclF1b3RlQnV0dG9uTGFiZWxLZXkpLnRvQmUodGVzdC5leHBlY3RlZEtleSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY2FuR29Ub1NlYXJjaERldGFpbHMgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IHsgYXNzZXRUeXBlOiBBc3NldFR5cGUsIGFjY2Vzc1BhdGg/OiBzdHJpbmcsIGV4cGVjdGVkUmVzdWx0OiBib29sZWFuIH1bXSA9IFtcbiAgICAgICAgeyBhc3NldFR5cGU6ICdjYXJ0JywgZXhwZWN0ZWRSZXN1bHQ6IHRydWUsIGFjY2Vzc1BhdGg6ICdDb250ZW50RmlsdGVyJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ2NhcnQnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UsIGFjY2Vzc1BhdGg6ICdTb21ldGhpbmdFbHNlJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ2NvbGxlY3Rpb24nLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSwgYWNjZXNzUGF0aDogJ0NvbnRlbnRGaWx0ZXInIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY29sbGVjdGlvbicsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSwgYWNjZXNzUGF0aDogJ1NvbWV0aGluZ0Vsc2UnIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnb3JkZXInLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSwgYWNjZXNzUGF0aDogJ0NvbnRlbnRGaWx0ZXInIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnb3JkZXInLCBleHBlY3RlZFJlc3VsdDogZmFsc2UsIGFjY2Vzc1BhdGg6ICdTb21ldGhpbmdFbHNlJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlRWRpdCcsIGV4cGVjdGVkUmVzdWx0OiB0cnVlLCBhY2Nlc3NQYXRoOiAnQ29udGVudEZpbHRlcicgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdxdW90ZUVkaXQnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UsIGFjY2Vzc1BhdGg6ICdTb21ldGhpbmdFbHNlJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlU2hvdycsIGV4cGVjdGVkUmVzdWx0OiB0cnVlLCBhY2Nlc3NQYXRoOiAnQ29udGVudEZpbHRlcicgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdxdW90ZVNob3cnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UsIGFjY2Vzc1BhdGg6ICdTb21ldGhpbmdFbHNlJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3NlYXJjaCcsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgXTtcblxuICAgICAgdGVzdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgICAgaXQoYHJldHVybnMgJHt0ZXN0LmV4cGVjdGVkUmVzdWx0fSBmb3IgYXNzZXQgdHlwZSAnJHt0ZXN0LmFzc2V0VHlwZX0nIGFuZCBhY2Nlc3MgcGF0aCAnJHt0ZXN0LmFjY2Vzc1BhdGh9J2AsICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoeyBhY2Nlc3NQYXRoOiB0ZXN0LmFjY2Vzc1BhdGggfSBhcyBhbnksIHRlc3QuYXNzZXRUeXBlKTtcblxuICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuR29Ub1NlYXJjaEFzc2V0RGV0YWlscykudG9CZSh0ZXN0LmV4cGVjdGVkUmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdnb1RvU2VhcmNoRGV0YWlscycsICgpID0+IHtcbiAgICAgIGl0KCdkaXNwYXRjaGVzIHRoZSBleHBlY3RlZCBhY3Rpb24gd2hlbiBzdWJjbGlwTWFya2VycyBhcmUgbm90IHNldCcsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3B5ID0gbW9ja1N0b3JlLmNyZWF0ZUFjdGlvbkZhY3RvcnlNZXRob2QoJ3JvdXRlcicsICdnb1RvU2VhcmNoQXNzZXREZXRhaWxzJyk7XG5cbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmdvVG9TZWFyY2hBc3NldERldGFpbHMoKTtcblxuICAgICAgICBtb2NrU3RvcmUuZXhwZWN0RGlzcGF0Y2hGb3Ioc3B5LCBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQuYXNzZXRJZCwgdW5kZWZpbmVkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnZGlzcGF0Y2hlcyB0aGUgZXhwZWN0ZWQgYWN0aW9uIHdoZW4gc3ViY2xpcE1hcmtlcnMgYXJlIHNldCcsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3B5ID0gbW9ja1N0b3JlLmNyZWF0ZUFjdGlvbkZhY3RvcnlNZXRob2QoJ3JvdXRlcicsICdnb1RvU2VhcmNoQXNzZXREZXRhaWxzJyk7XG5cbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0Lm9uUGxheWVyTWFya2VyQ2hhbmdlKHsgaW46IHsgc29tZTogJ2luRnJhbWUnIH0gYXMgYW55LCBvdXQ6IHsgc29tZTogJ291dEZyYW1lJyB9IGFzIGFueSB9KTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmdvVG9TZWFyY2hBc3NldERldGFpbHMoKTtcblxuICAgICAgICBtb2NrU3RvcmUuZXhwZWN0RGlzcGF0Y2hGb3IoXG4gICAgICAgICAgc3B5LFxuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldC5hc3NldElkLFxuICAgICAgICAgIHsgaW46IHsgc29tZTogJ2luRnJhbWUnIH0sIG91dDogeyBzb21lOiAnb3V0RnJhbWUnIH0gfVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY2FuQWRkVG9BY3RpdmVDb2xsZWN0aW9uIGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IGFzc2V0VHlwZTogQXNzZXRUeXBlLCBhc3NldElkSW5Db2xsZWN0aW9uOiBib29sZWFuLCBleHBlY3RlZFJlc3VsdDogYm9vbGVhbiB9W10gPSBbXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY2FydCcsIGFzc2V0SWRJbkNvbGxlY3Rpb246IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ2NvbGxlY3Rpb24nLCBhc3NldElkSW5Db2xsZWN0aW9uOiB0cnVlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdvcmRlcicsIGFzc2V0SWRJbkNvbGxlY3Rpb246IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlRWRpdCcsIGFzc2V0SWRJbkNvbGxlY3Rpb246IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlU2hvdycsIGFzc2V0SWRJbkNvbGxlY3Rpb246IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3NlYXJjaCcsIGFzc2V0SWRJbkNvbGxlY3Rpb246IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY2FydCcsIGFzc2V0SWRJbkNvbGxlY3Rpb246IGZhbHNlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdjb2xsZWN0aW9uJywgYXNzZXRJZEluQ29sbGVjdGlvbjogZmFsc2UsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnb3JkZXInLCBhc3NldElkSW5Db2xsZWN0aW9uOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVFZGl0JywgYXNzZXRJZEluQ29sbGVjdGlvbjogZmFsc2UsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlU2hvdycsIGFzc2V0SWRJbkNvbGxlY3Rpb246IGZhbHNlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdzZWFyY2gnLCBhc3NldElkSW5Db2xsZWN0aW9uOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfVxuICAgICAgXTtcblxuICAgICAgdGVzdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgICAgaXQoYHJldHVybnMgJHt0ZXN0LmV4cGVjdGVkUmVzdWx0fSBmb3IgYXNzZXQgdHlwZSAnJHt0ZXN0LmFzc2V0VHlwZX0nIGlmIHRoZSBhc3NldElkIFxuICAgICAgICBpcyAke3Rlc3QuYXNzZXRJZEluQ29sbGVjdGlvbiA/ICdpbmNsdWRlZCcgOiAnbm90J30gaW4gdGhlIGNvbGxlY3Rpb25gLCAoKSA9PiB7XG4gICAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYWN0aXZlQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoeyAuLi5hc3NldCwgYXNzZXRJZDogdGVzdC5hc3NldElkSW5Db2xsZWN0aW9uID8gMSA6IDk5OTkgfSwgdGVzdC5hc3NldFR5cGUpO1xuXG4gICAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZFRvQWN0aXZlQ29sbGVjdGlvbikudG9CZSh0ZXN0LmV4cGVjdGVkUmVzdWx0KTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NhbkFkZEFnYWluVG9BY3RpdmVDb2xsZWN0aW9uIGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IGFzc2V0VHlwZTogQXNzZXRUeXBlLCBtYXRjaGluZ1N1YmNsaXBNYXJrZXJzOiBib29sZWFuLCBleHBlY3RlZFJlc3VsdDogYm9vbGVhbiB9W10gPSBbXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY2FydCcsIG1hdGNoaW5nU3ViY2xpcE1hcmtlcnM6IGZhbHNlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdjb2xsZWN0aW9uJywgbWF0Y2hpbmdTdWJjbGlwTWFya2VyczogZmFsc2UsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnb3JkZXInLCBtYXRjaGluZ1N1YmNsaXBNYXJrZXJzOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVFZGl0JywgbWF0Y2hpbmdTdWJjbGlwTWFya2VyczogZmFsc2UsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlU2hvdycsIG1hdGNoaW5nU3ViY2xpcE1hcmtlcnM6IGZhbHNlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdzZWFyY2gnLCBtYXRjaGluZ1N1YmNsaXBNYXJrZXJzOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcblxuICAgICAgICB7IGFzc2V0VHlwZTogJ2NhcnQnLCBtYXRjaGluZ1N1YmNsaXBNYXJrZXJzOiB0cnVlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdjb2xsZWN0aW9uJywgbWF0Y2hpbmdTdWJjbGlwTWFya2VyczogdHJ1ZSwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdvcmRlcicsIG1hdGNoaW5nU3ViY2xpcE1hcmtlcnM6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlRWRpdCcsIG1hdGNoaW5nU3ViY2xpcE1hcmtlcnM6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlU2hvdycsIG1hdGNoaW5nU3ViY2xpcE1hcmtlcnM6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3NlYXJjaCcsIG1hdGNoaW5nU3ViY2xpcE1hcmtlcnM6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH1cbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGl0KGByZXR1cm5zICR7dGVzdC5leHBlY3RlZFJlc3VsdH0gZm9yIGFzc2V0IHR5cGUgJyR7dGVzdC5hc3NldFR5cGV9JyB3aGVuIHRoZSBjb2xsZWN0aW9uIGhhcyBhIHZlcnNpb24gb2YgdGhhdCBcbiAgICAgICAgYXNzZXQgJHt0ZXN0Lm1hdGNoaW5nU3ViY2xpcE1hcmtlcnMgPyAnd2l0aCcgOiAnd2l0aG91dCd9IG1hdGNoaW5nIHN1YmNsaXAgbWFya2Vyc2AsICgpID0+IHtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hY3RpdmVDb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICAgICAgeyAuLi5hc3NldCwgdGltZVN0YXJ0OiAxMjMsIHRpbWVFbmQ6IHRlc3QubWF0Y2hpbmdTdWJjbGlwTWFya2VycyA/IDEwMDAgOiA5OTk5IH0sXG4gICAgICAgICAgICAgIHRlc3QuYXNzZXRUeXBlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZEFnYWluVG9BY3RpdmVDb2xsZWN0aW9uKS50b0JlKHRlc3QuZXhwZWN0ZWRSZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIGZhbHNlIHdoZW4gdGhlIGNvbGxlY3Rpb24gZG9lcyBub3QgaGF2ZSBhIHZlcnNpb24gb2YgdGhhdCBhc3NldCcsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KHsgLi4uYXNzZXQsIGFzc2V0SWQ6IDk5OTkgfSwgJ2NvbGxlY3Rpb24nKTtcblxuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZEFnYWluVG9BY3RpdmVDb2xsZWN0aW9uKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJucyB0cnVlIGlmIHRoZSBjb2xsZWN0aW9uIGRvZXMgbm90IGhhdmUgdGhhdCBhc3NldCBidXQgdGhlIHR5cGUgaXMgY29sbGVjdGlvbiAmIHN1YmNsaXAgbWFya2VycyB3ZXJlIHNldCcsICgpID0+IHtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KHsgLi4uYXNzZXQsIGFzc2V0SWQ6IDk5OTkgfSwgJ2NvbGxlY3Rpb24nKTtcblxuICAgICAgICBjb25zdCBzdGFydEZyYW1lID0gbmV3IEZyYW1lKDI1KS5zZXRGcm9tRnJhbWVOdW1iZXIoMSk7XG4gICAgICAgIGNvbnN0IGVuZEZyYW1lID0gbmV3IEZyYW1lKDI1KS5zZXRGcm9tRnJhbWVOdW1iZXIoMik7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5vblBsYXllck1hcmtlckNoYW5nZSh7IGluOiBzdGFydEZyYW1lLCBvdXQ6IGVuZEZyYW1lIH0pO1xuXG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuQWRkQWdhaW5Ub0FjdGl2ZUNvbGxlY3Rpb24pLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYW5SZW1vdmVGcm9tQWN0aXZlQ29sbGVjdGlvbiBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0czogeyBhc3NldFR5cGU6IEFzc2V0VHlwZSwgbWF0Y2hpbmdVdWlkOiBib29sZWFuLCBleHBlY3RlZFJlc3VsdDogYm9vbGVhbiB9W10gPSBbXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY2FydCcsIG1hdGNoaW5nVXVpZDogdHJ1ZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY29sbGVjdGlvbicsIG1hdGNoaW5nVXVpZDogdHJ1ZSwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdvcmRlcicsIG1hdGNoaW5nVXVpZDogdHJ1ZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVFZGl0JywgbWF0Y2hpbmdVdWlkOiB0cnVlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdxdW90ZVNob3cnLCBtYXRjaGluZ1V1aWQ6IHRydWUsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3NlYXJjaCcsIG1hdGNoaW5nVXVpZDogdHJ1ZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG5cbiAgICAgICAgeyBhc3NldFR5cGU6ICdjYXJ0JywgbWF0Y2hpbmdVdWlkOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY29sbGVjdGlvbicsIG1hdGNoaW5nVXVpZDogZmFsc2UsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ29yZGVyJywgbWF0Y2hpbmdVdWlkOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVFZGl0JywgbWF0Y2hpbmdVdWlkOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVTaG93JywgbWF0Y2hpbmdVdWlkOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnc2VhcmNoJywgbWF0Y2hpbmdVdWlkOiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH1cbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGl0KGByZXR1cm5zICR7dGVzdC5leHBlY3RlZFJlc3VsdH0gZm9yIGFzc2V0IHR5cGUgJyR7dGVzdC5hc3NldFR5cGV9JyB3aGVuIHRoZSBjb2xsZWN0aW9uIGhhcyBhIHZlcnNpb24gb2YgdGhhdCBcbiAgICAgICAgYXNzZXQgJHt0ZXN0Lm1hdGNoaW5nVXVpZCA/ICd3aXRoJyA6ICd3aXRob3V0J30gbWF0Y2hpbmcgVVVJRGAsICgpID0+IHtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hY3RpdmVDb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldCh7IC4uLmFzc2V0LCB1dWlkOiB0ZXN0Lm1hdGNoaW5nVXVpZCA/ICdBQkNEJyA6ICdOT1BFJyB9LCB0ZXN0LmFzc2V0VHlwZSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuUmVtb3ZlRnJvbUFjdGl2ZUNvbGxlY3Rpb24pLnRvQmUodGVzdC5leHBlY3RlZFJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd1c2VyQ2FuRWRpdENvbGxlY3Rpb24gZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdCA9IG5ldyBBc3NldERldGFpbENvbXBvbmVudChtb2NrU3RvcmUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIGFuIG9ic2VydmFibGUgb2YgZmFsc2Ugd2hlbiB0aGUgY2FwYWJpbGl0eSByZXR1cm5zIGZhbHNlJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbiA9IHsgZWRpdENvbGxlY3Rpb246ICgpID0+IE9ic2VydmFibGUub2YoZmFsc2UpIH0gYXMgYW55O1xuICAgICAgICBsZXQgY2FuRWRpdDogYm9vbGVhbjtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW5FZGl0Q29sbGVjdGlvbi5zdWJzY3JpYmUoY2FuID0+IGNhbkVkaXQgPSBjYW4pO1xuICAgICAgICBleHBlY3QoY2FuRWRpdCkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgYW4gb2JzZXJ2YWJsZSBvZiB0cnVlIHdoZW4gdGhlIGNhcGFiaWxpdHkgcmV0dXJucyB0cnVlJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbiA9IHsgZWRpdENvbGxlY3Rpb246ICgpID0+IE9ic2VydmFibGUub2YodHJ1ZSkgfSBhcyBhbnk7XG4gICAgICAgIGxldCBjYW5FZGl0OiBib29sZWFuO1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbkVkaXRDb2xsZWN0aW9uLnN1YnNjcmliZShjYW4gPT4gY2FuRWRpdCA9IGNhbik7XG4gICAgICAgIGV4cGVjdChjYW5FZGl0KS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY2FuVXBkYXRlSW5BY3RpdmVDb2xsZWN0aW9uIGdldHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7XG4gICAgICAgIGFzc2V0VHlwZTogQXNzZXRUeXBlLCBtYXRjaGluZ1V1aWQ6IGJvb2xlYW4sIHN1YmNsaXBzU2V0OiBib29sZWFuLCBzdWJjbGlwc0V4YWN0OiBib29sZWFuLCBleHBlY3RlZFJlc3VsdDogYm9vbGVhblxuICAgICAgfVtdID0gW1xuICAgICAgICAgIHsgYXNzZXRUeXBlOiAnY2FydCcsIG1hdGNoaW5nVXVpZDogdHJ1ZSwgc3ViY2xpcHNTZXQ6IHRydWUsIHN1YmNsaXBzRXhhY3Q6IGZhbHNlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgICB7IGFzc2V0VHlwZTogJ29yZGVyJywgbWF0Y2hpbmdVdWlkOiB0cnVlLCBzdWJjbGlwc1NldDogZmFsc2UsIHN1YmNsaXBzRXhhY3Q6IGZhbHNlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlRWRpdCcsIG1hdGNoaW5nVXVpZDogZmFsc2UsIHN1YmNsaXBzU2V0OiB0cnVlLCBzdWJjbGlwc0V4YWN0OiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgICAgeyBhc3NldFR5cGU6ICdzZWFyY2gnLCBtYXRjaGluZ1V1aWQ6IGZhbHNlLCBzdWJjbGlwc1NldDogZmFsc2UsIHN1YmNsaXBzRXhhY3Q6IGZhbHNlLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgICB7IGFzc2V0VHlwZTogJ2NvbGxlY3Rpb24nLCBtYXRjaGluZ1V1aWQ6IGZhbHNlLCBzdWJjbGlwc1NldDogdHJ1ZSwgc3ViY2xpcHNFeGFjdDogZmFsc2UsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICAgIHsgYXNzZXRUeXBlOiAnY29sbGVjdGlvbicsIG1hdGNoaW5nVXVpZDogdHJ1ZSwgc3ViY2xpcHNTZXQ6IGZhbHNlLCBzdWJjbGlwc0V4YWN0OiBmYWxzZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgICAgeyBhc3NldFR5cGU6ICdjb2xsZWN0aW9uJywgbWF0Y2hpbmdVdWlkOiB0cnVlLCBzdWJjbGlwc1NldDogdHJ1ZSwgc3ViY2xpcHNFeGFjdDogZmFsc2UsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgICAgeyBhc3NldFR5cGU6ICdjb2xsZWN0aW9uJywgbWF0Y2hpbmdVdWlkOiB0cnVlLCBzdWJjbGlwc1NldDogdHJ1ZSwgc3ViY2xpcHNFeGFjdDogdHJ1ZSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH1cbiAgICAgICAgXTtcblxuICAgICAgdGVzdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgICAgaXQoYHJldHVybnMgJHt0ZXN0LmV4cGVjdGVkUmVzdWx0fSBmb3IgYXNzZXQgdHlwZSAnJHt0ZXN0LmFzc2V0VHlwZX0nIFxuICAgICAgICB3aGVuIHRoZSBjb2xsZWN0aW9uIGhhcyBhIHZlcnNpb24gb2YgdGhhdCBhc3NldCAke3Rlc3QubWF0Y2hpbmdVdWlkID8gJ3dpdGgnIDogJ3dpdGhvdXQnfSBtYXRjaGluZyBVVUlEIFxuICAgICAgICBhbmQgdGhlIHN1YmNsaXAgbWFya2VycyAke3Rlc3Quc3ViY2xpcHNTZXQgPyAnd2VyZScgOiAnd2VyZSBub3QnfSBjaGFuZ2VkXG4gICAgICAgICR7dGVzdC5zdWJjbGlwc0V4YWN0ICYmICcgdG8gbWF0Y2ggZXhpc3RpbmcgYXNzZXQgc3ViY2xpcHMnfWAsICgpID0+IHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uYXNzZXRzLml0ZW1zLnB1c2goeyBhc3NldElkOiAxLCB0aW1lU3RhcnQ6IDQwLCB0aW1lRW5kOiA4MCB9IGFzIEFzc2V0KTtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hY3RpdmVDb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5zdWJjbGlwTWFya2VycyA9IHRlc3Quc3ViY2xpcHNTZXQgPyB7XG4gICAgICAgICAgICAgIGluOiBuZXcgRnJhbWUoMjUpLnNldEZyb21GcmFtZU51bWJlcigxKSxcbiAgICAgICAgICAgICAgb3V0OiB0ZXN0LnN1YmNsaXBzRXhhY3QgPyBuZXcgRnJhbWUoMjUpLnNldEZyb21GcmFtZU51bWJlcigyKSA6IG5ldyBGcmFtZSgyNSkuc2V0RnJvbUZyYW1lTnVtYmVyKDMpXG4gICAgICAgICAgICB9IDogbnVsbDtcbiAgICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldCh7XG4gICAgICAgICAgICAgIC4uLmFzc2V0LFxuICAgICAgICAgICAgICB1dWlkOiB0ZXN0Lm1hdGNoaW5nVXVpZCA/ICdNTk9QJyA6ICdOT1BFJ1xuICAgICAgICAgICAgfSwgdGVzdC5hc3NldFR5cGUpO1xuICAgICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnNob3dBc3NldFNhdmVTdWJjbGlwID0gdGVzdC5zdWJjbGlwc1NldDtcbiAgICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuVXBkYXRlSW5BY3RpdmVDb2xsZWN0aW9uKS50b0JlKHRlc3QuZXhwZWN0ZWRSZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cblxuICAgIGRlc2NyaWJlKCdyb3V0ZXJMaW5rRm9yQXNzZXRQYXJlbnQoKScsICgpID0+IHtcbiAgICAgIGRlc2NyaWJlKCdyZXR1cm5zIHRoZSBjb3JyZWN0IHJvdXRlckxpbmsnLCAoKSA9PiB7XG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5uZ09uSW5pdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnZm9yIGEgY29sbGVjdGlvbiBhc3NldCcsICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQobW9ja0Fzc2V0LCAnY29sbGVjdGlvbicsIDEwMCk7XG5cbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnJvdXRlckxpbmtGb3JBc3NldFBhcmVudCkudG9FcXVhbChbJy9jb2xsZWN0aW9ucycsIDEwMCwgeyBpOiAxLCBuOiA1MCB9XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdmb3IgYSBxdW90ZSBlZGl0IGFzc2V0JywgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChtb2NrQXNzZXQsICdxdW90ZUVkaXQnKTtcblxuICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3Qucm91dGVyTGlua0ZvckFzc2V0UGFyZW50KS50b0VxdWFsKFsnL2FjdGl2ZS1xdW90ZSddKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2ZvciBhIHF1b3RlIHNob3cgYXNzZXQnLCAoKSA9PiB7XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KG1vY2tBc3NldCwgJ3F1b3RlU2hvdycsIDk5OSk7XG5cbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnJvdXRlckxpbmtGb3JBc3NldFBhcmVudCkudG9FcXVhbChbJy9xdW90ZXMnLCA5OTldKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2ZvciBhbiBvcmRlciBhc3NldCcsICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQobW9ja0Fzc2V0LCAnb3JkZXInLCAxMTEpO1xuXG4gICAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5yb3V0ZXJMaW5rRm9yQXNzZXRQYXJlbnQpLnRvRXF1YWwoWycvb3JkZXJzJywgMTExXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdmb3IgYSBjYXJ0IGFzc2V0JywgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChtb2NrQXNzZXQsICdjYXJ0Jyk7XG5cbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnJvdXRlckxpbmtGb3JBc3NldFBhcmVudCkudG9FcXVhbChbJy9jYXJ0J10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnZm9yIGEgc2VhcmNoIGFzc2V0JywgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5zZWFyY2hDb250ZXh0ID0geyBxOiAnY2F0JywgaTogMSwgbjogMTAwLCBzb3J0SWQ6IDEwIH07XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KG1vY2tBc3NldCwgJ3NlYXJjaCcpO1xuXG4gICAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5yb3V0ZXJMaW5rRm9yQXNzZXRQYXJlbnQpLnRvRXF1YWwoWycvc2VhcmNoJywgeyBxOiAnY2F0JywgaTogMSwgbjogMTAwLCBzb3J0SWQ6IDEwIH1dKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdicmVhZGNydW1iTGFiZWwgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgZGVzY3JpYmUoJ3JldHVybnMgdGhlIGNvcnJlY3QgdHJhbnNsYXRhYmxlIHN0cmluZycsICgpID0+IHtcbiAgICAgICAgaXQoJ2ZvciBhIGNvbGxlY3Rpb24nLCAoKSA9PiB7XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFjdGl2ZUNvbGxlY3Rpb24gPSB7IC4uLmNvbGxlY3Rpb24sIG5hbWU6ICdzb21lIGNvbGxlY3Rpb24nIH07XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KG1vY2tBc3NldCwgJ2NvbGxlY3Rpb24nLCAxMDApO1xuXG4gICAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5icmVhZGNydW1iTGFiZWwpLnRvRXF1YWwoWydzb21lIGNvbGxlY3Rpb24nLCAnJ10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnZm9yIGEgcXVvdGVTaG93JywgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChtb2NrQXNzZXQsICdxdW90ZVNob3cnLCAxMTEpO1xuXG4gICAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5icmVhZGNydW1iTGFiZWwpLnRvRXF1YWwoWydhc3NldC5kZXRhaWwuYnJlYWRjcnVtYl9xdW90ZVNob3cnLCAnMTExJ10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnZm9yIGEgb3JkZXInLCAoKSA9PiB7XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFzc2V0ID0gZW5oYW5jZUFzc2V0KG1vY2tBc3NldCwgJ29yZGVyJywgMzMzKTtcblxuICAgICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuYnJlYWRjcnVtYkxhYmVsKS50b0VxdWFsKFsnYXNzZXQuZGV0YWlsLmJyZWFkY3J1bWJfb3JkZXInLCAnMzMzJ10pO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgnZm9yIGFueSBvdGhlciB0eXBlIG9mIGFzc2V0IC0gJywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHRlc3RzOiB7IGFzc2V0VHlwZTogQXNzZXRUeXBlOyBleHBlY3RlZDogc3RyaW5nW10gfVtdID0gW1xuICAgICAgICAgICAgeyBhc3NldFR5cGU6ICdzZWFyY2gnLCBleHBlY3RlZDogWydhc3NldC5kZXRhaWwuYnJlYWRjcnVtYl9zZWFyY2gnLCAnJ10gfSxcbiAgICAgICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVFZGl0JywgZXhwZWN0ZWQ6IFsnYXNzZXQuZGV0YWlsLmJyZWFkY3J1bWJfcXVvdGVFZGl0JywgJyddIH0sXG4gICAgICAgICAgICB7IGFzc2V0VHlwZTogJ2NhcnQnLCBleHBlY3RlZDogWydhc3NldC5kZXRhaWwuYnJlYWRjcnVtYl9jYXJ0JywgJyddIH1cbiAgICAgICAgICBdO1xuXG4gICAgICAgICAgdGVzdHMuZm9yRWFjaCgodGVzdDogeyBhc3NldFR5cGU6IEFzc2V0VHlwZTsgZXhwZWN0ZWQ6IHN0cmluZ1tdIH0pID0+IHtcbiAgICAgICAgICAgIGl0KGAoJHt0ZXN0LmFzc2V0VHlwZX0pYCwgKCkgPT4ge1xuICAgICAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQobW9ja0Fzc2V0LCB0ZXN0LmFzc2V0VHlwZSk7XG5cbiAgICAgICAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5icmVhZGNydW1iTGFiZWwpLnRvRXF1YWwodGVzdC5leHBlY3RlZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd0b2dnbGVDb21tZW50c1Zpc2liaWxpdHkoKScsICgpID0+IHtcbiAgICAgIGl0KCd0b2dnbGVzIHRoZSBcXCdzaG93Q29tbWVudHNcXCcgYm9vbGVhbicsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5zaG93Q29tbWVudHMpLnRvQmUodW5kZWZpbmVkKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnRvZ2dsZUNvbW1lbnRzVmlzaWJpbGl0eSgpO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnNob3dDb21tZW50cykudG9CZSh0cnVlKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnRvZ2dsZUNvbW1lbnRzVmlzaWJpbGl0eSgpO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnNob3dDb21tZW50cykudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd1c2VyQ2FuQWRkQ29tbWVudHMgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgZGVzY3JpYmUoJ3doZW4gdGhlIGNvbW1lbnRQYXJlbnRPYmplY3RcXCdzIG9iamVjdFR5cGUgaXMgXFwnY29sbGVjdGlvblxcJycsICgpID0+IHtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmNvbW1lbnRQYXJlbnRPYmplY3QgPSB7XG4gICAgICAgICAgICBvYmplY3RJZDogMSxcbiAgICAgICAgICAgIG9iamVjdFR5cGU6ICdjb2xsZWN0aW9uJ1xuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdyZXR1cm5zIGFuIG9ic2VydmFibGUgb2YgdHJ1ZSBpZiB0aGUgdXNlciBjYW4gZWRpdCB0aGUgY29sbGVjdGlvbicsICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbiA9IHtcbiAgICAgICAgICAgIGVkaXRDb2xsZWN0aW9uOiBqYXNtaW5lLmNyZWF0ZVNweSgnZWRpdENvbGxlY3Rpb24nKS5hbmQucmV0dXJuVmFsdWUoT2JzZXJ2YWJsZS5vZih0cnVlKSlcbiAgICAgICAgICB9IGFzIGFueTtcblxuICAgICAgICAgIGxldCByZXN1bHQ6IGJvb2xlYW47XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW5BZGRDb21tZW50cy50YWtlKDEpLnN1YnNjcmliZShyZXMgPT4gcmVzdWx0ID0gcmVzKTtcblxuICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdyZXR1cm5zIGFuIG9ic2VydmFibGUgb2YgZmFsc2UgaWYgdGhlIHVzZXIgY2FuXFwndCBlZGl0IHRoZSBjb2xsZWN0aW9uJywgKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0ge1xuICAgICAgICAgICAgZWRpdENvbGxlY3Rpb246IGphc21pbmUuY3JlYXRlU3B5KCdlZGl0Q29sbGVjdGlvbicpLmFuZC5yZXR1cm5WYWx1ZShPYnNlcnZhYmxlLm9mKGZhbHNlKSlcbiAgICAgICAgICB9IGFzIGFueTtcblxuICAgICAgICAgIGxldCByZXN1bHQ6IGJvb2xlYW47XG4gICAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVzZXJDYW5BZGRDb21tZW50cy50YWtlKDEpLnN1YnNjcmliZShyZXMgPT4gcmVzdWx0ID0gcmVzKTtcblxuICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgnd2hlbiB0aGUgY29tbWVudFBhcmVudE9iamVjdFxcJ3Mgb2JqZWN0VHlwZSBpc25cXCd0IFxcJ2NvbGxlY3Rpb25cXCcnLCAoKSA9PiB7XG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5jb21tZW50UGFyZW50T2JqZWN0ID0ge1xuICAgICAgICAgICAgb2JqZWN0SWQ6IDEsXG4gICAgICAgICAgICBvYmplY3RUeXBlOiAnY2FydCdcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgncmV0dXJucyBhbiBvYnNlcnZhYmxlIG9mIHRydWUnLCAoKSA9PiB7XG4gICAgICAgICAgbGV0IHJlc3VsdDogYm9vbGVhbjtcblxuICAgICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuQWRkQ29tbWVudHMudGFrZSgxKS5zdWJzY3JpYmUocmVzID0+IHJlc3VsdCA9IHJlcyk7XG5cbiAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NvbW1lbnRDb3VudCBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBpdCgnc2VsZWN0cyB0aGUgcmlnaHQgcGFydCBvZiB0aGUgc3RvcmUnLCAoKSA9PiB7XG4gICAgICAgIG1vY2tTdG9yZS5jcmVhdGVTdGF0ZVNlY3Rpb24oJ2NvbW1lbnQnLCB7IGFjdGl2ZU9iamVjdFR5cGU6ICdsaW5lSXRlbScsIGxpbmVJdGVtOiB7IHBhZ2luYXRpb246IHsgdG90YWxDb3VudDogMTAgfSB9IH0pO1xuICAgICAgICBsZXQgY291bnQ6IG51bWJlcjtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmNvbW1lbnRDb3VudC50YWtlKDEpLnN1YnNjcmliZShjID0+IGNvdW50ID0gYyk7XG4gICAgICAgIGV4cGVjdChjb3VudCkudG9CZSgxMCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd1cGRhdGVDYXJ0KCknLCAoKSA9PiB7XG4gICAgICBpdCgnZW1pdHMgdGhlIHJpZ2h0IGV2ZW50JywgKCkgPT4ge1xuICAgICAgICBzcHlPbihjb21wb25lbnRVbmRlclRlc3QudXBkYXRlQXNzZXRMaW5lSXRlbSwgJ2VtaXQnKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnVwZGF0ZUNhcnRBc3NldCgpO1xuXG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QudXBkYXRlQXNzZXRMaW5lSXRlbS5lbWl0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdzaG93RG93bmxvYWRCdXR0b24oKScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RzOiB7IGFzc2V0VHlwZTogQXNzZXRUeXBlLCBleHBlY3RlZFJlc3VsdDogYm9vbGVhbiwgYWNjZXNzUGF0aDogc3RyaW5nIH1bXSA9IFtcbiAgICAgICAgeyBhc3NldFR5cGU6ICdjYXJ0JywgZXhwZWN0ZWRSZXN1bHQ6IHRydWUsIGFjY2Vzc1BhdGg6ICdDb250ZW50RmlsdGVyJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ2NhcnQnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UsIGFjY2Vzc1BhdGg6ICdTb21ldGhpbmdFbHNlJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ2NvbGxlY3Rpb24nLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSwgYWNjZXNzUGF0aDogJ0NvbnRlbnRGaWx0ZXInIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAnY29sbGVjdGlvbicsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSwgYWNjZXNzUGF0aDogJ1NvbWV0aGluZ0Vsc2UnIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVFZGl0JywgZXhwZWN0ZWRSZXN1bHQ6IHRydWUsIGFjY2Vzc1BhdGg6ICdDb250ZW50RmlsdGVyJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3F1b3RlRWRpdCcsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSwgYWNjZXNzUGF0aDogJ1NvbWV0aGluZ0Vsc2UnIH0sXG4gICAgICAgIHsgYXNzZXRUeXBlOiAncXVvdGVTaG93JywgZXhwZWN0ZWRSZXN1bHQ6IHRydWUsIGFjY2Vzc1BhdGg6ICdDb250ZW50RmlsdGVyJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ3NlYXJjaCcsIGV4cGVjdGVkUmVzdWx0OiB0cnVlLCBhY2Nlc3NQYXRoOiAnQ29udGVudEZpbHRlcicgfSxcbiAgICAgICAgeyBhc3NldFR5cGU6ICdzZWFyY2gnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UsIGFjY2Vzc1BhdGg6ICdTb21ldGhpbmdFbHNlJyB9LFxuICAgICAgICB7IGFzc2V0VHlwZTogJ29yZGVyJywgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlLCBhY2Nlc3NQYXRoOiAnQ29udGVudEZpbHRlcicgfVxuICAgICAgXTtcblxuICAgICAgdGVzdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgICAgaXQoYHJldHVybnMgJHt0ZXN0LmV4cGVjdGVkUmVzdWx0fSBmb3IgYXNzZXQgdHlwZSAnJHt0ZXN0LmFzc2V0VHlwZX0nIGFuZCBhY2Nlc3MgcGF0aCAnJHt0ZXN0LmFjY2Vzc1BhdGh9J2AsICgpID0+IHtcbiAgICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoeyBhY2Nlc3NQYXRoOiB0ZXN0LmFjY2Vzc1BhdGggfSBhcyBhbnksIHRlc3QuYXNzZXRUeXBlKTtcbiAgICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LnNob3dEb3dubG9hZEJ1dHRvbikudG9CZSh0ZXN0LmV4cGVjdGVkUmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdhc3NldE5hbWUgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgaXQoJ3JldHVybnMgdGhlIG5hbWUgZm9yIGFuIGFzc2V0JywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29tbW9uOiBbXG4gICAgICAgICAgICAgIHsgbmFtZTogJ2lkJywgdmFsdWU6ICczMzMyMzY2NicgfSxcbiAgICAgICAgICAgICAgeyBuYW1lOiAnZmFtaWx5JywgdmFsdWU6ICd3ZWJzaXRlJyB9LFxuICAgICAgICAgICAgICB7IG5hbWU6ICdpbmdlc3RlZCcsIHZhbHVlOiAnMjAxNC0wMS0zMCAwMDowMDowMC4wJyB9LFxuICAgICAgICAgICAgICB7IG5hbWU6ICdsaXZlRGF0ZScsIHZhbHVlOiAnMjAxNC0wMi0wMyAwMDowMDowMC4wJyB9LFxuICAgICAgICAgICAgICB7IG5hbWU6ICdtb2RpZmllZCcsIHZhbHVlOiAnMjAxNi0wOC0zMCAwNzoxNDowNy4wJyB9LFxuICAgICAgICAgICAgICB7IG5hbWU6ICduYW1lJywgdmFsdWU6ICcxRkwwMDFfMDMzJyB9XVxuICAgICAgICAgIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldE5hbWUpLnRvQmUoJzFGTDAwMV8wMzMnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NhbkFkZFRvRGlmZmVyZW50Q29sbGVjdGlvbiBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBpdCgncmV0dXJuIHRydWUgaWYgdXNlciBjYW4gaGF2ZSBjb2xsZWN0aW9ucyBhbmQgYXNzZXQgdHlwZSBpcyBjb2xsZWN0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnUmlnaHRzIE1hbmFnZWQnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdjb2xsZWN0aW9uJ1xuICAgICAgICApO1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QudXNlckNhbiA9IHsgaGF2ZUNvbGxlY3Rpb25zOiAoKSA9PiB0cnVlIH0gYXMgYW55O1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZFRvRGlmZmVyZW50Q29sbGVjdGlvbikudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJuIGZhbHNlIGlmIHVzZXIgY2FuIG5vdCBoYXZlIGNvbGxlY3Rpb25zIGFuZCBhc3NldCB0eXBlIGlzIGNvbGxlY3Rpb24nLCAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC5hc3NldCA9IGVuaGFuY2VBc3NldChcbiAgICAgICAgICB7IHByaW1hcnk6IFt7IG5hbWU6ICdSaWdodHMuUmVwcm9kdWN0aW9uJywgdmFsdWU6ICdSaWdodHMgTWFuYWdlZCcgfV0gfSBhcyBhbnksXG4gICAgICAgICAgJ2NvbGxlY3Rpb24nXG4gICAgICAgICk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBoYXZlQ29sbGVjdGlvbnM6ICgpID0+IGZhbHNlIH0gYXMgYW55O1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZFRvRGlmZmVyZW50Q29sbGVjdGlvbikudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybiBmYWxzZSBpZiB1c2VyIGNhbiBoYXZlIGNvbGxlY3Rpb25zIGFuZCBhc3NldCB0eXBlIGlzIG5vdCBjb2xsZWN0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnUmlnaHRzIE1hbmFnZWQnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBoYXZlQ29sbGVjdGlvbnM6ICgpID0+IHRydWUgfSBhcyBhbnk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnRVbmRlclRlc3QuY2FuQWRkVG9EaWZmZXJlbnRDb2xsZWN0aW9uKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJuIGZhbHNlIGlmIHVzZXIgY2FuIG5vdCBoYXZlIGNvbGxlY3Rpb25zIGFuZCBhc3NldCB0eXBlIGlzIG5vdCBjb2xsZWN0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3QuYXNzZXQgPSBlbmhhbmNlQXNzZXQoXG4gICAgICAgICAgeyBwcmltYXJ5OiBbeyBuYW1lOiAnUmlnaHRzLlJlcHJvZHVjdGlvbicsIHZhbHVlOiAnUmlnaHRzIE1hbmFnZWQnIH1dIH0gYXMgYW55LFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICAgIGNvbXBvbmVudFVuZGVyVGVzdC51c2VyQ2FuID0geyBoYXZlQ29sbGVjdGlvbnM6ICgpID0+IGZhbHNlIH0gYXMgYW55O1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNhbkFkZFRvRGlmZmVyZW50Q29sbGVjdGlvbikudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdhZGRUb0RpZmZlcmVudENvbGxlY3Rpb24oKScsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgZW1pdCB0aGUgb25BZGR0b0RpZmZlcmVudENvbGxlY3Rpb24gZXZlbnQnLCAoKSA9PiB7XG4gICAgICAgIHNweU9uKGNvbXBvbmVudFVuZGVyVGVzdC5vbkFkZHRvRGlmZmVyZW50Q29sbGVjdGlvbiwgJ2VtaXQnKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LmFkZFRvRGlmZmVyZW50Q29sbGVjdGlvbigpO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0Lm9uQWRkdG9EaWZmZXJlbnRDb2xsZWN0aW9uLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ29uQ3JlYXRlU2hhcmVEaWFsb2coKScsICgpID0+IHtcbiAgICAgIGl0KCdlbWl0cyB0aGUgcmlnaHQgZXZlbnQnLCAoKSA9PiB7XG4gICAgICAgIHNweU9uKGNvbXBvbmVudFVuZGVyVGVzdC5jcmVhdGVTaGFyZURpYWxvZywgJ2VtaXQnKTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0LnN1YmNsaXBNYXJrZXJzID0gJ3NvbWUgbWFya2VycycgYXMgYW55O1xuICAgICAgICBjb21wb25lbnRVbmRlclRlc3Quc2hhcmVGb3JtRmllbGRzID0gJ3NvbWUgZm9ybSBmaWVsZHMnIGFzIGFueTtcbiAgICAgICAgY29tcG9uZW50VW5kZXJUZXN0Lm9uQ3JlYXRlU2hhcmVEaWFsb2coKTtcblxuICAgICAgICBleHBlY3QoY29tcG9uZW50VW5kZXJUZXN0LmNyZWF0ZVNoYXJlRGlhbG9nLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICBlbmhhbmNlZEFzc2V0OiB7XG4gICAgICAgICAgICBhc3NldElkOiAxLCBjbGlwRGF0YTogW10sIGNsaXBUaHVtYm5haWxVcmw6ICdjbGlwVXJsLmpwZycsIGNsaXBVcmw6ICdjbGlwVXJsJywgdHJhbnNjb2RlVGFyZ2V0czogdHJhbnNjb2RlVGFyZ2V0c1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3ViY2xpcE1hcmtlcnM6ICdzb21lIG1hcmtlcnMnLFxuICAgICAgICAgIGZvcm1GaWVsZHM6ICdzb21lIGZvcm0gZmllbGRzJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gIH0pO1xufVxuIl19
