"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var frame_1 = require("./frame");
var timecodeFormat_1 = require("./timecodeFormat");
var timecodeBase_1 = require("./timecodeBase");
var customMatchers_1 = require("./support/customMatchers");
function main() {
    describe('Frame', function () {
        beforeEach(function () {
            jasmine.addMatchers(customMatchers_1.customMatchers);
        });
        describe('constructor', function () {
            it('sets 24 fps as 24 fps', function () {
                expect(new frame_1.Frame(24).framesPerSecond).toEqual(24);
            });
            it('sets 23.976 fps as 23.976 fps', function () {
                expect(new frame_1.Frame(23.976).framesPerSecond).toEqual(23.976);
            });
            it('saves 23.98 fps as 23.976 fps', function () {
                expect(new frame_1.Frame(23.98).framesPerSecond).toEqual(23.976);
            });
            it('sets source-based frame offset from a number', function () {
                expect(new frame_1.Frame(23.976, 42).sourceBasedOffsetFrames).toEqual(42);
            });
            it('sets source-based frame offset from a string', function () {
                expect(new frame_1.Frame(23.976, '01:00:00:00').sourceBasedOffsetFrames).toEqual(86314);
            });
            it('sets source-based frame offset as zero when not specified', function () {
                expect(new frame_1.Frame(23.976).sourceBasedOffsetFrames).toEqual(0);
            });
        });
        describe('#setFromFrameNumber', function () {
            it('returns the object', function () {
                var frame = new frame_1.Frame(23.976);
                expect(frame.setFromFrameNumber(4747)).toEqual(frame);
            });
            it('sets from a frame number', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(4747).asFrameNumber()).toEqual(4747);
            });
            it('sets from a stream-based frame number with a source-based offset', function () {
                expect(new frame_1.Frame(23.976, 100).setFromFrameNumber(4747, timecodeBase_1.TimecodeBase.STREAM_BASED).asFrameNumber()).toEqual(4747);
            });
            it('sets from a source-based frame number with a source-based offset', function () {
                expect(new frame_1.Frame(23.976, 100).setFromFrameNumber(4847, timecodeBase_1.TimecodeBase.SOURCE_BASED).asFrameNumber()).toEqual(4747);
            });
        });
        describe('#setFromSeconds', function () {
            it('returns the object', function () {
                var frame;
                frame = new frame_1.Frame(23.976);
                expect(frame.setFromSeconds(47)).toEqual(frame);
            });
            it('sets from seconds', function () {
                expect(new frame_1.Frame(23.976).setFromSeconds(47).asFrameNumber()).toEqual(1127);
            });
            it('sets from stream-based seconds with a source-based offset', function () {
                expect(new frame_1.Frame(23.976, 100).setFromSeconds(47, timecodeBase_1.TimecodeBase.STREAM_BASED).asFrameNumber()).toEqual(1127);
            });
            it('sets from source-based seconds with a source-based offset', function () {
                expect(new frame_1.Frame(23.976, 100).setFromSeconds(47, timecodeBase_1.TimecodeBase.SOURCE_BASED).asFrameNumber()).toEqual(1027);
            });
        });
        describe('#asSeconds', function () {
            it('can round to 3 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asSeconds(3)).toEqual(0.042);
            });
            it('can round to 4 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asSeconds(4)).toEqual(0.0417);
            });
            it('can round to 0 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asSeconds(0)).toEqual(0);
            });
            it('can be told to not round at all by specifying -1', function () {
                expect((new frame_1.Frame(23.976).setFromFrameNumber(1).asSeconds(-1) + '').length).toBeGreaterThan(10);
            });
            it('defaults to not rounding at all', function () {
                expect((new frame_1.Frame(23.976).setFromFrameNumber(1).asSeconds() + '').length).toBeGreaterThan(10);
            });
        });
        describe('#asMilliseconds', function () {
            it('can round to 0 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds(0)).toEqual(42);
            });
            it('can round to 1 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds(1)).toEqual(41.7);
            });
            it('can round to 2 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds(2)).toEqual(41.71);
            });
            it('can round to 3 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds(3)).toEqual(41.708);
            });
            it('can round to 4 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds(4)).toEqual(41.7084);
            });
            it('can round to 5 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds(5)).toEqual(41.70838);
            });
            it('can round to 6 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds(6)).toEqual(41.708375);
            });
            it('defaults to 0 digits', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asMilliseconds()).toEqual(42);
            });
            describe('with regression data from real life', function () {
                it('handles 00:00:02;00 at 29.97fps', function () {
                    expect(new frame_1.Frame(29.97).setFromString('00:00:02;00', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION).asMilliseconds())
                        .toEqual(2002);
                });
                it('handles 00:00:02;01 at 29.97fps', function () {
                    expect(new frame_1.Frame(29.97).setFromString('00:00:02;01', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION).asMilliseconds())
                        .toEqual(2035);
                });
                it('handles 00:00:08;02 at 29.97fps', function () {
                    expect(new frame_1.Frame(29.97).setFromString('00:00:08;02', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION).asMilliseconds())
                        .toEqual(8075);
                });
                it('handles 00:00:08;03 at 29.97fps', function () {
                    expect(new frame_1.Frame(29.97).setFromString('00:00:08;03', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION).asMilliseconds())
                        .toEqual(8108);
                });
            });
        });
        it('converts frame to seconds', function () {
            expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asSeconds()).toBeCloseTo(0.042, 3);
        });
        it('converts seconds to frame', function () {
            expect(new frame_1.Frame(23.976).setFromSeconds(0.041).asFrameNumber()).toEqual(1);
        });
        describe('round tripping', function () {
            var maxFrameNumberToTest = 1000;
            describe('via integral seconds', function () {
                it('works', function () {
                    Object.keys(Array(maxFrameNumberToTest)).forEach(function (frameNumberAsString) {
                        var frameNumber = Number(frameNumberAsString);
                        var frame = new frame_1.Frame(23.976).setFromFrameNumber(frameNumber);
                        var seconds = frame.asSeconds();
                        expect(frame.setFromSeconds(seconds).asFrameNumber()).toBe(frameNumber);
                    });
                });
            });
            describe('via strings', function () {
                it('works', function () {
                    var frameRates = [29.97, 59.94, 23.976];
                    var formats = [
                        timecodeFormat_1.TimecodeFormat.NONDROPFRAME,
                        timecodeFormat_1.TimecodeFormat.DROPFRAME,
                        timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION,
                        timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION,
                        timecodeFormat_1.TimecodeFormat.SECONDS,
                        timecodeFormat_1.TimecodeFormat.FRAMECOUNT
                    ];
                    frameRates.forEach(function (framesPerSecond) {
                        var frame = new frame_1.Frame(framesPerSecond);
                        formats.forEach(function (format) {
                            Object.keys(Array(maxFrameNumberToTest)).forEach(function (frameNumberAsString) {
                                var frameNumber = Number(frameNumberAsString);
                                expect(frame).toRoundTripViaStringForFrameNumber(frameNumber, format);
                            });
                        });
                    });
                });
            });
        });
        describe('strings', function () {
            it('converts a frame to a frame string', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asString(timecodeFormat_1.TimecodeFormat.FRAMECOUNT)).toEqual('1');
            });
            it('converts a frame to a seconds string', function () {
                expect(new frame_1.Frame(23.976).setFromFrameNumber(1).asString(timecodeFormat_1.TimecodeFormat.SECONDS)).toEqual('0.042');
            });
            it('converts a frame to a nondropframe string', function () {
                expect(new frame_1.Frame(29.97).setFromFrameNumber(30).asString(timecodeFormat_1.TimecodeFormat.NONDROPFRAME)).toEqual('00:00:01:00');
            });
        });
        describe('addFrames', function () {
            it('can add frames', function () {
                expect(new frame_1.Frame(29.97).setFromFrameNumber(47).addFrames(100).asFrameNumber()).toEqual(147);
            });
        });
        describe('minimal timecode', function () {
            describe('conversion to a simple timecode:', function () {
                it('works with s format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23', timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)).toEqual('00:00:23;00');
                });
                it('works with s;f format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23;17', timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)).toEqual('00:00:23;17');
                });
                it('works with m:s format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23:17', timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)).toEqual('00:23:17;00');
                });
                it('works with m:s;f format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23:17;05', timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)).toEqual('00:23:17;05');
                });
                it('works with h:m:s format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23:17:05', timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)).toEqual('23:17:05;00');
                });
                it('works with h:m:s;f format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23:17:05;12', timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)).toEqual('23:17:05;12');
                });
                it('works with h:m:s:f format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23:17:05:12', timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)).toEqual('23:17:05;12');
                });
            });
        });
        describe('simple timecode', function () {
            describe('conversion to a minimal timecode:', function () {
                it('works with s format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('00:00:23:00', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)).toEqual('23');
                });
                it('works with s;f format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('00:00:23:17', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)).toEqual('23;17');
                });
                it('works with m:s format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('00:23:17:00', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)).toEqual('23:17');
                });
                it('works with m:s;f format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('00:23:17:05', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)).toEqual('23:17;05');
                });
                it('works with h:m:s format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23:17:05:00', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)).toEqual('23:17:05');
                });
                it('works with h:m:s;f format', function () {
                    expect(new frame_1.Frame(23.976)
                        .setFromString('23:17:05:12', timecodeFormat_1.TimecodeFormat.SIMPLE_TIME_CONVERSION)
                        .asString(timecodeFormat_1.TimecodeFormat.MINIMAL_TIME_CONVERSION)).toEqual('23:17:05;12');
                });
            });
        });
    });
}
exports.main = main;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zaGFyZWQvbW9kdWxlcy93YXplZS1mcmFtZS1mb3JtYXR0ZXIvZnJhbWUuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlDQUFnQztBQUNoQyxtREFBa0Q7QUFDbEQsK0NBQThDO0FBQzlDLDJEQUEwRDtBQUUxRDtJQUNFLFFBQVEsQ0FBQyxPQUFPLEVBQUU7UUFDaEIsVUFBVSxDQUFDO1lBQ1QsT0FBTyxDQUFDLFdBQVcsQ0FBQywrQkFBYyxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxRQUFRLENBQUMsYUFBYSxFQUFFO1lBQ3RCLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRTtnQkFDMUIsTUFBTSxDQUFDLElBQUksYUFBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNwRCxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQywrQkFBK0IsRUFBRTtnQkFDbEMsTUFBTSxDQUFDLElBQUksYUFBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM1RCxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQywrQkFBK0IsRUFBRTtnQkFDbEMsTUFBTSxDQUFDLElBQUksYUFBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMzRCxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRTtnQkFDakQsTUFBTSxDQUFDLElBQUksYUFBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNwRSxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRTtnQkFDakQsTUFBTSxDQUFDLElBQUksYUFBSyxD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LENBQUMseUJBQXlCLEVBQUU7b0JBQzVCLE1BQU0sQ0FBQyxJQUFJLGFBQUssQ0FBQyxNQUFNLENBQUM7eUJBQ3JCLGFBQWEsQ0FBQyxhQUFhLEVBQUUsK0JBQWMsQ0FBQyxzQkFBc0IsQ0FBQzt5QkFDbkUsUUFBUSxDQUFDLCtCQUFjLENBQUMsdUJBQXVCLENBQUMsQ0FDbEQsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ3hCLENBQUMsQ0FBQyxDQUFDO2dCQUVILEVBQUUsQ0FBQyx5QkFBeUIsRUFBRTtvQkFDNUIsTUFBTSxDQUFDLElBQUksYUFBSyxDQUFDLE1BQU0sQ0FBQzt5QkFDckIsYUFBYSxDQUFDLGFBQWEsRUFBRSwrQkFBYyxDQUFDLHNCQUFzQixDQUFDO3lCQUNuRSxRQUFRLENBQUMsK0JBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUNsRCxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDeEIsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsRUFBRSxDQUFDLDJCQUEyQixFQUFFO29CQUM5QixNQUFNLENBQUMsSUFBSSxhQUFLLENBQUMsTUFBTSxDQUFDO3lCQUNyQixhQUFhLENBQUMsYUFBYSxFQUFFLCtCQUFjLENBQUMsc0JBQXNCLENBQUM7eUJBQ25FLFFBQVEsQ0FBQywrQkFBYyxDQUFDLHVCQUF1QixDQUFDLENBQ2xELENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dCQUMzQixDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUEvVEQsb0JBK1RDIiwiZmlsZSI6ImFwcC9zaGFyZWQvbW9kdWxlcy93YXplZS1mcmFtZS1mb3JtYXR0ZXIvZnJhbWUuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYW1lIH0gZnJvbSAnLi9mcmFtZSc7XG5pbXBvcnQgeyBUaW1lY29kZUZvcm1hdCB9IGZyb20gJy4vdGltZWNvZGVGb3JtYXQnO1xuaW1wb3J0IHsgVGltZWNvZGVCYXNlIH0gZnJvbSAnLi90aW1lY29kZUJhc2UnO1xuaW1wb3J0IHsgY3VzdG9tTWF0Y2hlcnMgfSBmcm9tICcuL3N1cHBvcnQvY3VzdG9tTWF0Y2hlcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFpbigpIHtcbiAgZGVzY3JpYmUoJ0ZyYW1lJywgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgamFzbWluZS5hZGRNYXRjaGVycyhjdXN0b21NYXRjaGVycyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY29uc3RydWN0b3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnc2V0cyAyNCBmcHMgYXMgMjQgZnBzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDI0KS5mcmFtZXNQZXJTZWNvbmQpLnRvRXF1YWwoMjQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzZXRzIDIzLjk3NiBmcHMgYXMgMjMuOTc2IGZwcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLmZyYW1lc1BlclNlY29uZCkudG9FcXVhbCgyMy45NzYpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzYXZlcyAyMy45OCBmcHMgYXMgMjMuOTc2IGZwcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45OCkuZnJhbWVzUGVyU2Vjb25kKS50b0VxdWFsKDIzLjk3Nik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3NldHMgc291cmNlLWJhc2VkIGZyYW1lIG9mZnNldCBmcm9tIGEgbnVtYmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NiwgNDIpLnNvdXJjZUJhc2VkT2Zmc2V0RnJhbWVzKS50b0VxdWFsKDQyKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2V0cyBzb3VyY2UtYmFzZWQgZnJhbWUgb2Zmc2V0IGZyb20gYSBzdHJpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2LCAnMDE6MDA6MDA6MDAnKS5zb3VyY2VCYXNlZE9mZnNldEZyYW1lcykudG9FcXVhbCg4NjMxNCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3NldHMgc291cmNlLWJhc2VkIGZyYW1lIG9mZnNldCBhcyB6ZXJvIHdoZW4gbm90IHNwZWNpZmllZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLnNvdXJjZUJhc2VkT2Zmc2V0RnJhbWVzKS50b0VxdWFsKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3NldEZyb21GcmFtZU51bWJlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGl0KCdyZXR1cm5zIHRoZSBvYmplY3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGZyYW1lID0gbmV3IEZyYW1lKDIzLjk3Nik7XG4gICAgICAgIGV4cGVjdChmcmFtZS5zZXRGcm9tRnJhbWVOdW1iZXIoNDc0NykpLnRvRXF1YWwoZnJhbWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzZXRzIGZyb20gYSBmcmFtZSBudW1iZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2KS5zZXRGcm9tRnJhbWVOdW1iZXIoNDc0NykuYXNGcmFtZU51bWJlcigpKS50b0VxdWFsKDQ3NDcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzZXRzIGZyb20gYSBzdHJlYW0tYmFzZWQgZnJhbWUgbnVtYmVyIHdpdGggYSBzb3VyY2UtYmFzZWQgb2Zmc2V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NiwgMTAwKS5zZXRGcm9tRnJhbWVOdW1iZXIoNDc0NywgVGltZWNvZGVCYXNlLlNUUkVBTV9CQVNFRCkuYXNGcmFtZU51bWJlcigpKS50b0VxdWFsKDQ3NDcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzZXRzIGZyb20gYSBzb3VyY2UtYmFzZWQgZnJhbWUgbnVtYmVyIHdpdGggYSBzb3VyY2UtYmFzZWQgb2Zmc2V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NiwgMTAwKS5zZXRGcm9tRnJhbWVOdW1iZXIoNDg0NywgVGltZWNvZGVCYXNlLlNPVVJDRV9CQVNFRCkuYXNGcmFtZU51bWJlcigpKS50b0VxdWFsKDQ3NDcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI3NldEZyb21TZWNvbmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgaXQoJ3JldHVybnMgdGhlIG9iamVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYW1lO1xuICAgICAgICBmcmFtZSA9IG5ldyBGcmFtZSgyMy45NzYpO1xuICAgICAgICBleHBlY3QoZnJhbWUuc2V0RnJvbVNlY29uZHMoNDcpKS50b0VxdWFsKGZyYW1lKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2V0cyBmcm9tIHNlY29uZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2KS5zZXRGcm9tU2Vjb25kcyg0NykuYXNGcmFtZU51bWJlcigpKS50b0VxdWFsKDExMjcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzZXRzIGZyb20gc3RyZWFtLWJhc2VkIHNlY29uZHMgd2l0aCBhIHNvdXJjZS1iYXNlZCBvZmZzZXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2LCAxMDApLnNldEZyb21TZWNvbmRzKDQ3LCBUaW1lY29kZUJhc2UuU1RSRUFNX0JBU0VEKS5hc0ZyYW1lTnVtYmVyKCkpLnRvRXF1YWwoMTEyNyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3NldHMgZnJvbSBzb3VyY2UtYmFzZWQgc2Vjb25kcyB3aXRoIGEgc291cmNlLWJhc2VkIG9mZnNldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYsIDEwMCkuc2V0RnJvbVNlY29uZHMoNDcsIFRpbWVjb2RlQmFzZS5TT1VSQ0VfQkFTRUQpLmFzRnJhbWVOdW1iZXIoKSkudG9FcXVhbCgxMDI3KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJyNhc1NlY29uZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnY2FuIHJvdW5kIHRvIDMgZGlnaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3Nikuc2V0RnJvbUZyYW1lTnVtYmVyKDEpLmFzU2Vjb25kcygzKSkudG9FcXVhbCgwLjA0Mik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2NhbiByb3VuZCB0byA0IGRpZ2l0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21GcmFtZU51bWJlcigxKS5hc1NlY29uZHMoNCkpLnRvRXF1YWwoMC4wNDE3KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnY2FuIHJvdW5kIHRvIDAgZGlnaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3Nikuc2V0RnJvbUZyYW1lTnVtYmVyKDEpLmFzU2Vjb25kcygwKSkudG9FcXVhbCgwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnY2FuIGJlIHRvbGQgdG8gbm90IHJvdW5kIGF0IGFsbCBieSBzcGVjaWZ5aW5nIC0xJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QoKG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21GcmFtZU51bWJlcigxKS5hc1NlY29uZHMoLTEpICsgJycpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDEwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnZGVmYXVsdHMgdG8gbm90IHJvdW5kaW5nIGF0IGFsbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KChuZXcgRnJhbWUoMjMuOTc2KS5zZXRGcm9tRnJhbWVOdW1iZXIoMSkuYXNTZWNvbmRzKCkgKyAnJykubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMTApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnI2FzTWlsbGlzZWNvbmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgaXQoJ2NhbiByb3VuZCB0byAwIGRpZ2l0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21GcmFtZU51bWJlcigxKS5hc01pbGxpc2Vjb25kcygwKSkudG9FcXVhbCg0Mik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2NhbiByb3VuZCB0byAxIGRpZ2l0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21GcmFtZU51bWJlcigxKS5hc01pbGxpc2Vjb25kcygxKSkudG9FcXVhbCg0MS43KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnY2FuIHJvdW5kIHRvIDIgZGlnaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3Nikuc2V0RnJvbUZyYW1lTnVtYmVyKDEpLmFzTWlsbGlzZWNvbmRzKDIpKS50b0VxdWFsKDQxLjcxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnY2FuIHJvdW5kIHRvIDMgZGlnaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3Nikuc2V0RnJvbUZyYW1lTnVtYmVyKDEpLmFzTWlsbGlzZWNvbmRzKDMpKS50b0VxdWFsKDQxLjcwOCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2NhbiByb3VuZCB0byA0IGRpZ2l0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21GcmFtZU51bWJlcigxKS5hc01pbGxpc2Vjb25kcyg0KSkudG9FcXVhbCg0MS43MDg0KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnY2FuIHJvdW5kIHRvIDUgZGlnaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3Nikuc2V0RnJvbUZyYW1lTnVtYmVyKDEpLmFzTWlsbGlzZWNvbmRzKDUpKS50b0VxdWFsKDQxLjcwODM4KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnY2FuIHJvdW5kIHRvIDYgZGlnaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3Nikuc2V0RnJvbUZyYW1lTnVtYmVyKDEpLmFzTWlsbGlzZWNvbmRzKDYpKS50b0VxdWFsKDQxLjcwODM3NSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2RlZmF1bHRzIHRvIDAgZGlnaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3Nikuc2V0RnJvbUZyYW1lTnVtYmVyKDEpLmFzTWlsbGlzZWNvbmRzKCkpLnRvRXF1YWwoNDIpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCd3aXRoIHJlZ3Jlc3Npb24gZGF0YSBmcm9tIHJlYWwgbGlmZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoJ2hhbmRsZXMgMDA6MDA6MDI7MDAgYXQgMjkuOTdmcHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyOS45Nykuc2V0RnJvbVN0cmluZygnMDA6MDA6MDI7MDAnLCBUaW1lY29kZUZvcm1hdC5TSU1QTEVfVElNRV9DT05WRVJTSU9OKS5hc01pbGxpc2Vjb25kcygpKVxuICAgICAgICAgICAgLnRvRXF1YWwoMjAwMik7IC8vIG5vdCAyMDAxLjk5OTk5OTk5OTk5OThcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2hhbmRsZXMgMDA6MDA6MDI7MDEgYXQgMjkuOTdmcHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyOS45Nykuc2V0RnJvbVN0cmluZygnMDA6MDA6MDI7MDEnLCBUaW1lY29kZUZvcm1hdC5TSU1QTEVfVElNRV9DT05WRVJTSU9OKS5hc01pbGxpc2Vjb25kcygpKVxuICAgICAgICAgICAgLnRvRXF1YWwoMjAzNSk7IC8vIG5vdCAyMDM1LjAwMDAwMDAwMDAwMDJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2hhbmRsZXMgMDA6MDA6MDg7MDIgYXQgMjkuOTdmcHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyOS45Nykuc2V0RnJvbVN0cmluZygnMDA6MDA6MDg7MDInLCBUaW1lY29kZUZvcm1hdC5TSU1QTEVfVElNRV9DT05WRVJTSU9OKS5hc01pbGxpc2Vjb25kcygpKVxuICAgICAgICAgICAgLnRvRXF1YWwoODA3NSk7IC8vIG5vdCA4MDc0Ljk5OTk5OTk5OTk5OVxuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnaGFuZGxlcyAwMDowMDowODswMyBhdCAyOS45N2ZwcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBleHBlY3QobmV3IEZyYW1lKDI5Ljk3KS5zZXRGcm9tU3RyaW5nKCcwMDowMDowODswMycsIFRpbWVjb2RlRm9ybWF0LlNJTVBMRV9USU1FX0NPTlZFUlNJT04pLmFzTWlsbGlzZWNvbmRzKCkpXG4gICAgICAgICAgICAudG9FcXVhbCg4MTA4KTsgLy8gbm90IDgxMDguMDAwMDAwMDAwMDAxXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnY29udmVydHMgZnJhbWUgdG8gc2Vjb25kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2KS5zZXRGcm9tRnJhbWVOdW1iZXIoMSkuYXNTZWNvbmRzKCkpLnRvQmVDbG9zZVRvKDAuMDQyLCAzKTtcbiAgICB9KTtcblxuICAgIGl0KCdjb252ZXJ0cyBzZWNvbmRzIHRvIGZyYW1lJywgZnVuY3Rpb24gKCkge1xuICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21TZWNvbmRzKDAuMDQxKS5hc0ZyYW1lTnVtYmVyKCkpLnRvRXF1YWwoMSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncm91bmQgdHJpcHBpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBtYXhGcmFtZU51bWJlclRvVGVzdDogbnVtYmVyID0gMTAwMDtcblxuICAgICAgZGVzY3JpYmUoJ3ZpYSBpbnRlZ3JhbCBzZWNvbmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdCgnd29ya3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoQXJyYXkobWF4RnJhbWVOdW1iZXJUb1Rlc3QpKS5mb3JFYWNoKGZyYW1lTnVtYmVyQXNTdHJpbmcgPT4ge1xuICAgICAgICAgICAgY29uc3QgZnJhbWVOdW1iZXIgPSBOdW1iZXIoZnJhbWVOdW1iZXJBc1N0cmluZyk7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21GcmFtZU51bWJlcihmcmFtZU51bWJlcik7XG4gICAgICAgICAgICBjb25zdCBzZWNvbmRzID0gZnJhbWUuYXNTZWNvbmRzKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChmcmFtZS5zZXRGcm9tU2Vjb25kcyhzZWNvbmRzKS5hc0ZyYW1lTnVtYmVyKCkpLnRvQmUoZnJhbWVOdW1iZXIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgndmlhIHN0cmluZ3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGl0KCd3b3JrcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCBmcmFtZVJhdGVzID0gWzI5Ljk3LCA1OS45NCwgMjMuOTc2XTtcbiAgICAgICAgICBjb25zdCBmb3JtYXRzID0gW1xuICAgICAgICAgICAgVGltZWNvZGVGb3JtYXQuTk9ORFJPUEZSQU1FLFxuICAgICAgICAgICAgVGltZWNvZGVGb3JtYXQuRFJPUEZSQU1FLFxuICAgICAgICAgICAgVGltZWNvZGVGb3JtYXQuU0lNUExFX1RJTUVfQ09OVkVSU0lPTixcbiAgICAgICAgICAgIFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OLFxuICAgICAgICAgICAgVGltZWNvZGVGb3JtYXQuU0VDT05EUyxcbiAgICAgICAgICAgIFRpbWVjb2RlRm9ybWF0LkZSQU1FQ09VTlRcbiAgICAgICAgICBdO1xuXG4gICAgICAgICAgZnJhbWVSYXRlcy5mb3JFYWNoKGZyYW1lc1BlclNlY29uZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IG5ldyBGcmFtZShmcmFtZXNQZXJTZWNvbmQpO1xuXG4gICAgICAgICAgICBmb3JtYXRzLmZvckVhY2goZm9ybWF0ID0+IHtcbiAgICAgICAgICAgICAgT2JqZWN0LmtleXMoQXJyYXkobWF4RnJhbWVOdW1iZXJUb1Rlc3QpKS5mb3JFYWNoKGZyYW1lTnVtYmVyQXNTdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lTnVtYmVyID0gTnVtYmVyKGZyYW1lTnVtYmVyQXNTdHJpbmcpO1xuXG4gICAgICAgICAgICAgICAgZXhwZWN0KGZyYW1lKS50b1JvdW5kVHJpcFZpYVN0cmluZ0ZvckZyYW1lTnVtYmVyKGZyYW1lTnVtYmVyLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3N0cmluZ3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnY29udmVydHMgYSBmcmFtZSB0byBhIGZyYW1lIHN0cmluZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpLnNldEZyb21GcmFtZU51bWJlcigxKS5hc1N0cmluZyhUaW1lY29kZUZvcm1hdC5GUkFNRUNPVU5UKSkudG9FcXVhbCgnMScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdjb252ZXJ0cyBhIGZyYW1lIHRvIGEgc2Vjb25kcyBzdHJpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2KS5zZXRGcm9tRnJhbWVOdW1iZXIoMSkuYXNTdHJpbmcoVGltZWNvZGVGb3JtYXQuU0VDT05EUykpLnRvRXF1YWwoJzAuMDQyJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2NvbnZlcnRzIGEgZnJhbWUgdG8gYSBub25kcm9wZnJhbWUgc3RyaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBleHBlY3QobmV3IEZyYW1lKDI5Ljk3KS5zZXRGcm9tRnJhbWVOdW1iZXIoMzApLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0Lk5PTkRST1BGUkFNRSkpLnRvRXF1YWwoJzAwOjAwOjAxOjAwJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdhZGRGcmFtZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnY2FuIGFkZCBmcmFtZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjkuOTcpLnNldEZyb21GcmFtZU51bWJlcig0NykuYWRkRnJhbWVzKDEwMCkuYXNGcmFtZU51bWJlcigpKS50b0VxdWFsKDE0Nyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdtaW5pbWFsIHRpbWVjb2RlJywgZnVuY3Rpb24gKCkge1xuICAgICAgZGVzY3JpYmUoJ2NvbnZlcnNpb24gdG8gYSBzaW1wbGUgdGltZWNvZGU6JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdCgnd29ya3Mgd2l0aCBzIGZvcm1hdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NilcbiAgICAgICAgICAgIC5zZXRGcm9tU3RyaW5nKCcyMycsIFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICAgLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0LlNJTVBMRV9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgKS50b0VxdWFsKCcwMDowMDoyMzswMCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnd29ya3Mgd2l0aCBzO2YgZm9ybWF0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2KVxuICAgICAgICAgICAgLnNldEZyb21TdHJpbmcoJzIzOzE3JywgVGltZWNvZGVGb3JtYXQuTUlOSU1BTF9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgICAuYXNTdHJpbmcoVGltZWNvZGVGb3JtYXQuU0lNUExFX1RJTUVfQ09OVkVSU0lPTilcbiAgICAgICAgICApLnRvRXF1YWwoJzAwOjAwOjIzOzE3Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCd3b3JrcyB3aXRoIG06cyBmb3JtYXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpXG4gICAgICAgICAgICAuc2V0RnJvbVN0cmluZygnMjM6MTcnLCBUaW1lY29kZUZvcm1hdC5NSU5JTUFMX1RJTUVfQ09OVkVSU0lPTilcbiAgICAgICAgICAgIC5hc1N0cmluZyhUaW1lY29kZUZvcm1hdC5TSU1QTEVfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICkudG9FcXVhbCgnMDA6MjM6MTc7MDAnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3dvcmtzIHdpdGggbTpzO2YgZm9ybWF0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2KVxuICAgICAgICAgICAgLnNldEZyb21TdHJpbmcoJzIzOjE3OzA1JywgVGltZWNvZGVGb3JtYXQuTUlOSU1BTF9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgICAuYXNTdHJpbmcoVGltZWNvZGVGb3JtYXQuU0lNUExFX1RJTUVfQ09OVkVSU0lPTilcbiAgICAgICAgICApLnRvRXF1YWwoJzAwOjIzOjE3OzA1Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCd3b3JrcyB3aXRoIGg6bTpzIGZvcm1hdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NilcbiAgICAgICAgICAgIC5zZXRGcm9tU3RyaW5nKCcyMzoxNzowNScsIFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICAgLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0LlNJTVBMRV9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgKS50b0VxdWFsKCcyMzoxNzowNTswMCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnd29ya3Mgd2l0aCBoOm06cztmIGZvcm1hdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NilcbiAgICAgICAgICAgIC5zZXRGcm9tU3RyaW5nKCcyMzoxNzowNTsxMicsIFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICAgLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0LlNJTVBMRV9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgKS50b0VxdWFsKCcyMzoxNzowNTsxMicpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnd29ya3Mgd2l0aCBoOm06czpmIGZvcm1hdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NilcbiAgICAgICAgICAgIC5zZXRGcm9tU3RyaW5nKCcyMzoxNzowNToxMicsIFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICAgLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0LlNJTVBMRV9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgKS50b0VxdWFsKCcyMzoxNzowNTsxMicpO1xuICAgICAgICB9KTtcblxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc2ltcGxlIHRpbWVjb2RlJywgZnVuY3Rpb24gKCkge1xuICAgICAgZGVzY3JpYmUoJ2NvbnZlcnNpb24gdG8gYSBtaW5pbWFsIHRpbWVjb2RlOicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoJ3dvcmtzIHdpdGggcyBmb3JtYXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpXG4gICAgICAgICAgICAuc2V0RnJvbVN0cmluZygnMDA6MDA6MjM6MDAnLCBUaW1lY29kZUZvcm1hdC5TSU1QTEVfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICAgLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICkudG9FcXVhbCgnMjMnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3dvcmtzIHdpdGggcztmIGZvcm1hdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NilcbiAgICAgICAgICAgIC5zZXRGcm9tU3RyaW5nKCcwMDowMDoyMzoxNycsIFRpbWVjb2RlRm9ybWF0LlNJTVBMRV9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgICAuYXNTdHJpbmcoVGltZWNvZGVGb3JtYXQuTUlOSU1BTF9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgKS50b0VxdWFsKCcyMzsxNycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnd29ya3Mgd2l0aCBtOnMgZm9ybWF0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGV4cGVjdChuZXcgRnJhbWUoMjMuOTc2KVxuICAgICAgICAgICAgLnNldEZyb21TdHJpbmcoJzAwOjIzOjE3OjAwJywgVGltZWNvZGVGb3JtYXQuU0lNUExFX1RJTUVfQ09OVkVSU0lPTilcbiAgICAgICAgICAgIC5hc1N0cmluZyhUaW1lY29kZUZvcm1hdC5NSU5JTUFMX1RJTUVfQ09OVkVSU0lPTilcbiAgICAgICAgICApLnRvRXF1YWwoJzIzOjE3Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCd3b3JrcyB3aXRoIG06cztmIGZvcm1hdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBleHBlY3QobmV3IEZyYW1lKDIzLjk3NilcbiAgICAgICAgICAgIC5zZXRGcm9tU3RyaW5nKCcwMDoyMzoxNzowNScsIFRpbWVjb2RlRm9ybWF0LlNJTVBMRV9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgICAuYXNTdHJpbmcoVGltZWNvZGVGb3JtYXQuTUlOSU1BTF9USU1FX0NPTlZFUlNJT04pXG4gICAgICAgICAgKS50b0VxdWFsKCcyMzoxNzswNScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnd29ya3Mgd2l0aCBoOm06cyBmb3JtYXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpXG4gICAgICAgICAgICAuc2V0RnJvbVN0cmluZygnMjM6MTc6MDU6MDAnLCBUaW1lY29kZUZvcm1hdC5TSU1QTEVfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICAgLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICkudG9FcXVhbCgnMjM6MTc6MDUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3dvcmtzIHdpdGggaDptOnM7ZiBmb3JtYXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXhwZWN0KG5ldyBGcmFtZSgyMy45NzYpXG4gICAgICAgICAgICAuc2V0RnJvbVN0cmluZygnMjM6MTc6MDU6MTInLCBUaW1lY29kZUZvcm1hdC5TSU1QTEVfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICAgLmFzU3RyaW5nKFRpbWVjb2RlRm9ybWF0Lk1JTklNQUxfVElNRV9DT05WRVJTSU9OKVxuICAgICAgICAgICkudG9FcXVhbCgnMjM6MTc6MDU7MTInKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG4iXX0=
