"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = require("../../shared/modules/wazee-frame-formatter/index");
var enhanced_asset_1 = require("./enhanced-asset");
function main() {
    describe('Enhanced Asset', function () {
        var assetUnderTest;
        var frameRate = 30;
        var frameRateMetadatum = frameRate + " fps";
        var durationInMilliseconds = 9000;
        var durationInFrames = durationInMilliseconds * frameRate / 1000;
        var generateFrameTestsFrom = function (tests, frameGetterName, frameNumberGetterName, millisecondsGetterName, percentageGetterName) {
            if (millisecondsGetterName === void 0) { millisecondsGetterName = undefined; }
            if (percentageGetterName === void 0) { percentageGetterName = undefined; }
            var _loop_1 = function (test) {
                var expectedResultDescription = test.expected ? 'its expected value' : 'undefined';
                it("returns " + expectedResultDescription + " when the asset " + test.condition, function () {
                    Object.assign(assetUnderTest, { metadata: [] }, test.hasOwnProperty('timeStart') ? { timeStart: test.timeStart } : null, test.hasOwnProperty('timeEnd') ? { timeEnd: test.timeEnd } : null);
                    if (test.frameRate)
                        assetUnderTest.metadata[0] = { name: 'Format.FrameRate', value: frameRateMetadatum };
                    if (test.duration)
                        assetUnderTest.metadata[1] = { name: 'Format.Duration', value: "" + durationInMilliseconds };
                    if (test.expectedMilliseconds >= 0) {
                        var expectedFrame = new index_1.Frame(frameRate).setFromSeconds(test.expectedMilliseconds / 1000);
                        expect(assetUnderTest[frameGetterName]).toEqual(expectedFrame);
                        expect(assetUnderTest[frameNumberGetterName]).toEqual(expectedFrame.frameNumber);
                        if (millisecondsGetterName) {
                            expect(assetUnderTest[millisecondsGetterName]).toEqual(test.expectedMilliseconds);
                        }
                        if (percentageGetterName) {
                            expect(assetUnderTest[percentageGetterName])
                                .toEqual(test.duration ? test.expectedMilliseconds * 100 / durationInMilliseconds : 0);
                        }
                    }
                    else {
                        expect(assetUnderTest[frameGetterName]).toBeUndefined();
                        expect(assetUnderTest[frameNumberGetterName]).toBeUndefined();
                        if (millisecondsGetterName) {
                            expect(assetUnderTest[millisecondsGetterName]).toBeUndefined();
                        }
                        if (percentageGetterName) {
                            expect(assetUnderTest[percentageGetterName]).toBe(0);
                        }
                    }
                });
            };
            for (var _i = 0, tests_1 = tests; _i < tests_1.length; _i++) {
                var test = tests_1[_i];
                _loop_1(test);
            }
        };
        var generateMetadataTestsFor = function (getterName, metadataName, getterReturnValues, index) {
            if (index === void 0) { index = -1; }
            var isIndexed = index >= 0;
            var _loop_2 = function (metadataValue) {
                var getterReturnValue = getterReturnValues[metadataValue];
                it("returns the " + (isIndexed ? "metadata value at index " + index : metadataName + " metadata value"), function () {
                    var metadata = [];
                    metadata[isIndexed ? index : 0] = { name: metadataName, value: metadataValue };
                    Object.assign(assetUnderTest, { metadata: metadata });
                    expect(assetUnderTest[getterName]).toEqual(getterReturnValue);
                });
                if (isIndexed) {
                    it('does not care about the metadata name', function () {
                        var metadata = [];
                        metadata[isIndexed ? index : 0] = { name: "Not." + metadataName, value: metadataValue };
                        Object.assign(assetUnderTest, { metadata: metadata });
                        expect(assetUnderTest[getterName]).toEqual(getterReturnValue);
                    });
                }
            };
            for (var _i = 0, _a = Object.keys(getterReturnValues); _i < _a.length; _i++) {
                var metadataValue = _a[_i];
                _loop_2(metadataValue);
            }
            it('returns undefined if the asset is missing the requested metadata', function () {
                expect(assetUnderTest[getterName]).toBeUndefined();
            });
            if (isIndexed) {
                it('returns undefined if the asset has the requested metadata at a different index', function () {
                    var metadata = [];
                    metadata[(isIndexed ? index : 0) + 1] = { name: metadataName, value: 'the metadata value' };
                    Object.assign(assetUnderTest, { metadata: metadata });
                    expect(assetUnderTest[getterName]).toBeUndefined();
                });
            }
            if (!isIndexed) {
                it('caches its value', function () {
                    var metadata = [];
                    metadata[isIndexed ? index : 0] = { name: metadataName, value: 'the metadata value' };
                    Object.assign(assetUnderTest, { metadata: metadata });
                    spyOn(assetUnderTest, 'getMetadataValueFor');
                    var value = assetUnderTest[getterName];
                    value = assetUnderTest[getterName];
                    expect(assetUnderTest.getMetadataValueFor).toHaveBeenCalledTimes(1);
                });
            }
        };
        beforeEach(function () {
            assetUnderTest = new enhanced_asset_1.EnhancedAsset();
        });
        describe('each getter in [durationFrame, durationFrameNumber]', function () {
            var tests = [
                { condition: 'has no duration and no frame rate', expectedMilliseconds: undefined },
                { condition: 'has only a frame rate', frameRate: true, expectedMilliseconds: undefined },
                { condition: 'has only a duration', duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a duration and a frame rate',
                    duration: true, frameRate: true, expectedMilliseconds: durationInMilliseconds
                },
            ];
            generateFrameTestsFrom(tests, 'durationFrame', 'durationFrameNumber');
        });
        describe('durationMilliseconds getter', function () {
            generateMetadataTestsFor('durationMilliseconds', 'Format.Duration', { '12345678': 12345678, '12345678.9': 12345678, '00:01:00': undefined });
            it('can handle HH:MM:SS duration metadata when a frame rate is defined', function () {
                Object.assign(assetUnderTest, { metadata: [{ name: 'Format.FrameRate', value: '30 fps' }, { name: 'Format.Duration', value: '00:01:00' }] });
                expect(assetUnderTest.durationMilliseconds).toBe(60000);
            });
        });
        describe('each getter in [subclipDurationFrame, subclipDurationFrameNumber, subclipDurationMilliseconds, subclipDurationPercentage]', function () {
            var tests = [
                { condition: 'has no timeStart, no timeEnd, no duration, and no frame rate', expectedMilliseconds: undefined },
                { condition: 'has only a frame rate', frameRate: true, expectedMilliseconds: undefined },
                { condition: 'has only a duration', duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a duration and a frame rate',
                    duration: true, frameRate: true, expectedMilliseconds: durationInMilliseconds
                },
                { condition: 'has only a timeEnd', timeEnd: 6000, expectedMilliseconds: undefined },
                {
                    condition: 'has a timeEnd and a frame rate', timeEnd: 6000, frameRate: true, expectedMilliseconds: 6000 - 0
                },
                { condition: 'has a timeEnd and a duration', timeEnd: 6000, duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a timeEnd, a duration, and a frame rate',
                    timeEnd: 6000, duration: true, frameRate: true, expectedMilliseconds: 6000 - 0
                },
                { condition: 'has only a timeStart', timeStart: 3000, expectedMilliseconds: undefined },
                { condition: 'has a timeStart and a frame rate', timeStart: 3000, frameRate: true, expectedMilliseconds: undefined },
                { condition: 'has a timeStart and a duration', timeStart: 3000, duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a timeStart, a frame rate, and a duration',
                    timeStart: 3000, frameRate: true, duration: true, expectedMilliseconds: durationInMilliseconds - 3000
                },
                { condition: 'has a timeStart and a timeEnd', timeStart: 3000, timeEnd: 6000, expectedMilliseconds: undefined },
                {
                    condition: 'has a timeStart, a timeEnd, and a frame rate',
                    timeStart: 3000, timeEnd: 6000, frameRate: true, expectedMilliseconds: 6000 - 3000
                },
                {
                    condition: 'has a timeStart, a timeEnd, and a duration',
                    timeStart: 3000, timeEnd: 6000, duration: true, expectedMilliseconds: undefined
                },
                {
                    condition: 'has a timeStart, a timeEnd, a duration, and a frame rate',
                    timeStart: 3000, timeEnd: 6000, duration: true, frameRate: true, expectedMilliseconds: 6000 - 3000
                }
            ];
            generateFrameTestsFrom(tests, 'subclipDurationFrame', 'subclipDurationFrameNumber', 'subclipDurationMilliseconds', 'subclipDurationPercentage');
        });
        describe('each getter in [inMarkerFrame, inMarkerFrameNumber, inMarkerMilliseconds, inMarkerPercentage]', function () {
            var tests = [
                { condition: 'has no timeStart and no frame rate', expectedMilliseconds: undefined },
                { condition: 'has only a frame rate', frameRate: true, expectedMilliseconds: 0 },
                { condition: 'has only a positive timeStart', timeStart: 3000, expectedMilliseconds: undefined },
                { condition: 'has a positive timeStart and a frame rate', timeStart: 3000, frameRate: true, expectedMilliseconds: 3000 },
                { condition: 'has only a zero timeStart', timeStart: 0, expectedMilliseconds: undefined },
                { condition: 'has a zero timeStart and a frame rate', timeStart: 0, frameRate: true, expectedMilliseconds: 0 },
                { condition: 'has only a negative timeStart', timeStart: -1, expectedMilliseconds: undefined },
                { condition: 'has a negative timeStart and a frame rate', timeStart: -1, frameRate: true, expectedMilliseconds: 0 }
            ];
            generateFrameTestsFrom(tests, 'inMarkerFrame', 'inMarkerFrameNumber', 'inMarkerMilliseconds', 'inMarkerPercentage');
        });
        describe('each getter in [outMarkerFrame, outMarkerFrameNumber, outMarkerMilliseconds, outMarkerPercentage]', function () {
            var tests = [
                { condition: 'has no timeEnd, no duration, and no frame rate', expectedMilliseconds: undefined },
                { condition: 'has only a frame rate', frameRate: true, expectedMilliseconds: undefined },
                { condition: 'has only a duration', duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a duration and a frame rate',
                    duration: true, frameRate: true, expectedMilliseconds: durationInMilliseconds
                },
                { condition: 'has only a positive timeEnd', timeEnd: 6000, expectedMilliseconds: undefined },
                { condition: 'has a positive timeEnd and a frame rate', timeEnd: 6000, frameRate: true, expectedMilliseconds: 6000 },
                { condition: 'has a positive timeEnd and a duration', timeEnd: 6000, duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a positive timeEnd, a duration, and a frame rate',
                    timeEnd: 6000, duration: true, frameRate: true, expectedMilliseconds: 6000
                },
                { condition: 'has only a zero timeEnd', timeEnd: 0, expectedMilliseconds: undefined },
                { condition: 'has a zero timeEnd and a frame rate', timeEnd: 0, frameRate: true, expectedMilliseconds: 0 },
                { condition: 'has a zero timeEnd and a duration', timeEnd: 0, duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a zero timeEnd, a duration, and a frame rate',
                    timeEnd: 0, duration: true, frameRate: true, expectedMilliseconds: 0
                },
                { condition: 'has only a negative timeEnd', timeEnd: -2, expectedMilliseconds: undefined },
                { condition: 'has a negative timeEnd and a frame rate', timeEnd: -2, frameRate: true, expectedMilliseconds: undefined },
                { condition: 'has a negative timeEnd and a duration', timeEnd: -2, duration: true, expectedMilliseconds: undefined },
                {
                    condition: 'has a negative timeEnd, a duration, and a frame rate',
                    timeEnd: -2, duration: true, frameRate: true, expectedMilliseconds: durationInMilliseconds
                }
            ];
            generateFrameTestsFrom(tests, 'outMarkerFrame', 'outMarkerFrameNumber', 'outMarkerMilliseconds', 'outMarkerPercentage');
        });
        describe('getMetadataValueFor()', function () {
            beforeEach(function () {
                Object.assign(assetUnderTest, { metadata: [] });
                assetUnderTest.metadata[42] = { name: 'Some.Name', value: 'some value' };
                assetUnderTest.metadata[47] = { name: 'Some.Other.Name', value: 'some other value' };
            });
            it('returns the expected metadata', function () {
                expect(assetUnderTest.getMetadataValueFor('Some.Name')).toEqual('some value');
                expect(assetUnderTest.getMetadataValueFor('Some.Other.Name')).toEqual('some other value');
            });
            it('returns undefined for a name that doesn\'t exist', function () {
                expect(assetUnderTest.getMetadataValueFor('Some.Nonexistent.Name')).toBeUndefined();
            });
            it('returns undefined for a name that doesn\'t have a value', function () {
                assetUnderTest.metadata[0] = { name: 'Yet.Another.Name' };
                expect(assetUnderTest.getMetadataValueFor('Yet.Another.Name')).toBeUndefined();
            });
            it('is not confused by empty elements in the metadata array', function () {
                assetUnderTest.metadata[0] = {};
                expect(assetUnderTest.getMetadataValueFor('Some.Name')).toEqual('some value');
            });
            it('is not confused by undefined elements in the metadata array', function () {
                assetUnderTest.metadata[0] = undefined;
                expect(assetUnderTest.getMetadataValueFor('Some.Name')).toEqual('some value');
            });
            it('is not confused by null elements in the metadata array', function () {
                assetUnderTest.metadata[0] = null;
                expect(assetUnderTest.getMetadataValueFor('Some.Name')).toEqual('some value');
            });
            it('is not confused by unexpected properties in the metadata object', function () {
                assetUnderTest.metadata[42] = { name: 'Some.Name', value: 'some value', other: 'junk', and: 'things' };
                expect(assetUnderTest.getMetadataValueFor('Some.Name')).toEqual('some value');
            });
        });
        describe('convertMetadataValueFor()', function () {
            beforeEach(function () {
                Object.assign(assetUnderTest, { metadata: [] });
            });
            it('returns the return value of the passed-in function applied to the metadata value', function () {
                Object.assign(assetUnderTest, { metadata: [{ name: 'Some.Name', value: '3.14 bottles of beer on the wall' }] });
                expect(assetUnderTest.convertMetadataValueFor('Some.Name', function (value) { return parseFloat(value) * 2; })).toEqual(6.28);
            });
            it('returns undefined if the asset is missing the requested metadata', function () {
                expect(assetUnderTest.convertMetadataValueFor('Some.Name', function (value) { return parseFloat(value) * 2; })).toBeUndefined();
            });
        });
        describe('subclipMarkers getter', function () {
            var tests = [
                { hasFrameRate: false, timeStart: undefined, timeEnd: undefined, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: undefined, timeEnd: null, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: undefined, timeEnd: -2, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: undefined, timeEnd: 2000, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: null, timeEnd: undefined, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: null, timeEnd: null, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: null, timeEnd: -2, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: null, timeEnd: 2000, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: -1, timeEnd: undefined, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: -1, timeEnd: null, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: -1, timeEnd: -2, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: -1, timeEnd: 2000, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: 1000, timeEnd: undefined, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: 1000, timeEnd: null, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: 1000, timeEnd: -2, expectedIn: false, expectedOut: false },
                { hasFrameRate: false, timeStart: 1000, timeEnd: 2000, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: undefined, timeEnd: undefined, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: undefined, timeEnd: null, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: undefined, timeEnd: -2, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: undefined, timeEnd: 2000, expectedIn: false, expectedOut: true },
                { hasFrameRate: true, timeStart: null, timeEnd: undefined, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: null, timeEnd: null, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: null, timeEnd: -2, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: null, timeEnd: 2000, expectedIn: false, expectedOut: true },
                { hasFrameRate: true, timeStart: -1, timeEnd: undefined, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: -1, timeEnd: null, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: -1, timeEnd: -2, expectedIn: false, expectedOut: false },
                { hasFrameRate: true, timeStart: -1, timeEnd: 2000, expectedIn: false, expectedOut: true },
                { hasFrameRate: true, timeStart: 1000, timeEnd: undefined, expectedIn: true, expectedOut: false },
                { hasFrameRate: true, timeStart: 1000, timeEnd: null, expectedIn: true, expectedOut: false },
                { hasFrameRate: true, timeStart: 1000, timeEnd: -2, expectedIn: true, expectedOut: false },
                { hasFrameRate: true, timeStart: 1000, timeEnd: 2000, expectedIn: true, expectedOut: true },
            ];
            tests.forEach(function (test) {
                var inMarkerFrame = new index_1.Frame(30).setFromFrameNumber(30);
                var outMarkerFrame = new index_1.Frame(30).setFromFrameNumber(60);
                describe("when asset has " + (test.hasFrameRate ? 'a' : 'no') + " frame rate", function () {
                    it("has " + (test.expectedIn ? 'an' : 'no') + " in marker and " + (test.expectedIn ? 'an' : 'no') + " out marker" +
                        (" when timeStart = " + test.timeStart + " and timeEnd = " + test.timeEnd), function () {
                        if (test.hasFrameRate) {
                            Object.assign(assetUnderTest, { metadata: [] });
                            assetUnderTest.metadata[0] = { name: 'Format.FrameRate', value: '30 fps' };
                        }
                        Object.assign(assetUnderTest, { timeStart: test.timeStart, timeEnd: test.timeEnd });
                        expect(assetUnderTest.subclipMarkers).toEqual({
                            in: test.expectedIn ? inMarkerFrame : undefined,
                            out: test.expectedOut ? outMarkerFrame : undefined
                        });
                    });
                });
            });
        });
        describe('title getter', function () {
            generateMetadataTestsFor('title', 'Title', { 'This Is a Title': 'This Is a Title' }, 0);
        });
        describe('description getter', function () {
            generateMetadataTestsFor('description', 'Description', { 'This is a description.': 'This is a description.' }, 1);
        });
        describe('formatType getter', function () {
            generateMetadataTestsFor('formatType', 'TE.DigitalFormat', { 'High Definition': 'High Definition' });
        });
        describe('isImage getter', function () {
            it('returns true for an image', function () {
                Object.assign(assetUnderTest, { resourceClass: 'Image' });
                expect(assetUnderTest.isImage).toBe(true);
            });
            it('returns false for a non-image', function () {
                Object.assign(assetUnderTest, { resourceClass: 'blah' });
                expect(assetUnderTest.isImage).toBe(false);
            });
            it('returns false if the asset is missing resourceClass', function () {
                expect(assetUnderTest.isImage).toBe(false);
            });
        });
        describe('framesPerSecond getter', function () {
            generateMetadataTestsFor('framesPerSecond', 'Format.FrameRate', { '29.97 fps': 29.97 });
        });
        describe('isSubclipped getter', function () {
            var tests = [
                { condition: 'has no timeStart and no timeEnd', expectedResult: false },
                { condition: 'has only a positive timeStart', timeStart: 3000, expectedResult: true },
                { condition: 'has only a zero timeStart', timeStart: 0, expectedResult: true },
                { condition: 'has only a negative timeStart', timeStart: -1, expectedResult: false },
                { condition: 'has only a positive timeEnd', timeEnd: 6000, expectedResult: true },
                { condition: 'has only a zero timeEnd', timeEnd: 0, expectedResult: true },
                { condition: 'has only a negative timeEnd', timeEnd: -2, expectedResult: false },
                { condition: 'has a positive timeStart and a positive timeEnd', timeStart: 3000, timeEnd: 6000, expectedResult: true },
                { condition: 'has a zero timeStart and a positive timeEnd', timeStart: 0, timeEnd: 6000, expectedResult: true },
                { condition: 'has a negative timeStart and a positive timeEnd', timeStart: -1, timeEnd: 6000, expectedResult: true },
                { condition: 'has a positive timeStart and a zero timeEnd', timeStart: 3000, timeEnd: 0, expectedResult: true },
                { condition: 'has a zero timeStart and a zero timeEnd', timeStart: 0, timeEnd: 0, expectedResult: true },
                { condition: 'has a negative timeStart and a zero timeEnd', timeStart: -1, timeEnd: 0, expectedResult: true },
                { condition: 'has a positive timeStart and a negative timeEnd', timeStart: 3000, timeEnd: -2, expectedResult: true },
                { condition: 'has a zero timeStart and a negative timeEnd', timeStart: 0, timeEnd: -2, expectedResult: true },
                { condition: 'has a negative timeStart and a negative timeEnd', timeStart: -1, timeEnd: -2, expectedResult: false }
            ];
            var _loop_3 = function (test) {
                it("returns " + test.expectedResult + " for an asset that " + test.condition, function () {
                    Object.assign(assetUnderTest, { metadata: [] }, test.hasOwnProperty('timeStart') ? { timeStart: test.timeStart } : null, test.hasOwnProperty('timeEnd') ? { timeEnd: test.timeEnd } : null);
                    expect(assetUnderTest.isSubclipped).toBe(test.expectedResult);
                });
            };
            for (var _i = 0, tests_2 = tests; _i < tests_2.length; _i++) {
                var test = tests_2[_i];
                _loop_3(test);
            }
        });
        describe('routerLink()', function () {
            it('Returns correct path for a collection asset', function () {
                Object.assign(assetUnderTest, {
                    assetId: 47,
                    uuid: 'aabb-ccdd-eeff-gghh',
                    type: 'collection',
                    parentId: 1
                });
                expect(assetUnderTest.routerLink).toEqual(["/collections/1/asset/aabb-ccdd-eeff-gghh"]);
            });
            it('Returns correct path for a quote edit asset', function () {
                Object.assign(assetUnderTest, {
                    assetId: 47,
                    uuid: 'aabb-ccdd-eeff-gghh',
                    type: 'quoteEdit'
                });
                expect(assetUnderTest.routerLink).toEqual(["/active-quote/asset/aabb-ccdd-eeff-gghh"]);
            });
            it('Returns correct path for a search asset', function () {
                Object.assign(assetUnderTest, { assetId: 47, type: 'search' });
                expect(assetUnderTest.routerLink).toEqual(["/search/asset/47"]);
            });
            it('Returns correct path for a quote show asset', function () {
                Object.assign(assetUnderTest, {
                    assetId: 47,
                    uuid: 'aabb-ccdd-eeff-gghh',
                    type: 'quoteShow',
                    parentId: 1
                });
                expect(assetUnderTest.routerLink).toEqual(["/quotes/1/asset/aabb-ccdd-eeff-gghh"]);
            });
            it('Returns correct path for a order asset', function () {
                Object.assign(assetUnderTest, {
                    assetId: 47,
                    uuid: 'aabb-ccdd-eeff-gghh',
                    type: 'order',
                    parentId: 1
                });
                expect(assetUnderTest.routerLink).toEqual(["/orders/1/asset/aabb-ccdd-eeff-gghh"]);
            });
            it('Returns correct path for a cart asset', function () {
                Object.assign(assetUnderTest, {
                    assetId: 47,
                    uuid: 'aabb-ccdd-eeff-gghh',
                    type: 'cart'
                });
                expect(assetUnderTest.routerLink).toEqual(["/cart/asset/aabb-ccdd-eeff-gghh"]);
            });
        });
        describe('normalize()', function () {
            it('returns its containing object to enable chaining', function () {
                expect(assetUnderTest.normalize()).toEqual(assetUnderTest);
            });
            describe('name', function () {
                it('is not changed if it already exists', function () {
                    Object.assign(assetUnderTest, { name: 'some name', assetName: 'some other name' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.name).toEqual('some name');
                });
                it('is updated if it doesn\'t already exist', function () {
                    Object.assign(assetUnderTest, { assetName: 'some other name' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.name).toEqual('some other name');
                });
            });
            describe('thumbnailUrl', function () {
                it('is not changed if it already exists', function () {
                    Object.assign(assetUnderTest, { thumbnailUrl: 'some URL', thumbnail: { urls: { https: 'some other URL' } } });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.thumbnailUrl).toEqual('some URL');
                });
                it('is updated from the deeply nested object if it doesn\'t already exist', function () {
                    Object.assign(assetUnderTest, { thumbnail: { urls: { https: 'some other URL' } } });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.thumbnailUrl).toEqual('some other URL');
                });
                it('is updated from clipThumbnailUrl if it doesn\'t already exist', function () {
                    Object.assign(assetUnderTest, { clipThumbnailUrl: 'yet another URL' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.thumbnailUrl).toEqual('yet another URL');
                });
                it('is updated from the deeply nested object if it AND clipThumbnailUrl are both defined for some reason', function () {
                    Object.assign(assetUnderTest, { thumbnail: { urls: { https: 'some other URL' } }, clipThumbnailUrl: 'yet another URL' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.thumbnailUrl).toEqual('some other URL');
                });
                describe('resourceClass', function () {
                    it('is not changed if it already exists', function () {
                        Object.assign(assetUnderTest, { resourceClass: 'some resourceClass', metadata: [{ name: 'Resource.Class', value: 'some other resourceClass' }] });
                        assetUnderTest.normalize();
                        expect(assetUnderTest.resourceClass).toEqual('some resourceClass');
                    });
                    it('is updated from metadata if it doesn\'t already exist', function () {
                        Object.assign(assetUnderTest, { metadata: [{ name: 'Resource.Class', value: 'some other resourceClass' }] });
                        assetUnderTest.normalize();
                        expect(assetUnderTest.resourceClass).toEqual('some other resourceClass');
                    });
                    it('is undefined if it doesn\'t already exist and is not found in metadata', function () {
                        assetUnderTest.normalize();
                        expect(assetUnderTest.resourceClass).toBeUndefined();
                    });
                });
            });
            describe('timeStart', function () {
                it('is a number if it was defined as a number', function () {
                    Object.assign(assetUnderTest, { timeStart: 42 });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.timeStart).toEqual(42);
                    expect(assetUnderTest.timeStart).toEqual(jasmine.any(Number));
                });
                it('is a number if it was defined as a string', function () {
                    Object.assign(assetUnderTest, { timeStart: '42' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.timeStart).toEqual(42);
                    expect(assetUnderTest.timeStart).toEqual(jasmine.any(Number));
                });
            });
            describe('timeEnd', function () {
                it('is a number if it was defined as a number', function () {
                    Object.assign(assetUnderTest, { timeEnd: 99 });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.timeEnd).toEqual(99);
                });
                it('is a number if it was defined as a string', function () {
                    Object.assign(assetUnderTest, { timeEnd: '99' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.timeEnd).toEqual(99);
                });
            });
            describe('metadata', function () {
                it('is not changed if it already exists', function () {
                    Object.assign(assetUnderTest, { metadata: 'some metadata', metaData: 'some other metadata', primary: 'yet another metadata' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.metadata).toEqual('some metadata');
                });
                it('is updated from metaData (uppercase D) if metadata (lowercase d) doesn\'t already exist', function () {
                    Object.assign(assetUnderTest, { metaData: 'some other metadata' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.metadata).toEqual('some other metadata');
                });
                it('is updated from primary if metadata doesn\'t already exist', function () {
                    Object.assign(assetUnderTest, { primary: 'yet another metadata' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.metadata).toEqual('yet another metadata');
                });
                it('favors metaData (uppercase D) over primary if both are defined somehow', function () {
                    Object.assign(assetUnderTest, { metaData: 'some other metadata', primary: 'yet another metadata' });
                    assetUnderTest.normalize();
                    expect(assetUnderTest.metadata).toEqual('some other metadata');
                });
            });
            describe('isViewable getter', function () {
                it('is true when the asset\'s accessPath value is \'ContentFilter\'', function () {
                    Object.assign(assetUnderTest, { accessPath: 'ContentFilter' });
                    expect(assetUnderTest.isViewable).toBe(true);
                });
                it('is false when the asset\'s accessPath value is not \'ContentFilter\'', function () {
                    Object.assign(assetUnderTest, { accessPath: 'NotContentFilter' });
                    expect(assetUnderTest.isViewable).toBe(false);
                });
            });
            describe('isChildOfViewableObject getter', function () {
                it('is true when the asset\'s accessPath value is \'ParentObject\'', function () {
                    Object.assign(assetUnderTest, { accessPath: 'ParentObject' });
                    expect(assetUnderTest.isChildOfViewableObject).toBe(true);
                });
                it('is false when the asset\'s accessPath value is not \'ParentObject\'', function () {
                    Object.assign(assetUnderTest, { accessPath: 'NotParentObject' });
                    expect(assetUnderTest.isChildOfViewableObject).toBe(false);
                });
            });
        });
    });
}
exports.main = main;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zaGFyZWQvaW50ZXJmYWNlcy9lbmhhbmNlZC1hc3NldC5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMEVBQXlFO0FBQ3pFLG1EQUFpRDtBQUVqRDtJQUNFLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRTtRQUN6QixJQUFJLGNBQTZCLENBQUM7UUFDbEMsSUFBTSxTQUFTLEdBQVcsRUFBRSxDQUFDO1FBQzdCLElBQU0sa0JBQWtCLEdBQWMsU0FBUyxTQUFNLENBQUM7UUFDdEQsSUFBTSxzQkFBc0IsR0FBVyxJQUFJLENBQUM7UUFDNUMsSUFBTSxnQkFBZ0IsR0FBVyxzQkFBc0IsR0FBRyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBRTNFLElBQU0sc0JBQXNCLEdBQWEsVUFDdkMsS0FBWSxFQUNaLGVBQXVCLEVBQ3ZCLHFCQUE2QixFQUM3QixzQkFBMEMsRUFDMUMsb0JBQXdDO1lBRHhDLHVDQUFBLEVBQUEsa0NBQTBDO1lBQzFDLHFDQUFBLEVBQUEsZ0NBQXdDO29DQUU3QixJQUFJO2dCQUNiLElBQU0seUJBQXlCLEdBQVcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFFN0YsRUFBRSxDQUFDLGFBQVcseUJBQXlCLHdCQUFtQixJQUFJLENBQUMsU0FBVyxFQUFFO29CQUMxRSxNQUFNLENBQUMsTUFBTSxDQUNYLGNBQWMsRUFDZCxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsRUFDaEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQ3ZFLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUNsRSxD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QUMsQ0FBQztvQkFFOUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDNUQsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsRUFBRSxDQUFDLHFFQUFxRSxFQUFFO29CQUN4RSxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRSxFQUFFLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxDQUFDLENBQUM7b0JBRWpFLE1BQU0sQ0FBQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzdELENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQXhzQkQsb0JBd3NCQyIsImZpbGUiOiJhcHAvc2hhcmVkL2ludGVyZmFjZXMvZW5oYW5jZWQtYXNzZXQuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYW1lIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZHVsZXMvd2F6ZWUtZnJhbWUtZm9ybWF0dGVyL2luZGV4JztcbmltcG9ydCB7IEVuaGFuY2VkQXNzZXQgfSBmcm9tICcuL2VuaGFuY2VkLWFzc2V0JztcblxuZXhwb3J0IGZ1bmN0aW9uIG1haW4oKSB7XG4gIGRlc2NyaWJlKCdFbmhhbmNlZCBBc3NldCcsICgpID0+IHtcbiAgICBsZXQgYXNzZXRVbmRlclRlc3Q6IEVuaGFuY2VkQXNzZXQ7XG4gICAgY29uc3QgZnJhbWVSYXRlOiBudW1iZXIgPSAzMDtcbiAgICBjb25zdCBmcmFtZVJhdGVNZXRhZGF0dW06IHN0cmluZyA9IGAke2ZyYW1lUmF0ZX0gZnBzYDtcbiAgICBjb25zdCBkdXJhdGlvbkluTWlsbGlzZWNvbmRzOiBudW1iZXIgPSA5MDAwO1xuICAgIGNvbnN0IGR1cmF0aW9uSW5GcmFtZXM6IG51bWJlciA9IGR1cmF0aW9uSW5NaWxsaXNlY29uZHMgKiBmcmFtZVJhdGUgLyAxMDAwO1xuXG4gICAgY29uc3QgZ2VuZXJhdGVGcmFtZVRlc3RzRnJvbTogRnVuY3Rpb24gPSAoXG4gICAgICB0ZXN0czogYW55W10sXG4gICAgICBmcmFtZUdldHRlck5hbWU6IHN0cmluZyxcbiAgICAgIGZyYW1lTnVtYmVyR2V0dGVyTmFtZTogc3RyaW5nLFxuICAgICAgbWlsbGlzZWNvbmRzR2V0dGVyTmFtZTogc3RyaW5nID0gdW5kZWZpbmVkLFxuICAgICAgcGVyY2VudGFnZUdldHRlck5hbWU6IHN0cmluZyA9IHVuZGVmaW5lZFxuICAgICkgPT4ge1xuICAgICAgZm9yIChjb25zdCB0ZXN0IG9mIHRlc3RzKSB7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0RGVzY3JpcHRpb246IHN0cmluZyA9IHRlc3QuZXhwZWN0ZWQgPyAnaXRzIGV4cGVjdGVkIHZhbHVlJyA6ICd1bmRlZmluZWQnO1xuXG4gICAgICAgIGl0KGByZXR1cm5zICR7ZXhwZWN0ZWRSZXN1bHREZXNjcmlwdGlvbn0gd2hlbiB0aGUgYXNzZXQgJHt0ZXN0LmNvbmRpdGlvbn1gLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIGFzc2V0VW5kZXJUZXN0LFxuICAgICAgICAgICAgeyBtZXRhZGF0YTogW10gfSxcbiAgICAgICAgICAgIHRlc3QuaGFzT3duUHJvcGVydHkoJ3RpbWVTdGFydCcpID8geyB0aW1lU3RhcnQ6IHRlc3QudGltZVN0YXJ0IH0gOiBudWxsLFxuICAgICAgICAgICAgdGVzdC5oYXNPd25Qcm9wZXJ0eSgndGltZUVuZCcpID8geyB0aW1lRW5kOiB0ZXN0LnRpbWVFbmQgfSA6IG51bGxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHRlc3QuZnJhbWVSYXRlKSBhc3NldFVuZGVyVGVzdC5tZXRhZGF0YVswXSA9IHsgbmFtZTogJ0Zvcm1hdC5GcmFtZVJhdGUnLCB2YWx1ZTogZnJhbWVSYXRlTWV0YWRhdHVtIH07XG4gICAgICAgICAgaWYgKHRlc3QuZHVyYXRpb24pIGFzc2V0VW5kZXJUZXN0Lm1ldGFkYXRhWzFdID0geyBuYW1lOiAnRm9ybWF0LkR1cmF0aW9uJywgdmFsdWU6IGAke2R1cmF0aW9uSW5NaWxsaXNlY29uZHN9YCB9O1xuXG4gICAgICAgICAgaWYgKHRlc3QuZXhwZWN0ZWRNaWxsaXNlY29uZHMgPj0gMCkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRGcmFtZTogRnJhbWUgPSBuZXcgRnJhbWUoZnJhbWVSYXRlKS5zZXRGcm9tU2Vjb25kcyh0ZXN0LmV4cGVjdGVkTWlsbGlzZWNvbmRzIC8gMTAwMCk7XG5cbiAgICAgICAgICAgIGV4cGVjdCgoYXNzZXRVbmRlclRlc3QgYXMgYW55KVtmcmFtZUdldHRlck5hbWVdKS50b0VxdWFsKGV4cGVjdGVkRnJhbWUpO1xuICAgICAgICAgICAgZXhwZWN0KChhc3NldFVuZGVyVGVzdCBhcyBhbnkpW2ZyYW1lTnVtYmVyR2V0dGVyTmFtZV0pLnRvRXF1YWwoZXhwZWN0ZWRGcmFtZS5mcmFtZU51bWJlcik7XG4gICAgICAgICAgICBpZiAobWlsbGlzZWNvbmRzR2V0dGVyTmFtZSkge1xuICAgICAgICAgICAgICBleHBlY3QoKGFzc2V0VW5kZXJUZXN0IGFzIGFueSlbbWlsbGlzZWNvbmRzR2V0dGVyTmFtZV0pLnRvRXF1YWwodGVzdC5leHBlY3RlZE1pbGxpc2Vjb25kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGVyY2VudGFnZUdldHRlck5hbWUpIHtcbiAgICAgICAgICAgICAgZXhwZWN0KChhc3NldFVuZGVyVGVzdCBhcyBhbnkpW3BlcmNlbnRhZ2VHZXR0ZXJOYW1lXSlcbiAgICAgICAgICAgICAgICAudG9FcXVhbCh0ZXN0LmR1cmF0aW9uID8gdGVzdC5leHBlY3RlZE1pbGxpc2Vjb25kcyAqIDEwMCAvIGR1cmF0aW9uSW5NaWxsaXNlY29uZHMgOiAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXhwZWN0KChhc3NldFVuZGVyVGVzdCBhcyBhbnkpW2ZyYW1lR2V0dGVyTmFtZV0pLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdCgoYXNzZXRVbmRlclRlc3QgYXMgYW55KVtmcmFtZU51bWJlckdldHRlck5hbWVdKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICAgICAgICBpZiAobWlsbGlzZWNvbmRzR2V0dGVyTmFtZSkge1xuICAgICAgICAgICAgICBleHBlY3QoKGFzc2V0VW5kZXJUZXN0IGFzIGFueSlbbWlsbGlzZWNvbmRzR2V0dGVyTmFtZV0pLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwZXJjZW50YWdlR2V0dGVyTmFtZSkge1xuICAgICAgICAgICAgICBleHBlY3QoKGFzc2V0VW5kZXJUZXN0IGFzIGFueSlbcGVyY2VudGFnZUdldHRlck5hbWVdKS50b0JlKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGdlbmVyYXRlTWV0YWRhdGFUZXN0c0ZvcjogRnVuY3Rpb24gPSAoXG4gICAgICBnZXR0ZXJOYW1lOiBzdHJpbmcsXG4gICAgICBtZXRhZGF0YU5hbWU6IHN0cmluZyxcbiAgICAgIGdldHRlclJldHVyblZhbHVlczogeyBbbWV0YWRhdGFWYWx1ZTogc3RyaW5nXTogYW55IH0sXG4gICAgICBpbmRleDogbnVtYmVyID0gLTFcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IGlzSW5kZXhlZDogYm9vbGVhbiA9IGluZGV4ID49IDA7XG5cbiAgICAgIGZvciAoY29uc3QgbWV0YWRhdGFWYWx1ZSBvZiBPYmplY3Qua2V5cyhnZXR0ZXJSZXR1cm5WYWx1ZXMpKSB7XG4gICAgICAgIGNvbnN0IGdldHRlclJldHVyblZhbHVlOiBhbnkgPSBnZXR0ZXJSZXR1cm5WYWx1ZXNbbWV0YWRhdGFWYWx1ZV07XG5cbiAgICAgICAgaXQoYHJldHVybnMgdGhlICR7aXNJbmRleGVkID8gYG1ldGFkYXRhIHZhbHVlIGF0IGluZGV4ICR7aW5kZXh9YCA6IGAke21ldGFkYXRhTmFtZX0gbWV0YWRhdGEgdmFsdWVgfWAsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IFtdO1xuICAgICAgICAgIG1ldGFkYXRhW2lzSW5kZXhlZCA/IGluZGV4IDogMF0gPSB7IG5hbWU6IG1ldGFkYXRhTmFtZSwgdmFsdWU6IG1ldGFkYXRhVmFsdWUgfTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IG1ldGFkYXRhOiBtZXRhZGF0YSB9KTtcblxuICAgICAgICAgIGV4cGVjdCgoYXNzZXRVbmRlclRlc3QgYXMgYW55KVtnZXR0ZXJOYW1lXSkudG9FcXVhbChnZXR0ZXJSZXR1cm5WYWx1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChpc0luZGV4ZWQpIHtcbiAgICAgICAgICBpdCgnZG9lcyBub3QgY2FyZSBhYm91dCB0aGUgbWV0YWRhdGEgbmFtZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gW107XG4gICAgICAgICAgICBtZXRhZGF0YVtpc0luZGV4ZWQgPyBpbmRleCA6IDBdID0geyBuYW1lOiBgTm90LiR7bWV0YWRhdGFOYW1lfWAsIHZhbHVlOiBtZXRhZGF0YVZhbHVlIH07XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IG1ldGFkYXRhOiBtZXRhZGF0YSB9KTtcblxuICAgICAgICAgICAgZXhwZWN0KChhc3NldFVuZGVyVGVzdCBhcyBhbnkpW2dldHRlck5hbWVdKS50b0VxdWFsKGdldHRlclJldHVyblZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpdCgncmV0dXJucyB1bmRlZmluZWQgaWYgdGhlIGFzc2V0IGlzIG1pc3NpbmcgdGhlIHJlcXVlc3RlZCBtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KChhc3NldFVuZGVyVGVzdCBhcyBhbnkpW2dldHRlck5hbWVdKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGlzSW5kZXhlZCkge1xuICAgICAgICBpdCgncmV0dXJucyB1bmRlZmluZWQgaWYgdGhlIGFzc2V0IGhhcyB0aGUgcmVxdWVzdGVkIG1ldGFkYXRhIGF0IGEgZGlmZmVyZW50IGluZGV4JywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gW107XG4gICAgICAgICAgbWV0YWRhdGFbKGlzSW5kZXhlZCA/IGluZGV4IDogMCkgKyAxXSA9IHsgbmFtZTogbWV0YWRhdGFOYW1lLCB2YWx1ZTogJ3RoZSBtZXRhZGF0YSB2YWx1ZScgfTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IG1ldGFkYXRhOiBtZXRhZGF0YSB9KTtcblxuICAgICAgICAgIGV4cGVjdCgoYXNzZXRVbmRlclRlc3QgYXMgYW55KVtnZXR0ZXJOYW1lXSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0luZGV4ZWQpIHtcbiAgICAgICAgaXQoJ2NhY2hlcyBpdHMgdmFsdWUnLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBbXTtcbiAgICAgICAgICBtZXRhZGF0YVtpc0luZGV4ZWQgPyBpbmRleCA6IDBdID0geyBuYW1lOiBtZXRhZGF0YU5hbWUsIHZhbHVlOiAndGhlIG1ldGFkYXRhIHZhbHVlJyB9O1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgbWV0YWRhdGE6IG1ldGFkYXRhIH0pO1xuXG4gICAgICAgICAgc3B5T24oYXNzZXRVbmRlclRlc3QsICdnZXRNZXRhZGF0YVZhbHVlRm9yJyk7XG5cbiAgICAgICAgICBsZXQgdmFsdWU6IGFueSA9IChhc3NldFVuZGVyVGVzdCBhcyBhbnkpW2dldHRlck5hbWVdO1xuICAgICAgICAgIHZhbHVlID0gKGFzc2V0VW5kZXJUZXN0IGFzIGFueSlbZ2V0dGVyTmFtZV07XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuZ2V0TWV0YWRhdGFWYWx1ZUZvcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBhc3NldFVuZGVyVGVzdCA9IG5ldyBFbmhhbmNlZEFzc2V0KCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZWFjaCBnZXR0ZXIgaW4gW2R1cmF0aW9uRnJhbWUsIGR1cmF0aW9uRnJhbWVOdW1iZXJdJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IGFueSA9IFtcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgbm8gZHVyYXRpb24gYW5kIG5vIGZyYW1lIHJhdGUnLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIG9ubHkgYSBmcmFtZSByYXRlJywgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIG9ubHkgYSBkdXJhdGlvbicsIGR1cmF0aW9uOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBjb25kaXRpb246ICdoYXMgYSBkdXJhdGlvbiBhbmQgYSBmcmFtZSByYXRlJyxcbiAgICAgICAgICBkdXJhdGlvbjogdHJ1ZSwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogZHVyYXRpb25Jbk1pbGxpc2Vjb25kc1xuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgZ2VuZXJhdGVGcmFtZVRlc3RzRnJvbSh0ZXN0cywgJ2R1cmF0aW9uRnJhbWUnLCAnZHVyYXRpb25GcmFtZU51bWJlcicpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2R1cmF0aW9uTWlsbGlzZWNvbmRzIGdldHRlcicsICgpID0+IHtcbiAgICAgIGdlbmVyYXRlTWV0YWRhdGFUZXN0c0ZvcihcbiAgICAgICAgJ2R1cmF0aW9uTWlsbGlzZWNvbmRzJyxcbiAgICAgICAgJ0Zvcm1hdC5EdXJhdGlvbicsXG4gICAgICAgIHsgJzEyMzQ1Njc4JzogMTIzNDU2NzgsICcxMjM0NTY3OC45JzogMTIzNDU2NzgsICcwMDowMTowMCc6IHVuZGVmaW5lZCB9XG4gICAgICApO1xuXG4gICAgICBpdCgnY2FuIGhhbmRsZSBISDpNTTpTUyBkdXJhdGlvbiBtZXRhZGF0YSB3aGVuIGEgZnJhbWUgcmF0ZSBpcyBkZWZpbmVkJywgKCkgPT4ge1xuICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0LFxuICAgICAgICAgIHsgbWV0YWRhdGE6IFt7IG5hbWU6ICdGb3JtYXQuRnJhbWVSYXRlJywgdmFsdWU6ICczMCBmcHMnIH0sIHsgbmFtZTogJ0Zvcm1hdC5EdXJhdGlvbicsIHZhbHVlOiAnMDA6MDE6MDAnIH1dIH1cbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuZHVyYXRpb25NaWxsaXNlY29uZHMpLnRvQmUoNjAwMDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcbiAgICAgICdlYWNoIGdldHRlciBpbiBbc3ViY2xpcER1cmF0aW9uRnJhbWUsIHN1YmNsaXBEdXJhdGlvbkZyYW1lTnVtYmVyLCBzdWJjbGlwRHVyYXRpb25NaWxsaXNlY29uZHMsIHN1YmNsaXBEdXJhdGlvblBlcmNlbnRhZ2VdJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgdGVzdHM6IGFueSA9IFtcbiAgICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBubyB0aW1lU3RhcnQsIG5vIHRpbWVFbmQsIG5vIGR1cmF0aW9uLCBhbmQgbm8gZnJhbWUgcmF0ZScsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBvbmx5IGEgZnJhbWUgcmF0ZScsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIG9ubHkgYSBkdXJhdGlvbicsIGR1cmF0aW9uOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uZGl0aW9uOiAnaGFzIGEgZHVyYXRpb24gYW5kIGEgZnJhbWUgcmF0ZScsXG4gICAgICAgICAgICBkdXJhdGlvbjogdHJ1ZSwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogZHVyYXRpb25Jbk1pbGxpc2Vjb25kc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIHRpbWVFbmQnLCB0aW1lRW5kOiA2MDAwLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uZGl0aW9uOiAnaGFzIGEgdGltZUVuZCBhbmQgYSBmcmFtZSByYXRlJywgdGltZUVuZDogNjAwMCwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogNjAwMCAtIDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIGEgdGltZUVuZCBhbmQgYSBkdXJhdGlvbicsIHRpbWVFbmQ6IDYwMDAsIGR1cmF0aW9uOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uZGl0aW9uOiAnaGFzIGEgdGltZUVuZCwgYSBkdXJhdGlvbiwgYW5kIGEgZnJhbWUgcmF0ZScsXG4gICAgICAgICAgICB0aW1lRW5kOiA2MDAwLCBkdXJhdGlvbjogdHJ1ZSwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogNjAwMCAtIDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIG9ubHkgYSB0aW1lU3RhcnQnLCB0aW1lU3RhcnQ6IDMwMDAsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHRpbWVTdGFydCBhbmQgYSBmcmFtZSByYXRlJywgdGltZVN0YXJ0OiAzMDAwLCBmcmFtZVJhdGU6IHRydWUsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHRpbWVTdGFydCBhbmQgYSBkdXJhdGlvbicsIHRpbWVTdGFydDogMzAwMCwgZHVyYXRpb246IHRydWUsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25kaXRpb246ICdoYXMgYSB0aW1lU3RhcnQsIGEgZnJhbWUgcmF0ZSwgYW5kIGEgZHVyYXRpb24nLFxuICAgICAgICAgICAgdGltZVN0YXJ0OiAzMDAwLCBmcmFtZVJhdGU6IHRydWUsIGR1cmF0aW9uOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogZHVyYXRpb25Jbk1pbGxpc2Vjb25kcyAtIDMwMDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIGEgdGltZVN0YXJ0IGFuZCBhIHRpbWVFbmQnLCB0aW1lU3RhcnQ6IDMwMDAsIHRpbWVFbmQ6IDYwMDAsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25kaXRpb246ICdoYXMgYSB0aW1lU3RhcnQsIGEgdGltZUVuZCwgYW5kIGEgZnJhbWUgcmF0ZScsXG4gICAgICAgICAgICB0aW1lU3RhcnQ6IDMwMDAsIHRpbWVFbmQ6IDYwMDAsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IDYwMDAgLSAzMDAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25kaXRpb246ICdoYXMgYSB0aW1lU3RhcnQsIGEgdGltZUVuZCwgYW5kIGEgZHVyYXRpb24nLFxuICAgICAgICAgICAgdGltZVN0YXJ0OiAzMDAwLCB0aW1lRW5kOiA2MDAwLCBkdXJhdGlvbjogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uZGl0aW9uOiAnaGFzIGEgdGltZVN0YXJ0LCBhIHRpbWVFbmQsIGEgZHVyYXRpb24sIGFuZCBhIGZyYW1lIHJhdGUnLFxuICAgICAgICAgICAgdGltZVN0YXJ0OiAzMDAwLCB0aW1lRW5kOiA2MDAwLCBkdXJhdGlvbjogdHJ1ZSwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogNjAwMCAtIDMwMDBcbiAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgZ2VuZXJhdGVGcmFtZVRlc3RzRnJvbShcbiAgICAgICAgICB0ZXN0cywgJ3N1YmNsaXBEdXJhdGlvbkZyYW1lJywgJ3N1YmNsaXBEdXJhdGlvbkZyYW1lTnVtYmVyJywgJ3N1YmNsaXBEdXJhdGlvbk1pbGxpc2Vjb25kcycsICdzdWJjbGlwRHVyYXRpb25QZXJjZW50YWdlJ1xuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZWFjaCBnZXR0ZXIgaW4gW2luTWFya2VyRnJhbWUsIGluTWFya2VyRnJhbWVOdW1iZXIsIGluTWFya2VyTWlsbGlzZWNvbmRzLCBpbk1hcmtlclBlcmNlbnRhZ2VdJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IGFueSA9IFtcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgbm8gdGltZVN0YXJ0IGFuZCBubyBmcmFtZSByYXRlJywgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBvbmx5IGEgZnJhbWUgcmF0ZScsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IDAgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIHBvc2l0aXZlIHRpbWVTdGFydCcsIHRpbWVTdGFydDogMzAwMCwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHBvc2l0aXZlIHRpbWVTdGFydCBhbmQgYSBmcmFtZSByYXRlJywgdGltZVN0YXJ0OiAzMDAwLCBmcmFtZVJhdGU6IHRydWUsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiAzMDAwIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIG9ubHkgYSB6ZXJvIHRpbWVTdGFydCcsIHRpbWVTdGFydDogMCwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHplcm8gdGltZVN0YXJ0IGFuZCBhIGZyYW1lIHJhdGUnLCB0aW1lU3RhcnQ6IDAsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IDAgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIG5lZ2F0aXZlIHRpbWVTdGFydCcsIHRpbWVTdGFydDogLTEsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgYSBuZWdhdGl2ZSB0aW1lU3RhcnQgYW5kIGEgZnJhbWUgcmF0ZScsIHRpbWVTdGFydDogLTEsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IDAgfVxuICAgICAgXTtcblxuICAgICAgZ2VuZXJhdGVGcmFtZVRlc3RzRnJvbSh0ZXN0cywgJ2luTWFya2VyRnJhbWUnLCAnaW5NYXJrZXJGcmFtZU51bWJlcicsICdpbk1hcmtlck1pbGxpc2Vjb25kcycsICdpbk1hcmtlclBlcmNlbnRhZ2UnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdlYWNoIGdldHRlciBpbiBbb3V0TWFya2VyRnJhbWUsIG91dE1hcmtlckZyYW1lTnVtYmVyLCBvdXRNYXJrZXJNaWxsaXNlY29uZHMsIG91dE1hcmtlclBlcmNlbnRhZ2VdJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IGFueSA9IFtcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgbm8gdGltZUVuZCwgbm8gZHVyYXRpb24sIGFuZCBubyBmcmFtZSByYXRlJywgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBvbmx5IGEgZnJhbWUgcmF0ZScsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBvbmx5IGEgZHVyYXRpb24nLCBkdXJhdGlvbjogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7XG4gICAgICAgICAgY29uZGl0aW9uOiAnaGFzIGEgZHVyYXRpb24gYW5kIGEgZnJhbWUgcmF0ZScsXG4gICAgICAgICAgZHVyYXRpb246IHRydWUsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IGR1cmF0aW9uSW5NaWxsaXNlY29uZHNcbiAgICAgICAgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIHBvc2l0aXZlIHRpbWVFbmQnLCB0aW1lRW5kOiA2MDAwLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIGEgcG9zaXRpdmUgdGltZUVuZCBhbmQgYSBmcmFtZSByYXRlJywgdGltZUVuZDogNjAwMCwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogNjAwMCB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHBvc2l0aXZlIHRpbWVFbmQgYW5kIGEgZHVyYXRpb24nLCB0aW1lRW5kOiA2MDAwLCBkdXJhdGlvbjogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7XG4gICAgICAgICAgY29uZGl0aW9uOiAnaGFzIGEgcG9zaXRpdmUgdGltZUVuZCwgYSBkdXJhdGlvbiwgYW5kIGEgZnJhbWUgcmF0ZScsXG4gICAgICAgICAgdGltZUVuZDogNjAwMCwgZHVyYXRpb246IHRydWUsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IDYwMDBcbiAgICAgICAgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIHplcm8gdGltZUVuZCcsIHRpbWVFbmQ6IDAsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgYSB6ZXJvIHRpbWVFbmQgYW5kIGEgZnJhbWUgcmF0ZScsIHRpbWVFbmQ6IDAsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IDAgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgYSB6ZXJvIHRpbWVFbmQgYW5kIGEgZHVyYXRpb24nLCB0aW1lRW5kOiAwLCBkdXJhdGlvbjogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7XG4gICAgICAgICAgY29uZGl0aW9uOiAnaGFzIGEgemVybyB0aW1lRW5kLCBhIGR1cmF0aW9uLCBhbmQgYSBmcmFtZSByYXRlJyxcbiAgICAgICAgICB0aW1lRW5kOiAwLCBkdXJhdGlvbjogdHJ1ZSwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogMFxuICAgICAgICB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBvbmx5IGEgbmVnYXRpdmUgdGltZUVuZCcsIHRpbWVFbmQ6IC0yLCBleHBlY3RlZE1pbGxpc2Vjb25kczogdW5kZWZpbmVkIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIGEgbmVnYXRpdmUgdGltZUVuZCBhbmQgYSBmcmFtZSByYXRlJywgdGltZUVuZDogLTIsIGZyYW1lUmF0ZTogdHJ1ZSwgZXhwZWN0ZWRNaWxsaXNlY29uZHM6IHVuZGVmaW5lZCB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIG5lZ2F0aXZlIHRpbWVFbmQgYW5kIGEgZHVyYXRpb24nLCB0aW1lRW5kOiAtMiwgZHVyYXRpb246IHRydWUsIGV4cGVjdGVkTWlsbGlzZWNvbmRzOiB1bmRlZmluZWQgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNvbmRpdGlvbjogJ2hhcyBhIG5lZ2F0aXZlIHRpbWVFbmQsIGEgZHVyYXRpb24sIGFuZCBhIGZyYW1lIHJhdGUnLFxuICAgICAgICAgIHRpbWVFbmQ6IC0yLCBkdXJhdGlvbjogdHJ1ZSwgZnJhbWVSYXRlOiB0cnVlLCBleHBlY3RlZE1pbGxpc2Vjb25kczogZHVyYXRpb25Jbk1pbGxpc2Vjb25kc1xuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBnZW5lcmF0ZUZyYW1lVGVzdHNGcm9tKHRlc3RzLCAnb3V0TWFya2VyRnJhbWUnLCAnb3V0TWFya2VyRnJhbWVOdW1iZXInLCAnb3V0TWFya2VyTWlsbGlzZWNvbmRzJywgJ291dE1hcmtlclBlcmNlbnRhZ2UnKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdnZXRNZXRhZGF0YVZhbHVlRm9yKCknLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyBtZXRhZGF0YTogW10gfSk7XG4gICAgICAgIGFzc2V0VW5kZXJUZXN0Lm1ldGFkYXRhWzQyXSA9IHsgbmFtZTogJ1NvbWUuTmFtZScsIHZhbHVlOiAnc29tZSB2YWx1ZScgfTtcbiAgICAgICAgYXNzZXRVbmRlclRlc3QubWV0YWRhdGFbNDddID0geyBuYW1lOiAnU29tZS5PdGhlci5OYW1lJywgdmFsdWU6ICdzb21lIG90aGVyIHZhbHVlJyB9O1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIHRoZSBleHBlY3RlZCBtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LmdldE1ldGFkYXRhVmFsdWVGb3IoJ1NvbWUuTmFtZScpKS50b0VxdWFsKCdzb21lIHZhbHVlJyk7XG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5nZXRNZXRhZGF0YVZhbHVlRm9yKCdTb21lLk90aGVyLk5hbWUnKSkudG9FcXVhbCgnc29tZSBvdGhlciB2YWx1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdyZXR1cm5zIHVuZGVmaW5lZCBmb3IgYSBuYW1lIHRoYXQgZG9lc25cXCd0IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuZ2V0TWV0YWRhdGFWYWx1ZUZvcignU29tZS5Ob25leGlzdGVudC5OYW1lJykpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJucyB1bmRlZmluZWQgZm9yIGEgbmFtZSB0aGF0IGRvZXNuXFwndCBoYXZlIGEgdmFsdWUnLCAoKSA9PiB7XG4gICAgICAgIGFzc2V0VW5kZXJUZXN0Lm1ldGFkYXRhWzBdID0geyBuYW1lOiAnWWV0LkFub3RoZXIuTmFtZScgfSBhcyBhbnk7XG5cbiAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LmdldE1ldGFkYXRhVmFsdWVGb3IoJ1lldC5Bbm90aGVyLk5hbWUnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdpcyBub3QgY29uZnVzZWQgYnkgZW1wdHkgZWxlbWVudHMgaW4gdGhlIG1ldGFkYXRhIGFycmF5JywgKCkgPT4ge1xuICAgICAgICBhc3NldFVuZGVyVGVzdC5tZXRhZGF0YVswXSA9IHt9IGFzIGFueTtcblxuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuZ2V0TWV0YWRhdGFWYWx1ZUZvcignU29tZS5OYW1lJykpLnRvRXF1YWwoJ3NvbWUgdmFsdWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnaXMgbm90IGNvbmZ1c2VkIGJ5IHVuZGVmaW5lZCBlbGVtZW50cyBpbiB0aGUgbWV0YWRhdGEgYXJyYXknLCAoKSA9PiB7XG4gICAgICAgIGFzc2V0VW5kZXJUZXN0Lm1ldGFkYXRhWzBdID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5nZXRNZXRhZGF0YVZhbHVlRm9yKCdTb21lLk5hbWUnKSkudG9FcXVhbCgnc29tZSB2YWx1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdpcyBub3QgY29uZnVzZWQgYnkgbnVsbCBlbGVtZW50cyBpbiB0aGUgbWV0YWRhdGEgYXJyYXknLCAoKSA9PiB7XG4gICAgICAgIGFzc2V0VW5kZXJUZXN0Lm1ldGFkYXRhWzBdID0gbnVsbDtcblxuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuZ2V0TWV0YWRhdGFWYWx1ZUZvcignU29tZS5OYW1lJykpLnRvRXF1YWwoJ3NvbWUgdmFsdWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnaXMgbm90IGNvbmZ1c2VkIGJ5IHVuZXhwZWN0ZWQgcHJvcGVydGllcyBpbiB0aGUgbWV0YWRhdGEgb2JqZWN0JywgKCkgPT4ge1xuICAgICAgICBhc3NldFVuZGVyVGVzdC5tZXRhZGF0YVs0Ml0gPSB7IG5hbWU6ICdTb21lLk5hbWUnLCB2YWx1ZTogJ3NvbWUgdmFsdWUnLCBvdGhlcjogJ2p1bmsnLCBhbmQ6ICd0aGluZ3MnIH0gYXMgYW55O1xuXG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5nZXRNZXRhZGF0YVZhbHVlRm9yKCdTb21lLk5hbWUnKSkudG9FcXVhbCgnc29tZSB2YWx1ZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnY29udmVydE1ldGFkYXRhVmFsdWVGb3IoKScsICgpID0+IHtcbiAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IG1ldGFkYXRhOiBbXSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJucyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwYXNzZWQtaW4gZnVuY3Rpb24gYXBwbGllZCB0byB0aGUgbWV0YWRhdGEgdmFsdWUnLCAoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgbWV0YWRhdGE6IFt7IG5hbWU6ICdTb21lLk5hbWUnLCB2YWx1ZTogJzMuMTQgYm90dGxlcyBvZiBiZWVyIG9uIHRoZSB3YWxsJyB9XSB9KTtcblxuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuY29udmVydE1ldGFkYXRhVmFsdWVGb3IoJ1NvbWUuTmFtZScsIHZhbHVlID0+IHBhcnNlRmxvYXQodmFsdWUpICogMikpLnRvRXF1YWwoNi4yOCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JldHVybnMgdW5kZWZpbmVkIGlmIHRoZSBhc3NldCBpcyBtaXNzaW5nIHRoZSByZXF1ZXN0ZWQgbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5jb252ZXJ0TWV0YWRhdGFWYWx1ZUZvcignU29tZS5OYW1lJywgdmFsdWUgPT4gcGFyc2VGbG9hdCh2YWx1ZSkgKiAyKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc3ViY2xpcE1hcmtlcnMgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdHM6IHsgaGFzRnJhbWVSYXRlOiBib29sZWFuLCB0aW1lU3RhcnQ6IG51bWJlciwgdGltZUVuZDogbnVtYmVyLCBleHBlY3RlZEluOiBib29sZWFuLCBleHBlY3RlZE91dDogYm9vbGVhbiB9W10gPSBbXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiB1bmRlZmluZWQsIHRpbWVFbmQ6IHVuZGVmaW5lZCwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogZmFsc2UsIHRpbWVTdGFydDogdW5kZWZpbmVkLCB0aW1lRW5kOiBudWxsLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiB1bmRlZmluZWQsIHRpbWVFbmQ6IC0yLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiB1bmRlZmluZWQsIHRpbWVFbmQ6IDIwMDAsIGV4cGVjdGVkSW46IGZhbHNlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcblxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogZmFsc2UsIHRpbWVTdGFydDogbnVsbCwgdGltZUVuZDogdW5kZWZpbmVkLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiBudWxsLCB0aW1lRW5kOiBudWxsLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiBudWxsLCB0aW1lRW5kOiAtMiwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogZmFsc2UsIHRpbWVTdGFydDogbnVsbCwgdGltZUVuZDogMjAwMCwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiAtMSwgdGltZUVuZDogdW5kZWZpbmVkLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiAtMSwgdGltZUVuZDogbnVsbCwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogZmFsc2UsIHRpbWVTdGFydDogLTEsIHRpbWVFbmQ6IC0yLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiAtMSwgdGltZUVuZDogMjAwMCwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiAxMDAwLCB0aW1lRW5kOiB1bmRlZmluZWQsIGV4cGVjdGVkSW46IGZhbHNlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IGZhbHNlLCB0aW1lU3RhcnQ6IDEwMDAsIHRpbWVFbmQ6IG51bGwsIGV4cGVjdGVkSW46IGZhbHNlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IGZhbHNlLCB0aW1lU3RhcnQ6IDEwMDAsIHRpbWVFbmQ6IC0yLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiBmYWxzZSwgdGltZVN0YXJ0OiAxMDAwLCB0aW1lRW5kOiAyMDAwLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG5cbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IHRydWUsIHRpbWVTdGFydDogdW5kZWZpbmVkLCB0aW1lRW5kOiB1bmRlZmluZWQsIGV4cGVjdGVkSW46IGZhbHNlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IHRydWUsIHRpbWVTdGFydDogdW5kZWZpbmVkLCB0aW1lRW5kOiBudWxsLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiB0cnVlLCB0aW1lU3RhcnQ6IHVuZGVmaW5lZCwgdGltZUVuZDogLTIsIGV4cGVjdGVkSW46IGZhbHNlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IHRydWUsIHRpbWVTdGFydDogdW5kZWZpbmVkLCB0aW1lRW5kOiAyMDAwLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IHRydWUgfSxcblxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogdHJ1ZSwgdGltZVN0YXJ0OiBudWxsLCB0aW1lRW5kOiB1bmRlZmluZWQsIGV4cGVjdGVkSW46IGZhbHNlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IHRydWUsIHRpbWVTdGFydDogbnVsbCwgdGltZUVuZDogbnVsbCwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogdHJ1ZSwgdGltZVN0YXJ0OiBudWxsLCB0aW1lRW5kOiAtMiwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogdHJ1ZSwgdGltZVN0YXJ0OiBudWxsLCB0aW1lRW5kOiAyMDAwLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IHRydWUgfSxcblxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogdHJ1ZSwgdGltZVN0YXJ0OiAtMSwgdGltZUVuZDogdW5kZWZpbmVkLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiB0cnVlLCB0aW1lU3RhcnQ6IC0xLCB0aW1lRW5kOiBudWxsLCBleHBlY3RlZEluOiBmYWxzZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiB0cnVlLCB0aW1lU3RhcnQ6IC0xLCB0aW1lRW5kOiAtMiwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiBmYWxzZSB9LFxuICAgICAgICB7IGhhc0ZyYW1lUmF0ZTogdHJ1ZSwgdGltZVN0YXJ0OiAtMSwgdGltZUVuZDogMjAwMCwgZXhwZWN0ZWRJbjogZmFsc2UsIGV4cGVjdGVkT3V0OiB0cnVlIH0sXG5cbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IHRydWUsIHRpbWVTdGFydDogMTAwMCwgdGltZUVuZDogdW5kZWZpbmVkLCBleHBlY3RlZEluOiB0cnVlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IHRydWUsIHRpbWVTdGFydDogMTAwMCwgdGltZUVuZDogbnVsbCwgZXhwZWN0ZWRJbjogdHJ1ZSwgZXhwZWN0ZWRPdXQ6IGZhbHNlIH0sXG4gICAgICAgIHsgaGFzRnJhbWVSYXRlOiB0cnVlLCB0aW1lU3RhcnQ6IDEwMDAsIHRpbWVFbmQ6IC0yLCBleHBlY3RlZEluOiB0cnVlLCBleHBlY3RlZE91dDogZmFsc2UgfSxcbiAgICAgICAgeyBoYXNGcmFtZVJhdGU6IHRydWUsIHRpbWVTdGFydDogMTAwMCwgdGltZUVuZDogMjAwMCwgZXhwZWN0ZWRJbjogdHJ1ZSwgZXhwZWN0ZWRPdXQ6IHRydWUgfSxcbiAgICAgIF07XG5cbiAgICAgIHRlc3RzLmZvckVhY2godGVzdCA9PiB7XG4gICAgICAgIGNvbnN0IGluTWFya2VyRnJhbWUgPSBuZXcgRnJhbWUoMzApLnNldEZyb21GcmFtZU51bWJlcigzMCk7XG4gICAgICAgIGNvbnN0IG91dE1hcmtlckZyYW1lID0gbmV3IEZyYW1lKDMwKS5zZXRGcm9tRnJhbWVOdW1iZXIoNjApO1xuXG4gICAgICAgIGRlc2NyaWJlKGB3aGVuIGFzc2V0IGhhcyAke3Rlc3QuaGFzRnJhbWVSYXRlID8gJ2EnIDogJ25vJ30gZnJhbWUgcmF0ZWAsICgpID0+IHtcbiAgICAgICAgICBpdChgaGFzICR7dGVzdC5leHBlY3RlZEluID8gJ2FuJyA6ICdubyd9IGluIG1hcmtlciBhbmQgJHt0ZXN0LmV4cGVjdGVkSW4gPyAnYW4nIDogJ25vJ30gb3V0IG1hcmtlcmAgK1xuICAgICAgICAgICAgYCB3aGVuIHRpbWVTdGFydCA9ICR7dGVzdC50aW1lU3RhcnR9IGFuZCB0aW1lRW5kID0gJHt0ZXN0LnRpbWVFbmR9YCwgKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAodGVzdC5oYXNGcmFtZVJhdGUpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IG1ldGFkYXRhOiBbXSB9KTtcbiAgICAgICAgICAgICAgICBhc3NldFVuZGVyVGVzdC5tZXRhZGF0YVswXSA9IHsgbmFtZTogJ0Zvcm1hdC5GcmFtZVJhdGUnLCB2YWx1ZTogJzMwIGZwcycgfTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgdGltZVN0YXJ0OiB0ZXN0LnRpbWVTdGFydCwgdGltZUVuZDogdGVzdC50aW1lRW5kIH0pO1xuXG4gICAgICAgICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5zdWJjbGlwTWFya2VycykudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgaW46IHRlc3QuZXhwZWN0ZWRJbiA/IGluTWFya2VyRnJhbWUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgb3V0OiB0ZXN0LmV4cGVjdGVkT3V0ID8gb3V0TWFya2VyRnJhbWUgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd0aXRsZSBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBnZW5lcmF0ZU1ldGFkYXRhVGVzdHNGb3IoJ3RpdGxlJywgJ1RpdGxlJywgeyAnVGhpcyBJcyBhIFRpdGxlJzogJ1RoaXMgSXMgYSBUaXRsZScgfSwgMCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZGVzY3JpcHRpb24gZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgZ2VuZXJhdGVNZXRhZGF0YVRlc3RzRm9yKCdkZXNjcmlwdGlvbicsICdEZXNjcmlwdGlvbicsIHsgJ1RoaXMgaXMgYSBkZXNjcmlwdGlvbi4nOiAnVGhpcyBpcyBhIGRlc2NyaXB0aW9uLicgfSwgMSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZm9ybWF0VHlwZSBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBnZW5lcmF0ZU1ldGFkYXRhVGVzdHNGb3IoJ2Zvcm1hdFR5cGUnLCAnVEUuRGlnaXRhbEZvcm1hdCcsIHsgJ0hpZ2ggRGVmaW5pdGlvbic6ICdIaWdoIERlZmluaXRpb24nIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2lzSW1hZ2UgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgaXQoJ3JldHVybnMgdHJ1ZSBmb3IgYW4gaW1hZ2UnLCAoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgcmVzb3VyY2VDbGFzczogJ0ltYWdlJyB9KTtcblxuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuaXNJbWFnZSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJucyBmYWxzZSBmb3IgYSBub24taW1hZ2UnLCAoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgcmVzb3VyY2VDbGFzczogJ2JsYWgnIH0pO1xuXG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5pc0ltYWdlKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmV0dXJucyBmYWxzZSBpZiB0aGUgYXNzZXQgaXMgbWlzc2luZyByZXNvdXJjZUNsYXNzJywgKCkgPT4ge1xuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuaXNJbWFnZSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdmcmFtZXNQZXJTZWNvbmQgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgZ2VuZXJhdGVNZXRhZGF0YVRlc3RzRm9yKCdmcmFtZXNQZXJTZWNvbmQnLCAnRm9ybWF0LkZyYW1lUmF0ZScsIHsgJzI5Ljk3IGZwcyc6IDI5Ljk3IH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2lzU3ViY2xpcHBlZCBnZXR0ZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0czogYW55ID0gW1xuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBubyB0aW1lU3RhcnQgYW5kIG5vIHRpbWVFbmQnLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIHBvc2l0aXZlIHRpbWVTdGFydCcsIHRpbWVTdGFydDogMzAwMCwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIHplcm8gdGltZVN0YXJ0JywgdGltZVN0YXJ0OiAwLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBvbmx5IGEgbmVnYXRpdmUgdGltZVN0YXJ0JywgdGltZVN0YXJ0OiAtMSwgZXhwZWN0ZWRSZXN1bHQ6IGZhbHNlIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIG9ubHkgYSBwb3NpdGl2ZSB0aW1lRW5kJywgdGltZUVuZDogNjAwMCwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgb25seSBhIHplcm8gdGltZUVuZCcsIHRpbWVFbmQ6IDAsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIG9ubHkgYSBuZWdhdGl2ZSB0aW1lRW5kJywgdGltZUVuZDogLTIsIGV4cGVjdGVkUmVzdWx0OiBmYWxzZSB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHBvc2l0aXZlIHRpbWVTdGFydCBhbmQgYSBwb3NpdGl2ZSB0aW1lRW5kJywgdGltZVN0YXJ0OiAzMDAwLCB0aW1lRW5kOiA2MDAwLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHplcm8gdGltZVN0YXJ0IGFuZCBhIHBvc2l0aXZlIHRpbWVFbmQnLCB0aW1lU3RhcnQ6IDAsIHRpbWVFbmQ6IDYwMDAsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIGEgbmVnYXRpdmUgdGltZVN0YXJ0IGFuZCBhIHBvc2l0aXZlIHRpbWVFbmQnLCB0aW1lU3RhcnQ6IC0xLCB0aW1lRW5kOiA2MDAwLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHBvc2l0aXZlIHRpbWVTdGFydCBhbmQgYSB6ZXJvIHRpbWVFbmQnLCB0aW1lU3RhcnQ6IDMwMDAsIHRpbWVFbmQ6IDAsIGV4cGVjdGVkUmVzdWx0OiB0cnVlIH0sXG4gICAgICAgIHsgY29uZGl0aW9uOiAnaGFzIGEgemVybyB0aW1lU3RhcnQgYW5kIGEgemVybyB0aW1lRW5kJywgdGltZVN0YXJ0OiAwLCB0aW1lRW5kOiAwLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIG5lZ2F0aXZlIHRpbWVTdGFydCBhbmQgYSB6ZXJvIHRpbWVFbmQnLCB0aW1lU3RhcnQ6IC0xLCB0aW1lRW5kOiAwLCBleHBlY3RlZFJlc3VsdDogdHJ1ZSB9LFxuICAgICAgICB7IGNvbmRpdGlvbjogJ2hhcyBhIHBvc2l0aXZlIHRpbWVTdGFydCBhbmQgYSBuZWdhdGl2ZSB0aW1lRW5kJywgdGltZVN0YXJ0OiAzMDAwLCB0aW1lRW5kOiAtMiwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgYSB6ZXJvIHRpbWVTdGFydCBhbmQgYSBuZWdhdGl2ZSB0aW1lRW5kJywgdGltZVN0YXJ0OiAwLCB0aW1lRW5kOiAtMiwgZXhwZWN0ZWRSZXN1bHQ6IHRydWUgfSxcbiAgICAgICAgeyBjb25kaXRpb246ICdoYXMgYSBuZWdhdGl2ZSB0aW1lU3RhcnQgYW5kIGEgbmVnYXRpdmUgdGltZUVuZCcsIHRpbWVTdGFydDogLTEsIHRpbWVFbmQ6IC0yLCBleHBlY3RlZFJlc3VsdDogZmFsc2UgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB0ZXN0IG9mIHRlc3RzKSB7XG4gICAgICAgIGl0KGByZXR1cm5zICR7dGVzdC5leHBlY3RlZFJlc3VsdH0gZm9yIGFuIGFzc2V0IHRoYXQgJHt0ZXN0LmNvbmRpdGlvbn1gLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIGFzc2V0VW5kZXJUZXN0LFxuICAgICAgICAgICAgeyBtZXRhZGF0YTogW10gfSxcbiAgICAgICAgICAgIHRlc3QuaGFzT3duUHJvcGVydHkoJ3RpbWVTdGFydCcpID8geyB0aW1lU3RhcnQ6IHRlc3QudGltZVN0YXJ0IH0gOiBudWxsLFxuICAgICAgICAgICAgdGVzdC5oYXNPd25Qcm9wZXJ0eSgndGltZUVuZCcpID8geyB0aW1lRW5kOiB0ZXN0LnRpbWVFbmQgfSA6IG51bGxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LmlzU3ViY2xpcHBlZCkudG9CZSh0ZXN0LmV4cGVjdGVkUmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncm91dGVyTGluaygpJywgKCkgPT4ge1xuXG4gICAgICBpdCgnUmV0dXJucyBjb3JyZWN0IHBhdGggZm9yIGEgY29sbGVjdGlvbiBhc3NldCcsICgpID0+IHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICBhc3NldFVuZGVyVGVzdCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhc3NldElkOiA0NyxcbiAgICAgICAgICAgIHV1aWQ6ICdhYWJiLWNjZGQtZWVmZi1nZ2hoJyxcbiAgICAgICAgICAgIHR5cGU6ICdjb2xsZWN0aW9uJyxcbiAgICAgICAgICAgIHBhcmVudElkOiAxXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3Qucm91dGVyTGluaykudG9FcXVhbChbYC9jb2xsZWN0aW9ucy8xL2Fzc2V0L2FhYmItY2NkZC1lZWZmLWdnaGhgXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ1JldHVybnMgY29ycmVjdCBwYXRoIGZvciBhIHF1b3RlIGVkaXQgYXNzZXQnLCAoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgYXNzZXRVbmRlclRlc3QsXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXNzZXRJZDogNDcsXG4gICAgICAgICAgICB1dWlkOiAnYWFiYi1jY2RkLWVlZmYtZ2doaCcsXG4gICAgICAgICAgICB0eXBlOiAncXVvdGVFZGl0J1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LnJvdXRlckxpbmspLnRvRXF1YWwoW2AvYWN0aXZlLXF1b3RlL2Fzc2V0L2FhYmItY2NkZC1lZWZmLWdnaGhgXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ1JldHVybnMgY29ycmVjdCBwYXRoIGZvciBhIHNlYXJjaCBhc3NldCcsICgpID0+IHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICBhc3NldFVuZGVyVGVzdCxcbiAgICAgICAgICB7IGFzc2V0SWQ6IDQ3LCB0eXBlOiAnc2VhcmNoJyB9XG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5yb3V0ZXJMaW5rKS50b0VxdWFsKFtgL3NlYXJjaC9hc3NldC80N2BdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnUmV0dXJucyBjb3JyZWN0IHBhdGggZm9yIGEgcXVvdGUgc2hvdyBhc3NldCcsICgpID0+IHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICBhc3NldFVuZGVyVGVzdCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhc3NldElkOiA0NyxcbiAgICAgICAgICAgIHV1aWQ6ICdhYWJiLWNjZGQtZWVmZi1nZ2hoJyxcbiAgICAgICAgICAgIHR5cGU6ICdxdW90ZVNob3cnLFxuICAgICAgICAgICAgcGFyZW50SWQ6IDFcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5yb3V0ZXJMaW5rKS50b0VxdWFsKFtgL3F1b3Rlcy8xL2Fzc2V0L2FhYmItY2NkZC1lZWZmLWdnaGhgXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ1JldHVybnMgY29ycmVjdCBwYXRoIGZvciBhIG9yZGVyIGFzc2V0JywgKCkgPT4ge1xuICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFzc2V0SWQ6IDQ3LFxuICAgICAgICAgICAgdXVpZDogJ2FhYmItY2NkZC1lZWZmLWdnaGgnLFxuICAgICAgICAgICAgdHlwZTogJ29yZGVyJyxcbiAgICAgICAgICAgIHBhcmVudElkOiAxXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3Qucm91dGVyTGluaykudG9FcXVhbChbYC9vcmRlcnMvMS9hc3NldC9hYWJiLWNjZGQtZWVmZi1nZ2hoYF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdSZXR1cm5zIGNvcnJlY3QgcGF0aCBmb3IgYSBjYXJ0IGFzc2V0JywgKCkgPT4ge1xuICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFzc2V0SWQ6IDQ3LFxuICAgICAgICAgICAgdXVpZDogJ2FhYmItY2NkZC1lZWZmLWdnaGgnLFxuICAgICAgICAgICAgdHlwZTogJ2NhcnQnXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3Qucm91dGVyTGluaykudG9FcXVhbChbYC9jYXJ0L2Fzc2V0L2FhYmItY2NkZC1lZWZmLWdnaGhgXSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdub3JtYWxpemUoKScsICgpID0+IHtcbiAgICAgIGl0KCdyZXR1cm5zIGl0cyBjb250YWluaW5nIG9iamVjdCB0byBlbmFibGUgY2hhaW5pbmcnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5ub3JtYWxpemUoKSkudG9FcXVhbChhc3NldFVuZGVyVGVzdCk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ25hbWUnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdpcyBub3QgY2hhbmdlZCBpZiBpdCBhbHJlYWR5IGV4aXN0cycsICgpID0+IHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IG5hbWU6ICdzb21lIG5hbWUnLCBhc3NldE5hbWU6ICdzb21lIG90aGVyIG5hbWUnIH0pO1xuXG4gICAgICAgICAgYXNzZXRVbmRlclRlc3Qubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QubmFtZSkudG9FcXVhbCgnc29tZSBuYW1lJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyB1cGRhdGVkIGlmIGl0IGRvZXNuXFwndCBhbHJlYWR5IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgYXNzZXROYW1lOiAnc29tZSBvdGhlciBuYW1lJyB9KTtcblxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0Lm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0Lm5hbWUpLnRvRXF1YWwoJ3NvbWUgb3RoZXIgbmFtZScpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgndGh1bWJuYWlsVXJsJywgKCkgPT4ge1xuICAgICAgICBpdCgnaXMgbm90IGNoYW5nZWQgaWYgaXQgYWxyZWFkeSBleGlzdHMnLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyB0aHVtYm5haWxVcmw6ICdzb21lIFVSTCcsIHRodW1ibmFpbDogeyB1cmxzOiB7IGh0dHBzOiAnc29tZSBvdGhlciBVUkwnIH0gfSB9KTtcblxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0Lm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LnRodW1ibmFpbFVybCkudG9FcXVhbCgnc29tZSBVUkwnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2lzIHVwZGF0ZWQgZnJvbSB0aGUgZGVlcGx5IG5lc3RlZCBvYmplY3QgaWYgaXQgZG9lc25cXCd0IGFscmVhZHkgZXhpc3QnLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyB0aHVtYm5haWw6IHsgdXJsczogeyBodHRwczogJ3NvbWUgb3RoZXIgVVJMJyB9IH0gfSk7XG5cbiAgICAgICAgICBhc3NldFVuZGVyVGVzdC5ub3JtYWxpemUoKTtcblxuICAgICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC50aHVtYm5haWxVcmwpLnRvRXF1YWwoJ3NvbWUgb3RoZXIgVVJMJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyB1cGRhdGVkIGZyb20gY2xpcFRodW1ibmFpbFVybCBpZiBpdCBkb2VzblxcJ3QgYWxyZWFkeSBleGlzdCcsICgpID0+IHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IGNsaXBUaHVtYm5haWxVcmw6ICd5ZXQgYW5vdGhlciBVUkwnIH0pO1xuXG4gICAgICAgICAgYXNzZXRVbmRlclRlc3Qubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QudGh1bWJuYWlsVXJsKS50b0VxdWFsKCd5ZXQgYW5vdGhlciBVUkwnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2lzIHVwZGF0ZWQgZnJvbSB0aGUgZGVlcGx5IG5lc3RlZCBvYmplY3QgaWYgaXQgQU5EIGNsaXBUaHVtYm5haWxVcmwgYXJlIGJvdGggZGVmaW5lZCBmb3Igc29tZSByZWFzb24nLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIGFzc2V0VW5kZXJUZXN0LFxuICAgICAgICAgICAgeyB0aHVtYm5haWw6IHsgdXJsczogeyBodHRwczogJ3NvbWUgb3RoZXIgVVJMJyB9IH0sIGNsaXBUaHVtYm5haWxVcmw6ICd5ZXQgYW5vdGhlciBVUkwnIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgYXNzZXRVbmRlclRlc3Qubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QudGh1bWJuYWlsVXJsKS50b0VxdWFsKCdzb21lIG90aGVyIFVSTCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgncmVzb3VyY2VDbGFzcycsICgpID0+IHtcbiAgICAgICAgICBpdCgnaXMgbm90IGNoYW5nZWQgaWYgaXQgYWxyZWFkeSBleGlzdHMnLCAoKSA9PiB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgICBhc3NldFVuZGVyVGVzdCxcbiAgICAgICAgICAgICAgeyByZXNvdXJjZUNsYXNzOiAnc29tZSByZXNvdXJjZUNsYXNzJywgbWV0YWRhdGE6IFt7IG5hbWU6ICdSZXNvdXJjZS5DbGFzcycsIHZhbHVlOiAnc29tZSBvdGhlciByZXNvdXJjZUNsYXNzJyB9XSB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhc3NldFVuZGVyVGVzdC5ub3JtYWxpemUoKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LnJlc291cmNlQ2xhc3MpLnRvRXF1YWwoJ3NvbWUgcmVzb3VyY2VDbGFzcycpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ2lzIHVwZGF0ZWQgZnJvbSBtZXRhZGF0YSBpZiBpdCBkb2VzblxcJ3QgYWxyZWFkeSBleGlzdCcsICgpID0+IHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgIGFzc2V0VW5kZXJUZXN0LFxuICAgICAgICAgICAgICB7IG1ldGFkYXRhOiBbeyBuYW1lOiAnUmVzb3VyY2UuQ2xhc3MnLCB2YWx1ZTogJ3NvbWUgb3RoZXIgcmVzb3VyY2VDbGFzcycgfV0gfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXNzZXRVbmRlclRlc3Qubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5yZXNvdXJjZUNsYXNzKS50b0VxdWFsKCdzb21lIG90aGVyIHJlc291cmNlQ2xhc3MnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdpcyB1bmRlZmluZWQgaWYgaXQgZG9lc25cXCd0IGFscmVhZHkgZXhpc3QgYW5kIGlzIG5vdCBmb3VuZCBpbiBtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgICAgIGFzc2V0VW5kZXJUZXN0Lm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QucmVzb3VyY2VDbGFzcykudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgndGltZVN0YXJ0JywgKCkgPT4ge1xuICAgICAgICBpdCgnaXMgYSBudW1iZXIgaWYgaXQgd2FzIGRlZmluZWQgYXMgYSBudW1iZXInLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyB0aW1lU3RhcnQ6IDQyIH0pO1xuXG4gICAgICAgICAgYXNzZXRVbmRlclRlc3Qubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QudGltZVN0YXJ0KS50b0VxdWFsKDQyKTtcbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QudGltZVN0YXJ0KS50b0VxdWFsKGphc21pbmUuYW55KE51bWJlcikpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnaXMgYSBudW1iZXIgaWYgaXQgd2FzIGRlZmluZWQgYXMgYSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyB0aW1lU3RhcnQ6ICc0MicgfSk7XG5cbiAgICAgICAgICBhc3NldFVuZGVyVGVzdC5ub3JtYWxpemUoKTtcblxuICAgICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC50aW1lU3RhcnQpLnRvRXF1YWwoNDIpO1xuICAgICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC50aW1lU3RhcnQpLnRvRXF1YWwoamFzbWluZS5hbnkoTnVtYmVyKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCd0aW1lRW5kJywgKCkgPT4ge1xuICAgICAgICBpdCgnaXMgYSBudW1iZXIgaWYgaXQgd2FzIGRlZmluZWQgYXMgYSBudW1iZXInLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyB0aW1lRW5kOiA5OSB9KTtcblxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0Lm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LnRpbWVFbmQpLnRvRXF1YWwoOTkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnaXMgYSBudW1iZXIgaWYgaXQgd2FzIGRlZmluZWQgYXMgYSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyB0aW1lRW5kOiAnOTknIH0pO1xuXG4gICAgICAgICAgYXNzZXRVbmRlclRlc3Qubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QudGltZUVuZCkudG9FcXVhbCg5OSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCdtZXRhZGF0YScsICgpID0+IHtcbiAgICAgICAgaXQoJ2lzIG5vdCBjaGFuZ2VkIGlmIGl0IGFscmVhZHkgZXhpc3RzJywgKCkgPT4ge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICBhc3NldFVuZGVyVGVzdCxcbiAgICAgICAgICAgIHsgbWV0YWRhdGE6ICdzb21lIG1ldGFkYXRhJywgbWV0YURhdGE6ICdzb21lIG90aGVyIG1ldGFkYXRhJywgcHJpbWFyeTogJ3lldCBhbm90aGVyIG1ldGFkYXRhJyB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0Lm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0Lm1ldGFkYXRhKS50b0VxdWFsKCdzb21lIG1ldGFkYXRhJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyB1cGRhdGVkIGZyb20gbWV0YURhdGEgKHVwcGVyY2FzZSBEKSBpZiBtZXRhZGF0YSAobG93ZXJjYXNlIGQpIGRvZXNuXFwndCBhbHJlYWR5IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgbWV0YURhdGE6ICdzb21lIG90aGVyIG1ldGFkYXRhJyB9KTtcblxuICAgICAgICAgIGFzc2V0VW5kZXJUZXN0Lm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0Lm1ldGFkYXRhKS50b0VxdWFsKCdzb21lIG90aGVyIG1ldGFkYXRhJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyB1cGRhdGVkIGZyb20gcHJpbWFyeSBpZiBtZXRhZGF0YSBkb2VzblxcJ3QgYWxyZWFkeSBleGlzdCcsICgpID0+IHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IHByaW1hcnk6ICd5ZXQgYW5vdGhlciBtZXRhZGF0YScgfSk7XG5cbiAgICAgICAgICBhc3NldFVuZGVyVGVzdC5ub3JtYWxpemUoKTtcblxuICAgICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5tZXRhZGF0YSkudG9FcXVhbCgneWV0IGFub3RoZXIgbWV0YWRhdGEnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2Zhdm9ycyBtZXRhRGF0YSAodXBwZXJjYXNlIEQpIG92ZXIgcHJpbWFyeSBpZiBib3RoIGFyZSBkZWZpbmVkIHNvbWVob3cnLCAoKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihhc3NldFVuZGVyVGVzdCwgeyBtZXRhRGF0YTogJ3NvbWUgb3RoZXIgbWV0YWRhdGEnLCBwcmltYXJ5OiAneWV0IGFub3RoZXIgbWV0YWRhdGEnIH0pO1xuXG4gICAgICAgICAgYXNzZXRVbmRlclRlc3Qubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QubWV0YWRhdGEpLnRvRXF1YWwoJ3NvbWUgb3RoZXIgbWV0YWRhdGEnKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ2lzVmlld2FibGUgZ2V0dGVyJywgKCkgPT4ge1xuICAgICAgICBpdCgnaXMgdHJ1ZSB3aGVuIHRoZSBhc3NldFxcJ3MgYWNjZXNzUGF0aCB2YWx1ZSBpcyBcXCdDb250ZW50RmlsdGVyXFwnJywgKCkgPT4ge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgYWNjZXNzUGF0aDogJ0NvbnRlbnRGaWx0ZXInIH0pO1xuXG4gICAgICAgICAgZXhwZWN0KGFzc2V0VW5kZXJUZXN0LmlzVmlld2FibGUpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyBmYWxzZSB3aGVuIHRoZSBhc3NldFxcJ3MgYWNjZXNzUGF0aCB2YWx1ZSBpcyBub3QgXFwnQ29udGVudEZpbHRlclxcJycsICgpID0+IHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGFzc2V0VW5kZXJUZXN0LCB7IGFjY2Vzc1BhdGg6ICdOb3RDb250ZW50RmlsdGVyJyB9KTtcblxuICAgICAgICAgIGV4cGVjdChhc3NldFVuZGVyVGVzdC5pc1ZpZXdhYmxlKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ2lzQ2hpbGRPZlZpZXdhYmxlT2JqZWN0IGdldHRlcicsICgpID0+IHtcbiAgICAgICAgaXQoJ2lzIHRydWUgd2hlbiB0aGUgYXNzZXRcXCdzIGFjY2Vzc1BhdGggdmFsdWUgaXMgXFwnUGFyZW50T2JqZWN0XFwnJywgKCkgPT4ge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgYWNjZXNzUGF0aDogJ1BhcmVudE9iamVjdCcgfSk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuaXNDaGlsZE9mVmlld2FibGVPYmplY3QpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpcyBmYWxzZSB3aGVuIHRoZSBhc3NldFxcJ3MgYWNjZXNzUGF0aCB2YWx1ZSBpcyBub3QgXFwnUGFyZW50T2JqZWN0XFwnJywgKCkgPT4ge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXNzZXRVbmRlclRlc3QsIHsgYWNjZXNzUGF0aDogJ05vdFBhcmVudE9iamVjdCcgfSk7XG5cbiAgICAgICAgICBleHBlY3QoYXNzZXRVbmRlclRlc3QuaXNDaGlsZE9mVmlld2FibGVPYmplY3QpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cbiJdfQ==
